(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function RE(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var cd={exports:{}},Aa={},hd={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var og;function CE(){if(og)return Ae;og=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),T=Symbol.iterator;function S(V){return V===null||typeof V!="object"?null:(V=T&&V[T]||V["@@iterator"],typeof V=="function"?V:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,$={};function L(V,Q,de){this.props=V,this.context=Q,this.refs=$,this.updater=de||O}L.prototype.isReactComponent={},L.prototype.setState=function(V,Q){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,Q,"setState")},L.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function q(){}q.prototype=L.prototype;function K(V,Q,de){this.props=V,this.context=Q,this.refs=$,this.updater=de||O}var ne=K.prototype=new q;ne.constructor=K,U(ne,L.prototype),ne.isPureReactComponent=!0;var ce=Array.isArray,Se=Object.prototype.hasOwnProperty,Te={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function I(V,Q,de){var Re,Ce={},De=null,Me=null;if(Q!=null)for(Re in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(De=""+Q.key),Q)Se.call(Q,Re)&&!N.hasOwnProperty(Re)&&(Ce[Re]=Q[Re]);var Fe=arguments.length-2;if(Fe===1)Ce.children=de;else if(1<Fe){for(var $e=Array(Fe),yt=0;yt<Fe;yt++)$e[yt]=arguments[yt+2];Ce.children=$e}if(V&&V.defaultProps)for(Re in Fe=V.defaultProps,Fe)Ce[Re]===void 0&&(Ce[Re]=Fe[Re]);return{$$typeof:r,type:V,key:De,ref:Me,props:Ce,_owner:Te.current}}function C(V,Q){return{$$typeof:r,type:V.type,key:Q,ref:V.ref,props:V.props,_owner:V._owner}}function P(V){return typeof V=="object"&&V!==null&&V.$$typeof===r}function b(V){var Q={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(de){return Q[de]})}var M=/\/+/g;function A(V,Q){return typeof V=="object"&&V!==null&&V.key!=null?b(""+V.key):Q.toString(36)}function nt(V,Q,de,Re,Ce){var De=typeof V;(De==="undefined"||De==="boolean")&&(V=null);var Me=!1;if(V===null)Me=!0;else switch(De){case"string":case"number":Me=!0;break;case"object":switch(V.$$typeof){case r:case e:Me=!0}}if(Me)return Me=V,Ce=Ce(Me),V=Re===""?"."+A(Me,0):Re,ce(Ce)?(de="",V!=null&&(de=V.replace(M,"$&/")+"/"),nt(Ce,Q,de,"",function(yt){return yt})):Ce!=null&&(P(Ce)&&(Ce=C(Ce,de+(!Ce.key||Me&&Me.key===Ce.key?"":(""+Ce.key).replace(M,"$&/")+"/")+V)),Q.push(Ce)),1;if(Me=0,Re=Re===""?".":Re+":",ce(V))for(var Fe=0;Fe<V.length;Fe++){De=V[Fe];var $e=Re+A(De,Fe);Me+=nt(De,Q,de,$e,Ce)}else if($e=S(V),typeof $e=="function")for(V=$e.call(V),Fe=0;!(De=V.next()).done;)De=De.value,$e=Re+A(De,Fe++),Me+=nt(De,Q,de,$e,Ce);else if(De==="object")throw Q=String(V),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function xt(V,Q,de){if(V==null)return V;var Re=[],Ce=0;return nt(V,Re,"","",function(De){return Q.call(de,De,Ce++)}),Re}function Nt(V){if(V._status===-1){var Q=V._result;Q=Q(),Q.then(function(de){(V._status===0||V._status===-1)&&(V._status=1,V._result=de)},function(de){(V._status===0||V._status===-1)&&(V._status=2,V._result=de)}),V._status===-1&&(V._status=0,V._result=Q)}if(V._status===1)return V._result.default;throw V._result}var ze={current:null},re={transition:null},pe={ReactCurrentDispatcher:ze,ReactCurrentBatchConfig:re,ReactCurrentOwner:Te};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:xt,forEach:function(V,Q,de){xt(V,function(){Q.apply(this,arguments)},de)},count:function(V){var Q=0;return xt(V,function(){Q++}),Q},toArray:function(V){return xt(V,function(Q){return Q})||[]},only:function(V){if(!P(V))throw Error("React.Children.only expected to receive a single React element child.");return V}},Ae.Component=L,Ae.Fragment=t,Ae.Profiler=o,Ae.PureComponent=K,Ae.StrictMode=s,Ae.Suspense=p,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Ae.act=se,Ae.cloneElement=function(V,Q,de){if(V==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+V+".");var Re=U({},V.props),Ce=V.key,De=V.ref,Me=V._owner;if(Q!=null){if(Q.ref!==void 0&&(De=Q.ref,Me=Te.current),Q.key!==void 0&&(Ce=""+Q.key),V.type&&V.type.defaultProps)var Fe=V.type.defaultProps;for($e in Q)Se.call(Q,$e)&&!N.hasOwnProperty($e)&&(Re[$e]=Q[$e]===void 0&&Fe!==void 0?Fe[$e]:Q[$e])}var $e=arguments.length-2;if($e===1)Re.children=de;else if(1<$e){Fe=Array($e);for(var yt=0;yt<$e;yt++)Fe[yt]=arguments[yt+2];Re.children=Fe}return{$$typeof:r,type:V.type,key:Ce,ref:De,props:Re,_owner:Me}},Ae.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},V.Provider={$$typeof:l,_context:V},V.Consumer=V},Ae.createElement=I,Ae.createFactory=function(V){var Q=I.bind(null,V);return Q.type=V,Q},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(V){return{$$typeof:d,render:V}},Ae.isValidElement=P,Ae.lazy=function(V){return{$$typeof:w,_payload:{_status:-1,_result:V},_init:Nt}},Ae.memo=function(V,Q){return{$$typeof:y,type:V,compare:Q===void 0?null:Q}},Ae.startTransition=function(V){var Q=re.transition;re.transition={};try{V()}finally{re.transition=Q}},Ae.unstable_act=se,Ae.useCallback=function(V,Q){return ze.current.useCallback(V,Q)},Ae.useContext=function(V){return ze.current.useContext(V)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(V){return ze.current.useDeferredValue(V)},Ae.useEffect=function(V,Q){return ze.current.useEffect(V,Q)},Ae.useId=function(){return ze.current.useId()},Ae.useImperativeHandle=function(V,Q,de){return ze.current.useImperativeHandle(V,Q,de)},Ae.useInsertionEffect=function(V,Q){return ze.current.useInsertionEffect(V,Q)},Ae.useLayoutEffect=function(V,Q){return ze.current.useLayoutEffect(V,Q)},Ae.useMemo=function(V,Q){return ze.current.useMemo(V,Q)},Ae.useReducer=function(V,Q,de){return ze.current.useReducer(V,Q,de)},Ae.useRef=function(V){return ze.current.useRef(V)},Ae.useState=function(V){return ze.current.useState(V)},Ae.useSyncExternalStore=function(V,Q,de){return ze.current.useSyncExternalStore(V,Q,de)},Ae.useTransition=function(){return ze.current.useTransition()},Ae.version="18.3.1",Ae}var ag;function nf(){return ag||(ag=1,hd.exports=CE()),hd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lg;function AE(){if(lg)return Aa;lg=1;var r=nf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,p,y){var w,T={},S=null,O=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(O=p.ref);for(w in p)s.call(p,w)&&!l.hasOwnProperty(w)&&(T[w]=p[w]);if(d&&d.defaultProps)for(w in p=d.defaultProps,p)T[w]===void 0&&(T[w]=p[w]);return{$$typeof:e,type:d,key:S,ref:O,props:T,_owner:o.current}}return Aa.Fragment=t,Aa.jsx=h,Aa.jsxs=h,Aa}var ug;function kE(){return ug||(ug=1,cd.exports=AE()),cd.exports}var x=kE(),H=nf();const ss=RE(H);var Cu={},dd={exports:{}},Jt={},fd={exports:{}},pd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cg;function PE(){return cg||(cg=1,function(r){function e(re,pe){var se=re.length;re.push(pe);e:for(;0<se;){var V=se-1>>>1,Q=re[V];if(0<o(Q,pe))re[V]=pe,re[se]=Q,se=V;else break e}}function t(re){return re.length===0?null:re[0]}function s(re){if(re.length===0)return null;var pe=re[0],se=re.pop();if(se!==pe){re[0]=se;e:for(var V=0,Q=re.length,de=Q>>>1;V<de;){var Re=2*(V+1)-1,Ce=re[Re],De=Re+1,Me=re[De];if(0>o(Ce,se))De<Q&&0>o(Me,Ce)?(re[V]=Me,re[De]=se,V=De):(re[V]=Ce,re[Re]=se,V=Re);else if(De<Q&&0>o(Me,se))re[V]=Me,re[De]=se,V=De;else break e}}return pe}function o(re,pe){var se=re.sortIndex-pe.sortIndex;return se!==0?se:re.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var p=[],y=[],w=1,T=null,S=3,O=!1,U=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(re){for(var pe=t(y);pe!==null;){if(pe.callback===null)s(y);else if(pe.startTime<=re)s(y),pe.sortIndex=pe.expirationTime,e(p,pe);else break;pe=t(y)}}function ce(re){if($=!1,ne(re),!U)if(t(p)!==null)U=!0,Nt(Se);else{var pe=t(y);pe!==null&&ze(ce,pe.startTime-re)}}function Se(re,pe){U=!1,$&&($=!1,q(I),I=-1),O=!0;var se=S;try{for(ne(pe),T=t(p);T!==null&&(!(T.expirationTime>pe)||re&&!b());){var V=T.callback;if(typeof V=="function"){T.callback=null,S=T.priorityLevel;var Q=V(T.expirationTime<=pe);pe=r.unstable_now(),typeof Q=="function"?T.callback=Q:T===t(p)&&s(p),ne(pe)}else s(p);T=t(p)}if(T!==null)var de=!0;else{var Re=t(y);Re!==null&&ze(ce,Re.startTime-pe),de=!1}return de}finally{T=null,S=se,O=!1}}var Te=!1,N=null,I=-1,C=5,P=-1;function b(){return!(r.unstable_now()-P<C)}function M(){if(N!==null){var re=r.unstable_now();P=re;var pe=!0;try{pe=N(!0,re)}finally{pe?A():(Te=!1,N=null)}}else Te=!1}var A;if(typeof K=="function")A=function(){K(M)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,xt=nt.port2;nt.port1.onmessage=M,A=function(){xt.postMessage(null)}}else A=function(){L(M,0)};function Nt(re){N=re,Te||(Te=!0,A())}function ze(re,pe){I=L(function(){re(r.unstable_now())},pe)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(re){re.callback=null},r.unstable_continueExecution=function(){U||O||(U=!0,Nt(Se))},r.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<re?Math.floor(1e3/re):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_getFirstCallbackNode=function(){return t(p)},r.unstable_next=function(re){switch(S){case 1:case 2:case 3:var pe=3;break;default:pe=S}var se=S;S=pe;try{return re()}finally{S=se}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(re,pe){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var se=S;S=re;try{return pe()}finally{S=se}},r.unstable_scheduleCallback=function(re,pe,se){var V=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?V+se:V):se=V,re){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=se+Q,re={id:w++,callback:pe,priorityLevel:re,startTime:se,expirationTime:Q,sortIndex:-1},se>V?(re.sortIndex=se,e(y,re),t(p)===null&&re===t(y)&&($?(q(I),I=-1):$=!0,ze(ce,se-V))):(re.sortIndex=Q,e(p,re),U||O||(U=!0,Nt(Se))),re},r.unstable_shouldYield=b,r.unstable_wrapCallback=function(re){var pe=S;return function(){var se=S;S=pe;try{return re.apply(this,arguments)}finally{S=se}}}}(pd)),pd}var hg;function xE(){return hg||(hg=1,fd.exports=PE()),fd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function NE(){if(dg)return Jt;dg=1;var r=nf(),e=xE();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},T={};function S(n){return p.call(T,n)?!0:p.call(w,n)?!1:y.test(n)?T[n]=!0:(w[n]=!0,!1)}function O(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function U(n,i,a,c){if(i===null||typeof i>"u"||O(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,f,g,v){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=g,this.removeEmptyString=v}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){L[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];L[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){L[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){L[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){L[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){L[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){L[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){L[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){L[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function K(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(q,K);L[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(q,K);L[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(q,K);L[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),L.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){L[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function ne(n,i,a,c){var f=L.hasOwnProperty(i)?L[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(U(i,a,f,c)&&(a=null),c||f===null?S(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var ce=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Se=Symbol.for("react.element"),Te=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),b=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),nt=Symbol.for("react.suspense_list"),xt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),ze=Symbol.for("react.offscreen"),re=Symbol.iterator;function pe(n){return n===null||typeof n!="object"?null:(n=re&&n[re]||n["@@iterator"],typeof n=="function"?n:null)}var se=Object.assign,V;function Q(n){if(V===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);V=i&&i[1]||""}return`
`+V+n}var de=!1;function Re(n,i){if(!n||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),g=c.stack.split(`
`),v=f.length-1,R=g.length-1;1<=v&&0<=R&&f[v]!==g[R];)R--;for(;1<=v&&0<=R;v--,R--)if(f[v]!==g[R]){if(v!==1||R!==1)do if(v--,R--,0>R||f[v]!==g[R]){var k=`
`+f[v].replace(" at new "," at ");return n.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",n.displayName)),k}while(1<=v&&0<=R);break}}}finally{de=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?Q(n):""}function Ce(n){switch(n.tag){case 5:return Q(n.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return n=Re(n.type,!1),n;case 11:return n=Re(n.type.render,!1),n;case 1:return n=Re(n.type,!0),n;default:return""}}function De(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case N:return"Fragment";case Te:return"Portal";case C:return"Profiler";case I:return"StrictMode";case A:return"Suspense";case nt:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case b:return(n.displayName||"Context")+".Consumer";case P:return(n._context.displayName||"Context")+".Provider";case M:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case xt:return i=n.displayName||null,i!==null?i:De(n.type)||"Memo";case Nt:i=n._payload,n=n._init;try{return De(n(i))}catch{}}return null}function Me(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Fe(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(n){var i=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(v){c=""+v,g.call(this,v)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(v){c=""+v},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function or(n){n._valueTracker||(n._valueTracker=yt(n))}function ps(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Vr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ki(n,i){var a=i.checked;return se({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function ms(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=Fe(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function bo(n,i){i=i.checked,i!=null&&ne(n,"checked",i,!1)}function Oo(n,i){bo(n,i);var a=Fe(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?gs(n,i.type,a):i.hasOwnProperty("defaultValue")&&gs(n,i.type,Fe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function hl(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function gs(n,i,a){(i!=="number"||Vr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ar=Array.isArray;function lr(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+Fe(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Lo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ys(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ar(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:Fe(a)}}function _s(n,i){var a=Fe(i.value),c=Fe(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Vo(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function ut(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ct(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?ut(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ur,Mo=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,f)})}:n}(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(ur=ur||document.createElement("div"),ur.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=ur.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Mr(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xi=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(n){xi.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),Pi[i]=Pi[n]})});function Fo(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Pi.hasOwnProperty(n)&&Pi[n]?(""+i).trim():i+"px"}function Uo(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Fo(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var jo=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zo(n,i){if(i){if(jo[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Bo(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ni=null;function vs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ws=null,cn=null,Bn=null;function Es(n){if(n=da(n)){if(typeof ws!="function")throw Error(t(280));var i=n.stateNode;i&&(i=zl(i),ws(n.stateNode,n.type,i))}}function $n(n){cn?Bn?Bn.push(n):Bn=[n]:cn=n}function $o(){if(cn){var n=cn,i=Bn;if(Bn=cn=null,Es(n),i)for(n=0;n<i.length;n++)Es(i[n])}}function Di(n,i){return n(i)}function Ho(){}var cr=!1;function Wo(n,i,a){if(cr)return n(i,a);cr=!0;try{return Di(n,i,a)}finally{cr=!1,(cn!==null||Bn!==null)&&(Ho(),$o())}}function rt(n,i){var a=n.stateNode;if(a===null)return null;var c=zl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ts=!1;if(d)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Ts=!1}function bi(n,i,a,c,f,g,v,R,k){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(X){this.onError(X)}}var Oi=!1,Is=null,In=!1,qo=null,Fc={onError:function(n){Oi=!0,Is=n}};function Ss(n,i,a,c,f,g,v,R,k){Oi=!1,Is=null,bi.apply(Fc,arguments)}function dl(n,i,a,c,f,g,v,R,k){if(Ss.apply(this,arguments),Oi){if(Oi){var B=Is;Oi=!1,Is=null}else throw Error(t(198));In||(In=!0,qo=B)}}function Sn(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,i.flags&4098&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Li(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function Rn(n){if(Sn(n)!==n)throw Error(t(188))}function fl(n){var i=n.alternate;if(!i){if(i=Sn(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return Rn(f),n;if(g===c)return Rn(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=g;else{for(var v=!1,R=f.child;R;){if(R===a){v=!0,a=f,c=g;break}if(R===c){v=!0,c=f,a=g;break}R=R.sibling}if(!v){for(R=g.child;R;){if(R===a){v=!0,a=g,c=f;break}if(R===c){v=!0,c=g,a=f;break}R=R.sibling}if(!v)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function Ko(n){return n=fl(n),n!==null?Rs(n):null}function Rs(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Rs(n);if(i!==null)return i;n=n.sibling}return null}var Cs=e.unstable_scheduleCallback,Go=e.unstable_cancelCallback,pl=e.unstable_shouldYield,Uc=e.unstable_requestPaint,He=e.unstable_now,ml=e.unstable_getCurrentPriorityLevel,Vi=e.unstable_ImmediatePriority,Fr=e.unstable_UserBlockingPriority,hn=e.unstable_NormalPriority,Qo=e.unstable_LowPriority,gl=e.unstable_IdlePriority,Mi=null,tn=null;function yl(n){if(tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(Mi,n,void 0,(n.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:vl,Yo=Math.log,_l=Math.LN2;function vl(n){return n>>>=0,n===0?32:31-(Yo(n)/_l|0)|0}var As=64,ks=4194304;function Ur(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Fi(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,g=n.pingedLanes,v=a&268435455;if(v!==0){var R=v&~f;R!==0?c=Ur(R):(g&=v,g!==0&&(c=Ur(g)))}else v=a&~f,v!==0?c=Ur(v):g!==0&&(c=Ur(g));if(c===0)return 0;if(i!==0&&i!==c&&!(i&f)&&(f=c&-c,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if(c&4&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-zt(i),f=1<<a,c|=n[a],i&=~f;return c}function jc(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hr(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes;0<g;){var v=31-zt(g),R=1<<v,k=f[v];k===-1?(!(R&a)||R&c)&&(f[v]=jc(R,i)):k<=i&&(n.expiredLanes|=R),g&=~R}}function nn(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Ui(){var n=As;return As<<=1,!(As&4194240)&&(As=64),n}function jr(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function zr(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-zt(i),n[i]=a}function Be(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-zt(a),g=1<<f;i[f]=0,c[f]=-1,n[f]=-1,a&=~g}}function Br(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-zt(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}var xe=0;function $r(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var wl,Ps,El,Tl,Il,Xo=!1,Hn=[],It=null,Cn=null,An=null,Hr=new Map,dn=new Map,Wn=[],zc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sl(n,i){switch(n){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Hr.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":dn.delete(i.pointerId)}}function Wt(n,i,a,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},i!==null&&(i=da(i),i!==null&&Ps(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function Bc(n,i,a,c,f){switch(i){case"focusin":return It=Wt(It,n,i,a,c,f),!0;case"dragenter":return Cn=Wt(Cn,n,i,a,c,f),!0;case"mouseover":return An=Wt(An,n,i,a,c,f),!0;case"pointerover":var g=f.pointerId;return Hr.set(g,Wt(Hr.get(g)||null,n,i,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,dn.set(g,Wt(dn.get(g)||null,n,i,a,c,f)),!0}return!1}function Rl(n){var i=Hi(n.target);if(i!==null){var a=Sn(i);if(a!==null){if(i=a.tag,i===13){if(i=Li(a),i!==null){n.blockedOn=i,Il(n.priority,function(){El(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function dr(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=xs(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Ni=c,a.target.dispatchEvent(c),Ni=null}else return i=da(a),i!==null&&Ps(i),n.blockedOn=a,!1;i.shift()}return!0}function ji(n,i,a){dr(n)&&a.delete(i)}function Cl(){Xo=!1,It!==null&&dr(It)&&(It=null),Cn!==null&&dr(Cn)&&(Cn=null),An!==null&&dr(An)&&(An=null),Hr.forEach(ji),dn.forEach(ji)}function kn(n,i){n.blockedOn===i&&(n.blockedOn=null,Xo||(Xo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Cl)))}function Pn(n){function i(f){return kn(f,n)}if(0<Hn.length){kn(Hn[0],n);for(var a=1;a<Hn.length;a++){var c=Hn[a];c.blockedOn===n&&(c.blockedOn=null)}}for(It!==null&&kn(It,n),Cn!==null&&kn(Cn,n),An!==null&&kn(An,n),Hr.forEach(i),dn.forEach(i),a=0;a<Wn.length;a++)c=Wn[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Wn.length&&(a=Wn[0],a.blockedOn===null);)Rl(a),a.blockedOn===null&&Wn.shift()}var fr=ce.ReactCurrentBatchConfig,Wr=!0;function Ge(n,i,a,c){var f=xe,g=fr.transition;fr.transition=null;try{xe=1,Jo(n,i,a,c)}finally{xe=f,fr.transition=g}}function $c(n,i,a,c){var f=xe,g=fr.transition;fr.transition=null;try{xe=4,Jo(n,i,a,c)}finally{xe=f,fr.transition=g}}function Jo(n,i,a,c){if(Wr){var f=xs(n,i,a,c);if(f===null)eh(n,i,c,zi,a),Sl(n,c);else if(Bc(f,n,i,a,c))c.stopPropagation();else if(Sl(n,c),i&4&&-1<zc.indexOf(n)){for(;f!==null;){var g=da(f);if(g!==null&&wl(g),g=xs(n,i,a,c),g===null&&eh(n,i,c,zi,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else eh(n,i,c,null,a)}}var zi=null;function xs(n,i,a,c){if(zi=null,n=vs(c),n=Hi(n),n!==null)if(i=Sn(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Li(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return zi=n,null}function Zo(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ml()){case Vi:return 1;case Fr:return 4;case hn:case Qo:return 16;case gl:return 536870912;default:return 16}default:return 16}}var rn=null,Ns=null,qt=null;function ea(){if(qt)return qt;var n,i=Ns,a=i.length,c,f="value"in rn?rn.value:rn.textContent,g=f.length;for(n=0;n<a&&i[n]===f[n];n++);var v=a-n;for(c=1;c<=v&&i[a-c]===f[g-c];c++);return qt=f.slice(n,1<c?1-c:void 0)}function Ds(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function qn(){return!0}function ta(){return!1}function St(n){function i(a,c,f,g,v){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=v,this.currentTarget=null;for(var R in n)n.hasOwnProperty(R)&&(a=n[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?qn:ta,this.isPropagationStopped=ta,this}return se(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=qn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=qn)},persist:function(){},isPersistent:qn}),i}var xn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bs=St(xn),Kn=se({},xn,{view:0,detail:0}),Hc=St(Kn),Os,pr,qr,Bi=se({},Kn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gn,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==qr&&(qr&&n.type==="mousemove"?(Os=n.screenX-qr.screenX,pr=n.screenY-qr.screenY):pr=Os=0,qr=n),Os)},movementY:function(n){return"movementY"in n?n.movementY:pr}}),Ls=St(Bi),na=se({},Bi,{dataTransfer:0}),Al=St(na),Vs=se({},Kn,{relatedTarget:0}),Ms=St(Vs),kl=se({},xn,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=St(kl),Pl=se({},xn,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),xl=St(Pl),Nl=se({},xn,{data:0}),ra=St(Nl),Fs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bl(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=Dl[n])?!!i[n]:!1}function Gn(){return bl}var u=se({},Kn,{key:function(n){if(n.key){var i=Fs[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=Ds(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bt[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gn,charCode:function(n){return n.type==="keypress"?Ds(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ds(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),m=St(u),_=se({},Bi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=St(_),F=se({},Kn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gn}),W=St(F),te=se({},xn,{propertyName:0,elapsedTime:0,pseudoElement:0}),je=St(te),ht=se({},Bi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),be=St(ht),_t=[9,13,27,32],ot=d&&"CompositionEvent"in window,fn=null;d&&"documentMode"in document&&(fn=document.documentMode);var sn=d&&"TextEvent"in window&&!fn,$i=d&&(!ot||fn&&8<fn&&11>=fn),Us=" ",ep=!1;function tp(n,i){switch(n){case"keyup":return _t.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function np(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var js=!1;function Iw(n,i){switch(n){case"compositionend":return np(i);case"keypress":return i.which!==32?null:(ep=!0,Us);case"textInput":return n=i.data,n===Us&&ep?null:n;default:return null}}function Sw(n,i){if(js)return n==="compositionend"||!ot&&tp(n,i)?(n=ea(),qt=Ns=rn=null,js=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return $i&&i.locale!=="ko"?null:i.data;default:return null}}var Rw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rp(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Rw[n.type]:i==="textarea"}function ip(n,i,a,c){$n(c),i=Fl(i,"onChange"),0<i.length&&(a=new bs("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var ia=null,sa=null;function Cw(n){Tp(n,0)}function Ol(n){var i=Ws(n);if(ps(i))return n}function Aw(n,i){if(n==="change")return i}var sp=!1;if(d){var Wc;if(d){var qc="oninput"in document;if(!qc){var op=document.createElement("div");op.setAttribute("oninput","return;"),qc=typeof op.oninput=="function"}Wc=qc}else Wc=!1;sp=Wc&&(!document.documentMode||9<document.documentMode)}function ap(){ia&&(ia.detachEvent("onpropertychange",lp),sa=ia=null)}function lp(n){if(n.propertyName==="value"&&Ol(sa)){var i=[];ip(i,sa,n,vs(n)),Wo(Cw,i)}}function kw(n,i,a){n==="focusin"?(ap(),ia=i,sa=a,ia.attachEvent("onpropertychange",lp)):n==="focusout"&&ap()}function Pw(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ol(sa)}function xw(n,i){if(n==="click")return Ol(i)}function Nw(n,i){if(n==="input"||n==="change")return Ol(i)}function Dw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var Nn=typeof Object.is=="function"?Object.is:Dw;function oa(n,i){if(Nn(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!p.call(i,f)||!Nn(n[f],i[f]))return!1}return!0}function up(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function cp(n,i){var a=up(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=up(a)}}function hp(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?hp(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function dp(){for(var n=window,i=Vr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Vr(n.document)}return i}function Kc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function bw(n){var i=dp(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&hp(a.ownerDocument.documentElement,a)){if(c!==null&&Kc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,g=Math.min(c.start,f);c=c.end===void 0?g:Math.min(c.end,f),!n.extend&&g>c&&(f=c,c=g,g=f),f=cp(a,g);var v=cp(a,c);f&&v&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==v.node||n.focusOffset!==v.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),g>c?(n.addRange(i),n.extend(v.node,v.offset)):(i.setEnd(v.node,v.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Ow=d&&"documentMode"in document&&11>=document.documentMode,zs=null,Gc=null,aa=null,Qc=!1;function fp(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Qc||zs==null||zs!==Vr(c)||(c=zs,"selectionStart"in c&&Kc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),aa&&oa(aa,c)||(aa=c,c=Fl(Gc,"onSelect"),0<c.length&&(i=new bs("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=zs)))}function Ll(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Bs={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Yc={},pp={};d&&(pp=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Vl(n){if(Yc[n])return Yc[n];if(!Bs[n])return n;var i=Bs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in pp)return Yc[n]=i[a];return n}var mp=Vl("animationend"),gp=Vl("animationiteration"),yp=Vl("animationstart"),_p=Vl("transitionend"),vp=new Map,wp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kr(n,i){vp.set(n,i),l(i,[n])}for(var Xc=0;Xc<wp.length;Xc++){var Jc=wp[Xc],Lw=Jc.toLowerCase(),Vw=Jc[0].toUpperCase()+Jc.slice(1);Kr(Lw,"on"+Vw)}Kr(mp,"onAnimationEnd"),Kr(gp,"onAnimationIteration"),Kr(yp,"onAnimationStart"),Kr("dblclick","onDoubleClick"),Kr("focusin","onFocus"),Kr("focusout","onBlur"),Kr(_p,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mw=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function Ep(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,dl(c,i,void 0,n),n.currentTarget=null}function Tp(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var g=void 0;if(i)for(var v=c.length-1;0<=v;v--){var R=c[v],k=R.instance,B=R.currentTarget;if(R=R.listener,k!==g&&f.isPropagationStopped())break e;Ep(f,R,B),g=k}else for(v=0;v<c.length;v++){if(R=c[v],k=R.instance,B=R.currentTarget,R=R.listener,k!==g&&f.isPropagationStopped())break e;Ep(f,R,B),g=k}}}if(In)throw n=qo,In=!1,qo=null,n}function qe(n,i){var a=i[oh];a===void 0&&(a=i[oh]=new Set);var c=n+"__bubble";a.has(c)||(Ip(i,n,2,!1),a.add(c))}function Zc(n,i,a){var c=0;i&&(c|=4),Ip(a,n,c,i)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function ua(n){if(!n[Ml]){n[Ml]=!0,s.forEach(function(a){a!=="selectionchange"&&(Mw.has(a)||Zc(a,!1,n),Zc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[Ml]||(i[Ml]=!0,Zc("selectionchange",!1,i))}}function Ip(n,i,a,c){switch(Zo(i)){case 1:var f=Ge;break;case 4:f=$c;break;default:f=Jo}a=f.bind(null,i,a,n),f=void 0,!Ts||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function eh(n,i,a,c,f){var g=c;if(!(i&1)&&!(i&2)&&c!==null)e:for(;;){if(c===null)return;var v=c.tag;if(v===3||v===4){var R=c.stateNode.containerInfo;if(R===f||R.nodeType===8&&R.parentNode===f)break;if(v===4)for(v=c.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===f||k.nodeType===8&&k.parentNode===f))return;v=v.return}for(;R!==null;){if(v=Hi(R),v===null)return;if(k=v.tag,k===5||k===6){c=g=v;continue e}R=R.parentNode}}c=c.return}Wo(function(){var B=g,X=vs(a),Z=[];e:{var Y=vp.get(n);if(Y!==void 0){var ie=bs,le=n;switch(n){case"keypress":if(Ds(a)===0)break e;case"keydown":case"keyup":ie=m;break;case"focusin":le="focus",ie=Ms;break;case"focusout":le="blur",ie=Ms;break;case"beforeblur":case"afterblur":ie=Ms;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Ls;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=Al;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=W;break;case mp:case gp:case yp:ie=mr;break;case _p:ie=je;break;case"scroll":ie=Hc;break;case"wheel":ie=be;break;case"copy":case"cut":case"paste":ie=xl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=E}var ue=(i&4)!==0,it=!ue&&n==="scroll",j=ue?Y!==null?Y+"Capture":null:Y;ue=[];for(var D=B,z;D!==null;){z=D;var ee=z.stateNode;if(z.tag===5&&ee!==null&&(z=ee,j!==null&&(ee=rt(D,j),ee!=null&&ue.push(ca(D,ee,z)))),it)break;D=D.return}0<ue.length&&(Y=new ie(Y,le,null,a,X),Z.push({event:Y,listeners:ue}))}}if(!(i&7)){e:{if(Y=n==="mouseover"||n==="pointerover",ie=n==="mouseout"||n==="pointerout",Y&&a!==Ni&&(le=a.relatedTarget||a.fromElement)&&(Hi(le)||le[gr]))break e;if((ie||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,ie?(le=a.relatedTarget||a.toElement,ie=B,le=le?Hi(le):null,le!==null&&(it=Sn(le),le!==it||le.tag!==5&&le.tag!==6)&&(le=null)):(ie=null,le=B),ie!==le)){if(ue=Ls,ee="onMouseLeave",j="onMouseEnter",D="mouse",(n==="pointerout"||n==="pointerover")&&(ue=E,ee="onPointerLeave",j="onPointerEnter",D="pointer"),it=ie==null?Y:Ws(ie),z=le==null?Y:Ws(le),Y=new ue(ee,D+"leave",ie,a,X),Y.target=it,Y.relatedTarget=z,ee=null,Hi(X)===B&&(ue=new ue(j,D+"enter",le,a,X),ue.target=z,ue.relatedTarget=it,ee=ue),it=ee,ie&&le)t:{for(ue=ie,j=le,D=0,z=ue;z;z=$s(z))D++;for(z=0,ee=j;ee;ee=$s(ee))z++;for(;0<D-z;)ue=$s(ue),D--;for(;0<z-D;)j=$s(j),z--;for(;D--;){if(ue===j||j!==null&&ue===j.alternate)break t;ue=$s(ue),j=$s(j)}ue=null}else ue=null;ie!==null&&Sp(Z,Y,ie,ue,!1),le!==null&&it!==null&&Sp(Z,it,le,ue,!0)}}e:{if(Y=B?Ws(B):window,ie=Y.nodeName&&Y.nodeName.toLowerCase(),ie==="select"||ie==="input"&&Y.type==="file")var he=Aw;else if(rp(Y))if(sp)he=Nw;else{he=Pw;var me=kw}else(ie=Y.nodeName)&&ie.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(he=xw);if(he&&(he=he(n,B))){ip(Z,he,a,X);break e}me&&me(n,Y,B),n==="focusout"&&(me=Y._wrapperState)&&me.controlled&&Y.type==="number"&&gs(Y,"number",Y.value)}switch(me=B?Ws(B):window,n){case"focusin":(rp(me)||me.contentEditable==="true")&&(zs=me,Gc=B,aa=null);break;case"focusout":aa=Gc=zs=null;break;case"mousedown":Qc=!0;break;case"contextmenu":case"mouseup":case"dragend":Qc=!1,fp(Z,a,X);break;case"selectionchange":if(Ow)break;case"keydown":case"keyup":fp(Z,a,X)}var ge;if(ot)e:{switch(n){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else js?tp(n,a)&&(ve="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&($i&&a.locale!=="ko"&&(js||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&js&&(ge=ea()):(rn=X,Ns="value"in rn?rn.value:rn.textContent,js=!0)),me=Fl(B,ve),0<me.length&&(ve=new ra(ve,n,null,a,X),Z.push({event:ve,listeners:me}),ge?ve.data=ge:(ge=np(a),ge!==null&&(ve.data=ge)))),(ge=sn?Iw(n,a):Sw(n,a))&&(B=Fl(B,"onBeforeInput"),0<B.length&&(X=new ra("onBeforeInput","beforeinput",null,a,X),Z.push({event:X,listeners:B}),X.data=ge))}Tp(Z,i)})}function ca(n,i,a){return{instance:n,listener:i,currentTarget:a}}function Fl(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=rt(n,a),g!=null&&c.unshift(ca(n,g,f)),g=rt(n,i),g!=null&&c.push(ca(n,g,f))),n=n.return}return c}function $s(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Sp(n,i,a,c,f){for(var g=i._reactName,v=[];a!==null&&a!==c;){var R=a,k=R.alternate,B=R.stateNode;if(k!==null&&k===c)break;R.tag===5&&B!==null&&(R=B,f?(k=rt(a,g),k!=null&&v.unshift(ca(a,k,R))):f||(k=rt(a,g),k!=null&&v.push(ca(a,k,R)))),a=a.return}v.length!==0&&n.push({event:i,listeners:v})}var Fw=/\r\n?/g,Uw=/\u0000|\uFFFD/g;function Rp(n){return(typeof n=="string"?n:""+n).replace(Fw,`
`).replace(Uw,"")}function Ul(n,i,a){if(i=Rp(i),Rp(n)!==i&&a)throw Error(t(425))}function jl(){}var th=null,nh=null;function rh(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ih=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,Cp=typeof Promise=="function"?Promise:void 0,zw=typeof queueMicrotask=="function"?queueMicrotask:typeof Cp<"u"?function(n){return Cp.resolve(null).then(n).catch(Bw)}:ih;function Bw(n){setTimeout(function(){throw n})}function sh(n,i){var a=i,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Pn(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Pn(i)}function Gr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Ap(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var Hs=Math.random().toString(36).slice(2),Qn="__reactFiber$"+Hs,ha="__reactProps$"+Hs,gr="__reactContainer$"+Hs,oh="__reactEvents$"+Hs,$w="__reactListeners$"+Hs,Hw="__reactHandles$"+Hs;function Hi(n){var i=n[Qn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[gr]||a[Qn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Ap(n);n!==null;){if(a=n[Qn])return a;n=Ap(n)}return i}n=a,a=n.parentNode}return null}function da(n){return n=n[Qn]||n[gr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ws(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function zl(n){return n[ha]||null}var ah=[],qs=-1;function Qr(n){return{current:n}}function Ke(n){0>qs||(n.current=ah[qs],ah[qs]=null,qs--)}function We(n,i){qs++,ah[qs]=n.current,n.current=i}var Yr={},Dt=Qr(Yr),Kt=Qr(!1),Wi=Yr;function Ks(n,i){var a=n.type.contextTypes;if(!a)return Yr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function Gt(n){return n=n.childContextTypes,n!=null}function Bl(){Ke(Kt),Ke(Dt)}function kp(n,i,a){if(Dt.current!==Yr)throw Error(t(168));We(Dt,i),We(Kt,a)}function Pp(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(t(108,Me(n)||"Unknown",f));return se({},a,c)}function $l(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Yr,Wi=Dt.current,We(Dt,n),We(Kt,Kt.current),!0}function xp(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Pp(n,i,Wi),c.__reactInternalMemoizedMergedChildContext=n,Ke(Kt),Ke(Dt),We(Dt,n)):Ke(Kt),We(Kt,a)}var yr=null,Hl=!1,lh=!1;function Np(n){yr===null?yr=[n]:yr.push(n)}function Ww(n){Hl=!0,Np(n)}function Xr(){if(!lh&&yr!==null){lh=!0;var n=0,i=xe;try{var a=yr;for(xe=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}yr=null,Hl=!1}catch(f){throw yr!==null&&(yr=yr.slice(n+1)),Cs(Vi,Xr),f}finally{xe=i,lh=!1}}return null}var Gs=[],Qs=0,Wl=null,ql=0,pn=[],mn=0,qi=null,_r=1,vr="";function Ki(n,i){Gs[Qs++]=ql,Gs[Qs++]=Wl,Wl=n,ql=i}function Dp(n,i,a){pn[mn++]=_r,pn[mn++]=vr,pn[mn++]=qi,qi=n;var c=_r;n=vr;var f=32-zt(c)-1;c&=~(1<<f),a+=1;var g=32-zt(i)+f;if(30<g){var v=f-f%5;g=(c&(1<<v)-1).toString(32),c>>=v,f-=v,_r=1<<32-zt(i)+f|a<<f|c,vr=g+n}else _r=1<<g|a<<f|c,vr=n}function uh(n){n.return!==null&&(Ki(n,1),Dp(n,1,0))}function ch(n){for(;n===Wl;)Wl=Gs[--Qs],Gs[Qs]=null,ql=Gs[--Qs],Gs[Qs]=null;for(;n===qi;)qi=pn[--mn],pn[mn]=null,vr=pn[--mn],pn[mn]=null,_r=pn[--mn],pn[mn]=null}var on=null,an=null,Qe=!1,Dn=null;function bp(n,i){var a=vn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function Op(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,on=n,an=Gr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,on=n,an=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=qi!==null?{id:_r,overflow:vr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=vn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,on=n,an=null,!0):!1;default:return!1}}function hh(n){return(n.mode&1)!==0&&(n.flags&128)===0}function dh(n){if(Qe){var i=an;if(i){var a=i;if(!Op(n,i)){if(hh(n))throw Error(t(418));i=Gr(a.nextSibling);var c=on;i&&Op(n,i)?bp(c,a):(n.flags=n.flags&-4097|2,Qe=!1,on=n)}}else{if(hh(n))throw Error(t(418));n.flags=n.flags&-4097|2,Qe=!1,on=n}}}function Lp(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;on=n}function Kl(n){if(n!==on)return!1;if(!Qe)return Lp(n),Qe=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!rh(n.type,n.memoizedProps)),i&&(i=an)){if(hh(n))throw Vp(),Error(t(418));for(;i;)bp(n,i),i=Gr(i.nextSibling)}if(Lp(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){an=Gr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}an=null}}else an=on?Gr(n.stateNode.nextSibling):null;return!0}function Vp(){for(var n=an;n;)n=Gr(n.nextSibling)}function Ys(){an=on=null,Qe=!1}function fh(n){Dn===null?Dn=[n]:Dn.push(n)}var qw=ce.ReactCurrentBatchConfig;function fa(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,g=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(v){var R=f.refs;v===null?delete R[g]:R[g]=v},i._stringRef=g,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Gl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function Mp(n){var i=n._init;return i(n._payload)}function Fp(n){function i(j,D){if(n){var z=j.deletions;z===null?(j.deletions=[D],j.flags|=16):z.push(D)}}function a(j,D){if(!n)return null;for(;D!==null;)i(j,D),D=D.sibling;return null}function c(j,D){for(j=new Map;D!==null;)D.key!==null?j.set(D.key,D):j.set(D.index,D),D=D.sibling;return j}function f(j,D){return j=si(j,D),j.index=0,j.sibling=null,j}function g(j,D,z){return j.index=z,n?(z=j.alternate,z!==null?(z=z.index,z<D?(j.flags|=2,D):z):(j.flags|=2,D)):(j.flags|=1048576,D)}function v(j){return n&&j.alternate===null&&(j.flags|=2),j}function R(j,D,z,ee){return D===null||D.tag!==6?(D=id(z,j.mode,ee),D.return=j,D):(D=f(D,z),D.return=j,D)}function k(j,D,z,ee){var he=z.type;return he===N?X(j,D,z.props.children,ee,z.key):D!==null&&(D.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Nt&&Mp(he)===D.type)?(ee=f(D,z.props),ee.ref=fa(j,D,z),ee.return=j,ee):(ee=_u(z.type,z.key,z.props,null,j.mode,ee),ee.ref=fa(j,D,z),ee.return=j,ee)}function B(j,D,z,ee){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=sd(z,j.mode,ee),D.return=j,D):(D=f(D,z.children||[]),D.return=j,D)}function X(j,D,z,ee,he){return D===null||D.tag!==7?(D=ts(z,j.mode,ee,he),D.return=j,D):(D=f(D,z),D.return=j,D)}function Z(j,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=id(""+D,j.mode,z),D.return=j,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Se:return z=_u(D.type,D.key,D.props,null,j.mode,z),z.ref=fa(j,null,D),z.return=j,z;case Te:return D=sd(D,j.mode,z),D.return=j,D;case Nt:var ee=D._init;return Z(j,ee(D._payload),z)}if(ar(D)||pe(D))return D=ts(D,j.mode,z,null),D.return=j,D;Gl(j,D)}return null}function Y(j,D,z,ee){var he=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return he!==null?null:R(j,D,""+z,ee);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case Se:return z.key===he?k(j,D,z,ee):null;case Te:return z.key===he?B(j,D,z,ee):null;case Nt:return he=z._init,Y(j,D,he(z._payload),ee)}if(ar(z)||pe(z))return he!==null?null:X(j,D,z,ee,null);Gl(j,z)}return null}function ie(j,D,z,ee,he){if(typeof ee=="string"&&ee!==""||typeof ee=="number")return j=j.get(z)||null,R(D,j,""+ee,he);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case Se:return j=j.get(ee.key===null?z:ee.key)||null,k(D,j,ee,he);case Te:return j=j.get(ee.key===null?z:ee.key)||null,B(D,j,ee,he);case Nt:var me=ee._init;return ie(j,D,z,me(ee._payload),he)}if(ar(ee)||pe(ee))return j=j.get(z)||null,X(D,j,ee,he,null);Gl(D,ee)}return null}function le(j,D,z,ee){for(var he=null,me=null,ge=D,ve=D=0,Et=null;ge!==null&&ve<z.length;ve++){ge.index>ve?(Et=ge,ge=null):Et=ge.sibling;var Ve=Y(j,ge,z[ve],ee);if(Ve===null){ge===null&&(ge=Et);break}n&&ge&&Ve.alternate===null&&i(j,ge),D=g(Ve,D,ve),me===null?he=Ve:me.sibling=Ve,me=Ve,ge=Et}if(ve===z.length)return a(j,ge),Qe&&Ki(j,ve),he;if(ge===null){for(;ve<z.length;ve++)ge=Z(j,z[ve],ee),ge!==null&&(D=g(ge,D,ve),me===null?he=ge:me.sibling=ge,me=ge);return Qe&&Ki(j,ve),he}for(ge=c(j,ge);ve<z.length;ve++)Et=ie(ge,j,ve,z[ve],ee),Et!==null&&(n&&Et.alternate!==null&&ge.delete(Et.key===null?ve:Et.key),D=g(Et,D,ve),me===null?he=Et:me.sibling=Et,me=Et);return n&&ge.forEach(function(oi){return i(j,oi)}),Qe&&Ki(j,ve),he}function ue(j,D,z,ee){var he=pe(z);if(typeof he!="function")throw Error(t(150));if(z=he.call(z),z==null)throw Error(t(151));for(var me=he=null,ge=D,ve=D=0,Et=null,Ve=z.next();ge!==null&&!Ve.done;ve++,Ve=z.next()){ge.index>ve?(Et=ge,ge=null):Et=ge.sibling;var oi=Y(j,ge,Ve.value,ee);if(oi===null){ge===null&&(ge=Et);break}n&&ge&&oi.alternate===null&&i(j,ge),D=g(oi,D,ve),me===null?he=oi:me.sibling=oi,me=oi,ge=Et}if(Ve.done)return a(j,ge),Qe&&Ki(j,ve),he;if(ge===null){for(;!Ve.done;ve++,Ve=z.next())Ve=Z(j,Ve.value,ee),Ve!==null&&(D=g(Ve,D,ve),me===null?he=Ve:me.sibling=Ve,me=Ve);return Qe&&Ki(j,ve),he}for(ge=c(j,ge);!Ve.done;ve++,Ve=z.next())Ve=ie(ge,j,ve,Ve.value,ee),Ve!==null&&(n&&Ve.alternate!==null&&ge.delete(Ve.key===null?ve:Ve.key),D=g(Ve,D,ve),me===null?he=Ve:me.sibling=Ve,me=Ve);return n&&ge.forEach(function(SE){return i(j,SE)}),Qe&&Ki(j,ve),he}function it(j,D,z,ee){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case Se:e:{for(var he=z.key,me=D;me!==null;){if(me.key===he){if(he=z.type,he===N){if(me.tag===7){a(j,me.sibling),D=f(me,z.props.children),D.return=j,j=D;break e}}else if(me.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===Nt&&Mp(he)===me.type){a(j,me.sibling),D=f(me,z.props),D.ref=fa(j,me,z),D.return=j,j=D;break e}a(j,me);break}else i(j,me);me=me.sibling}z.type===N?(D=ts(z.props.children,j.mode,ee,z.key),D.return=j,j=D):(ee=_u(z.type,z.key,z.props,null,j.mode,ee),ee.ref=fa(j,D,z),ee.return=j,j=ee)}return v(j);case Te:e:{for(me=z.key;D!==null;){if(D.key===me)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){a(j,D.sibling),D=f(D,z.children||[]),D.return=j,j=D;break e}else{a(j,D);break}else i(j,D);D=D.sibling}D=sd(z,j.mode,ee),D.return=j,j=D}return v(j);case Nt:return me=z._init,it(j,D,me(z._payload),ee)}if(ar(z))return le(j,D,z,ee);if(pe(z))return ue(j,D,z,ee);Gl(j,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(a(j,D.sibling),D=f(D,z),D.return=j,j=D):(a(j,D),D=id(z,j.mode,ee),D.return=j,j=D),v(j)):a(j,D)}return it}var Xs=Fp(!0),Up=Fp(!1),Ql=Qr(null),Yl=null,Js=null,ph=null;function mh(){ph=Js=Yl=null}function gh(n){var i=Ql.current;Ke(Ql),n._currentValue=i}function yh(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function Zs(n,i){Yl=n,ph=Js=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&i&&(Qt=!0),n.firstContext=null)}function gn(n){var i=n._currentValue;if(ph!==n)if(n={context:n,memoizedValue:i,next:null},Js===null){if(Yl===null)throw Error(t(308));Js=n,Yl.dependencies={lanes:0,firstContext:n}}else Js=Js.next=n;return i}var Gi=null;function _h(n){Gi===null?Gi=[n]:Gi.push(n)}function jp(n,i,a,c){var f=i.interleaved;return f===null?(a.next=a,_h(i)):(a.next=f.next,f.next=a),i.interleaved=a,wr(n,c)}function wr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Jr=!1;function vh(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Er(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function Zr(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,Le&2){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,wr(n,a)}return f=c.interleaved,f===null?(i.next=i,_h(c)):(i.next=f.next,f.next=i),c.interleaved=i,wr(n,a)}function Xl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Br(n,a)}}function Bp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var v={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=v:g=g.next=v,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Jl(n,i,a,c){var f=n.updateQueue;Jr=!1;var g=f.firstBaseUpdate,v=f.lastBaseUpdate,R=f.shared.pending;if(R!==null){f.shared.pending=null;var k=R,B=k.next;k.next=null,v===null?g=B:v.next=B,v=k;var X=n.alternate;X!==null&&(X=X.updateQueue,R=X.lastBaseUpdate,R!==v&&(R===null?X.firstBaseUpdate=B:R.next=B,X.lastBaseUpdate=k))}if(g!==null){var Z=f.baseState;v=0,X=B=k=null,R=g;do{var Y=R.lane,ie=R.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:ie,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var le=n,ue=R;switch(Y=i,ie=a,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){Z=le.call(ie,Z,Y);break e}Z=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,Y=typeof le=="function"?le.call(ie,Z,Y):le,Y==null)break e;Z=se({},Z,Y);break e;case 2:Jr=!0}}R.callback!==null&&R.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[R]:Y.push(R))}else ie={eventTime:ie,lane:Y,tag:R.tag,payload:R.payload,callback:R.callback,next:null},X===null?(B=X=ie,k=Z):X=X.next=ie,v|=Y;if(R=R.next,R===null){if(R=f.shared.pending,R===null)break;Y=R,R=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(k=Z),f.baseState=k,f.firstBaseUpdate=B,f.lastBaseUpdate=X,i=f.shared.interleaved,i!==null){f=i;do v|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);Xi|=v,n.lanes=v,n.memoizedState=Z}}function $p(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var pa={},Yn=Qr(pa),ma=Qr(pa),ga=Qr(pa);function Qi(n){if(n===pa)throw Error(t(174));return n}function wh(n,i){switch(We(ga,i),We(ma,n),We(Yn,pa),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ct(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=ct(i,n)}Ke(Yn),We(Yn,i)}function eo(){Ke(Yn),Ke(ma),Ke(ga)}function Hp(n){Qi(ga.current);var i=Qi(Yn.current),a=ct(i,n.type);i!==a&&(We(ma,n),We(Yn,a))}function Eh(n){ma.current===n&&(Ke(Yn),Ke(ma))}var Je=Qr(0);function Zl(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Th=[];function Ih(){for(var n=0;n<Th.length;n++)Th[n]._workInProgressVersionPrimary=null;Th.length=0}var eu=ce.ReactCurrentDispatcher,Sh=ce.ReactCurrentBatchConfig,Yi=0,Ze=null,dt=null,vt=null,tu=!1,ya=!1,_a=0,Kw=0;function bt(){throw Error(t(321))}function Rh(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!Nn(n[a],i[a]))return!1;return!0}function Ch(n,i,a,c,f,g){if(Yi=g,Ze=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,eu.current=n===null||n.memoizedState===null?Xw:Jw,n=a(c,f),ya){g=0;do{if(ya=!1,_a=0,25<=g)throw Error(t(301));g+=1,vt=dt=null,i.updateQueue=null,eu.current=Zw,n=a(c,f)}while(ya)}if(eu.current=iu,i=dt!==null&&dt.next!==null,Yi=0,vt=dt=Ze=null,tu=!1,i)throw Error(t(300));return n}function Ah(){var n=_a!==0;return _a=0,n}function Xn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=n:vt=vt.next=n,vt}function yn(){if(dt===null){var n=Ze.alternate;n=n!==null?n.memoizedState:null}else n=dt.next;var i=vt===null?Ze.memoizedState:vt.next;if(i!==null)vt=i,dt=n;else{if(n===null)throw Error(t(310));dt=n,n={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?Ze.memoizedState=vt=n:vt=vt.next=n}return vt}function va(n,i){return typeof i=="function"?i(n):i}function kh(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=dt,f=c.baseQueue,g=a.pending;if(g!==null){if(f!==null){var v=f.next;f.next=g.next,g.next=v}c.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,c=c.baseState;var R=v=null,k=null,B=g;do{var X=B.lane;if((Yi&X)===X)k!==null&&(k=k.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var Z={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};k===null?(R=k=Z,v=c):k=k.next=Z,Ze.lanes|=X,Xi|=X}B=B.next}while(B!==null&&B!==g);k===null?v=c:k.next=R,Nn(c,i.memoizedState)||(Qt=!0),i.memoizedState=c,i.baseState=v,i.baseQueue=k,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do g=f.lane,Ze.lanes|=g,Xi|=g,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Ph(n){var i=yn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do g=n(g,v.action),v=v.next;while(v!==f);Nn(g,i.memoizedState)||(Qt=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,c]}function Wp(){}function qp(n,i){var a=Ze,c=yn(),f=i(),g=!Nn(c.memoizedState,f);if(g&&(c.memoizedState=f,Qt=!0),c=c.queue,xh(Qp.bind(null,a,c,n),[n]),c.getSnapshot!==i||g||vt!==null&&vt.memoizedState.tag&1){if(a.flags|=2048,wa(9,Gp.bind(null,a,c,f,i),void 0,null),wt===null)throw Error(t(349));Yi&30||Kp(a,i,f)}return f}function Kp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function Gp(n,i,a,c){i.value=a,i.getSnapshot=c,Yp(i)&&Xp(n)}function Qp(n,i,a){return a(function(){Yp(i)&&Xp(n)})}function Yp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!Nn(n,a)}catch{return!0}}function Xp(n){var i=wr(n,1);i!==null&&Vn(i,n,1,-1)}function Jp(n){var i=Xn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:n},i.queue=n,n=n.dispatch=Yw.bind(null,Ze,n),[i.memoizedState,n]}function wa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=Ze.updateQueue,i===null?(i={lastEffect:null,stores:null},Ze.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Zp(){return yn().memoizedState}function nu(n,i,a,c){var f=Xn();Ze.flags|=n,f.memoizedState=wa(1|i,a,void 0,c===void 0?null:c)}function ru(n,i,a,c){var f=yn();c=c===void 0?null:c;var g=void 0;if(dt!==null){var v=dt.memoizedState;if(g=v.destroy,c!==null&&Rh(c,v.deps)){f.memoizedState=wa(i,a,g,c);return}}Ze.flags|=n,f.memoizedState=wa(1|i,a,g,c)}function em(n,i){return nu(8390656,8,n,i)}function xh(n,i){return ru(2048,8,n,i)}function tm(n,i){return ru(4,2,n,i)}function nm(n,i){return ru(4,4,n,i)}function rm(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function im(n,i,a){return a=a!=null?a.concat([n]):null,ru(4,4,rm.bind(null,i,n),a)}function Nh(){}function sm(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Rh(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function om(n,i){var a=yn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&Rh(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function am(n,i,a){return Yi&21?(Nn(a,i)||(a=Ui(),Ze.lanes|=a,Xi|=a,n.baseState=!0),i):(n.baseState&&(n.baseState=!1,Qt=!0),n.memoizedState=a)}function Gw(n,i){var a=xe;xe=a!==0&&4>a?a:4,n(!0);var c=Sh.transition;Sh.transition={};try{n(!1),i()}finally{xe=a,Sh.transition=c}}function lm(){return yn().memoizedState}function Qw(n,i,a){var c=ri(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},um(n))cm(i,a);else if(a=jp(n,i,a,c),a!==null){var f=Ht();Vn(a,n,c,f),hm(a,i,c)}}function Yw(n,i,a){var c=ri(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(um(n))cm(i,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var v=i.lastRenderedState,R=g(v,a);if(f.hasEagerState=!0,f.eagerState=R,Nn(R,v)){var k=i.interleaved;k===null?(f.next=f,_h(i)):(f.next=k.next,k.next=f),i.interleaved=f;return}}catch{}finally{}a=jp(n,i,f,c),a!==null&&(f=Ht(),Vn(a,n,c,f),hm(a,i,c))}}function um(n){var i=n.alternate;return n===Ze||i!==null&&i===Ze}function cm(n,i){ya=tu=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function hm(n,i,a){if(a&4194240){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Br(n,a)}}var iu={readContext:gn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},Xw={readContext:gn,useCallback:function(n,i){return Xn().memoizedState=[n,i===void 0?null:i],n},useContext:gn,useEffect:em,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,nu(4194308,4,rm.bind(null,i,n),a)},useLayoutEffect:function(n,i){return nu(4194308,4,n,i)},useInsertionEffect:function(n,i){return nu(4,2,n,i)},useMemo:function(n,i){var a=Xn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Xn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=Qw.bind(null,Ze,n),[c.memoizedState,n]},useRef:function(n){var i=Xn();return n={current:n},i.memoizedState=n},useState:Jp,useDebugValue:Nh,useDeferredValue:function(n){return Xn().memoizedState=n},useTransition:function(){var n=Jp(!1),i=n[0];return n=Gw.bind(null,n[1]),Xn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=Ze,f=Xn();if(Qe){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),wt===null)throw Error(t(349));Yi&30||Kp(c,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,em(Qp.bind(null,c,g,n),[n]),c.flags|=2048,wa(9,Gp.bind(null,c,g,a,i),void 0,null),a},useId:function(){var n=Xn(),i=wt.identifierPrefix;if(Qe){var a=vr,c=_r;a=(c&~(1<<32-zt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=_a++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=Kw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Jw={readContext:gn,useCallback:sm,useContext:gn,useEffect:xh,useImperativeHandle:im,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:kh,useRef:Zp,useState:function(){return kh(va)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return am(i,dt.memoizedState,n)},useTransition:function(){var n=kh(va)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Wp,useSyncExternalStore:qp,useId:lm,unstable_isNewReconciler:!1},Zw={readContext:gn,useCallback:sm,useContext:gn,useEffect:xh,useImperativeHandle:im,useInsertionEffect:tm,useLayoutEffect:nm,useMemo:om,useReducer:Ph,useRef:Zp,useState:function(){return Ph(va)},useDebugValue:Nh,useDeferredValue:function(n){var i=yn();return dt===null?i.memoizedState=n:am(i,dt.memoizedState,n)},useTransition:function(){var n=Ph(va)[0],i=yn().memoizedState;return[n,i]},useMutableSource:Wp,useSyncExternalStore:qp,useId:lm,unstable_isNewReconciler:!1};function bn(n,i){if(n&&n.defaultProps){i=se({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Dh(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:se({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var su={isMounted:function(n){return(n=n._reactInternals)?Sn(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Ht(),f=ri(n),g=Er(c,f);g.payload=i,a!=null&&(g.callback=a),i=Zr(n,g,f),i!==null&&(Vn(i,n,f,c),Xl(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Ht(),f=ri(n),g=Er(c,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=Zr(n,g,f),i!==null&&(Vn(i,n,f,c),Xl(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Ht(),c=ri(n),f=Er(a,c);f.tag=2,i!=null&&(f.callback=i),i=Zr(n,f,c),i!==null&&(Vn(i,n,c,a),Xl(i,n,c))}};function dm(n,i,a,c,f,g,v){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,v):i.prototype&&i.prototype.isPureReactComponent?!oa(a,c)||!oa(f,g):!0}function fm(n,i,a){var c=!1,f=Yr,g=i.contextType;return typeof g=="object"&&g!==null?g=gn(g):(f=Gt(i)?Wi:Dt.current,c=i.contextTypes,g=(c=c!=null)?Ks(n,f):Yr),i=new i(a,g),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=su,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=g),i}function pm(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&su.enqueueReplaceState(i,i.state,null)}function bh(n,i,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},vh(n);var g=i.contextType;typeof g=="object"&&g!==null?f.context=gn(g):(g=Gt(i)?Wi:Dt.current,f.context=Ks(n,g)),f.state=n.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Dh(n,i,g,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&su.enqueueReplaceState(f,f.state,null),Jl(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function to(n,i){try{var a="",c=i;do a+=Ce(c),c=c.return;while(c);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:n,source:i,stack:f,digest:null}}function Oh(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Lh(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var eE=typeof WeakMap=="function"?WeakMap:Map;function mm(n,i,a){a=Er(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){du||(du=!0,Yh=c),Lh(n,i)},a}function gm(n,i,a){a=Er(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){Lh(n,i)}}var g=n.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Lh(n,i),typeof c!="function"&&(ti===null?ti=new Set([this]):ti.add(this));var v=i.stack;this.componentDidCatch(i.value,{componentStack:v!==null?v:""})}),a}function ym(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new eE;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),n=pE.bind(null,n,i,a),i.then(n,n))}function _m(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function vm(n,i,a,c,f){return n.mode&1?(n.flags|=65536,n.lanes=f,n):(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Er(-1,1),i.tag=2,Zr(a,i,1))),a.lanes|=1),n)}var tE=ce.ReactCurrentOwner,Qt=!1;function $t(n,i,a,c){i.child=n===null?Up(i,null,a,c):Xs(i,n.child,a,c)}function wm(n,i,a,c,f){a=a.render;var g=i.ref;return Zs(i,f),c=Ch(n,i,a,c,g,f),a=Ah(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Tr(n,i,f)):(Qe&&a&&uh(i),i.flags|=1,$t(n,i,c,f),i.child)}function Em(n,i,a,c,f){if(n===null){var g=a.type;return typeof g=="function"&&!rd(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Tm(n,i,g,c,f)):(n=_u(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(g=n.child,!(n.lanes&f)){var v=g.memoizedProps;if(a=a.compare,a=a!==null?a:oa,a(v,c)&&n.ref===i.ref)return Tr(n,i,f)}return i.flags|=1,n=si(g,c),n.ref=i.ref,n.return=i,i.child=n}function Tm(n,i,a,c,f){if(n!==null){var g=n.memoizedProps;if(oa(g,c)&&n.ref===i.ref)if(Qt=!1,i.pendingProps=c=g,(n.lanes&f)!==0)n.flags&131072&&(Qt=!0);else return i.lanes=n.lanes,Tr(n,i,f)}return Vh(n,i,a,c,f)}function Im(n,i,a){var c=i.pendingProps,f=c.children,g=n!==null?n.memoizedState:null;if(c.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(ro,ln),ln|=a;else{if(!(a&1073741824))return n=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,We(ro,ln),ln|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=g!==null?g.baseLanes:a,We(ro,ln),ln|=c}else g!==null?(c=g.baseLanes|a,i.memoizedState=null):c=a,We(ro,ln),ln|=c;return $t(n,i,f,a),i.child}function Sm(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Vh(n,i,a,c,f){var g=Gt(a)?Wi:Dt.current;return g=Ks(i,g),Zs(i,f),a=Ch(n,i,a,c,g,f),c=Ah(),n!==null&&!Qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Tr(n,i,f)):(Qe&&c&&uh(i),i.flags|=1,$t(n,i,a,f),i.child)}function Rm(n,i,a,c,f){if(Gt(a)){var g=!0;$l(i)}else g=!1;if(Zs(i,f),i.stateNode===null)au(n,i),fm(i,a,c),bh(i,a,c,f),c=!0;else if(n===null){var v=i.stateNode,R=i.memoizedProps;v.props=R;var k=v.context,B=a.contextType;typeof B=="object"&&B!==null?B=gn(B):(B=Gt(a)?Wi:Dt.current,B=Ks(i,B));var X=a.getDerivedStateFromProps,Z=typeof X=="function"||typeof v.getSnapshotBeforeUpdate=="function";Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==c||k!==B)&&pm(i,v,c,B),Jr=!1;var Y=i.memoizedState;v.state=Y,Jl(i,c,v,f),k=i.memoizedState,R!==c||Y!==k||Kt.current||Jr?(typeof X=="function"&&(Dh(i,a,X,c),k=i.memoizedState),(R=Jr||dm(i,a,R,c,Y,k,B))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(i.flags|=4194308)):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=k),v.props=c,v.state=k,v.context=B,c=R):(typeof v.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{v=i.stateNode,zp(n,i),R=i.memoizedProps,B=i.type===i.elementType?R:bn(i.type,R),v.props=B,Z=i.pendingProps,Y=v.context,k=a.contextType,typeof k=="object"&&k!==null?k=gn(k):(k=Gt(a)?Wi:Dt.current,k=Ks(i,k));var ie=a.getDerivedStateFromProps;(X=typeof ie=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(R!==Z||Y!==k)&&pm(i,v,c,k),Jr=!1,Y=i.memoizedState,v.state=Y,Jl(i,c,v,f);var le=i.memoizedState;R!==Z||Y!==le||Kt.current||Jr?(typeof ie=="function"&&(Dh(i,a,ie,c),le=i.memoizedState),(B=Jr||dm(i,a,B,c,Y,le,k)||!1)?(X||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,le,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,le,k)),typeof v.componentDidUpdate=="function"&&(i.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=le),v.props=c,v.state=le,v.context=k,c=B):(typeof v.componentDidUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||R===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return Mh(n,i,a,c,g,f)}function Mh(n,i,a,c,f,g){Sm(n,i);var v=(i.flags&128)!==0;if(!c&&!v)return f&&xp(i,a,!1),Tr(n,i,g);c=i.stateNode,tE.current=i;var R=v&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&v?(i.child=Xs(i,n.child,null,g),i.child=Xs(i,null,R,g)):$t(n,i,R,g),i.memoizedState=c.state,f&&xp(i,a,!0),i.child}function Cm(n){var i=n.stateNode;i.pendingContext?kp(n,i.pendingContext,i.pendingContext!==i.context):i.context&&kp(n,i.context,!1),wh(n,i.containerInfo)}function Am(n,i,a,c,f){return Ys(),fh(f),i.flags|=256,$t(n,i,a,c),i.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Uh(n){return{baseLanes:n,cachePool:null,transitions:null}}function km(n,i,a){var c=i.pendingProps,f=Je.current,g=!1,v=(i.flags&128)!==0,R;if((R=v)||(R=n!==null&&n.memoizedState===null?!1:(f&2)!==0),R?(g=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),We(Je,f&1),n===null)return dh(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(i.mode&1?n.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(v=c.children,n=c.fallback,g?(c=i.mode,g=i.child,v={mode:"hidden",children:v},!(c&1)&&g!==null?(g.childLanes=0,g.pendingProps=v):g=vu(v,c,0,null),n=ts(n,c,a,null),g.return=i,n.return=i,g.sibling=n,i.child=g,i.child.memoizedState=Uh(a),i.memoizedState=Fh,n):jh(i,v));if(f=n.memoizedState,f!==null&&(R=f.dehydrated,R!==null))return nE(n,i,v,c,R,f,a);if(g){g=c.fallback,v=i.mode,f=n.child,R=f.sibling;var k={mode:"hidden",children:c.children};return!(v&1)&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=k,i.deletions=null):(c=si(f,k),c.subtreeFlags=f.subtreeFlags&14680064),R!==null?g=si(R,g):(g=ts(g,v,a,null),g.flags|=2),g.return=i,c.return=i,c.sibling=g,i.child=c,c=g,g=i.child,v=n.child.memoizedState,v=v===null?Uh(a):{baseLanes:v.baseLanes|a,cachePool:null,transitions:v.transitions},g.memoizedState=v,g.childLanes=n.childLanes&~a,i.memoizedState=Fh,c}return g=n.child,n=g.sibling,c=si(g,{mode:"visible",children:c.children}),!(i.mode&1)&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function jh(n,i){return i=vu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function ou(n,i,a,c){return c!==null&&fh(c),Xs(i,n.child,null,a),n=jh(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function nE(n,i,a,c,f,g,v){if(a)return i.flags&256?(i.flags&=-257,c=Oh(Error(t(422))),ou(n,i,v,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(g=c.fallback,f=i.mode,c=vu({mode:"visible",children:c.children},f,0,null),g=ts(g,f,v,null),g.flags|=2,c.return=i,g.return=i,c.sibling=g,i.child=c,i.mode&1&&Xs(i,n.child,null,v),i.child.memoizedState=Uh(v),i.memoizedState=Fh,g);if(!(i.mode&1))return ou(n,i,v,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var R=c.dgst;return c=R,g=Error(t(419)),c=Oh(g,c,void 0),ou(n,i,v,c)}if(R=(v&n.childLanes)!==0,Qt||R){if(c=wt,c!==null){switch(v&-v){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=f&(c.suspendedLanes|v)?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,wr(n,f),Vn(c,n,f,-1))}return nd(),c=Oh(Error(t(421))),ou(n,i,v,c)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=mE.bind(null,n),f._reactRetry=i,null):(n=g.treeContext,an=Gr(f.nextSibling),on=i,Qe=!0,Dn=null,n!==null&&(pn[mn++]=_r,pn[mn++]=vr,pn[mn++]=qi,_r=n.id,vr=n.overflow,qi=i),i=jh(i,c.children),i.flags|=4096,i)}function Pm(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),yh(n.return,i,a)}function zh(n,i,a,c,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function xm(n,i,a){var c=i.pendingProps,f=c.revealOrder,g=c.tail;if($t(n,i,c.children,a),c=Je.current,c&2)c=c&1|2,i.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Pm(n,a,i);else if(n.tag===19)Pm(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(We(Je,c),!(i.mode&1))i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Zl(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),zh(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Zl(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}zh(i,!0,a,null,g);break;case"together":zh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function au(n,i){!(i.mode&1)&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Xi|=i.lanes,!(a&i.childLanes))return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=si(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=si(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function rE(n,i,a){switch(i.tag){case 3:Cm(i),Ys();break;case 5:Hp(i);break;case 1:Gt(i.type)&&$l(i);break;case 4:wh(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;We(Ql,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(We(Je,Je.current&1),i.flags|=128,null):a&i.child.childLanes?km(n,i,a):(We(Je,Je.current&1),n=Tr(n,i,a),n!==null?n.sibling:null);We(Je,Je.current&1);break;case 19:if(c=(a&i.childLanes)!==0,n.flags&128){if(c)return xm(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),We(Je,Je.current),c)break;return null;case 22:case 23:return i.lanes=0,Im(n,i,a)}return Tr(n,i,a)}var Nm,Bh,Dm,bm;Nm=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Bh=function(){},Dm=function(n,i,a,c){var f=n.memoizedProps;if(f!==c){n=i.stateNode,Qi(Yn.current);var g=null;switch(a){case"input":f=ki(n,f),c=ki(n,c),g=[];break;case"select":f=se({},f,{value:void 0}),c=se({},c,{value:void 0}),g=[];break;case"textarea":f=Lo(n,f),c=Lo(n,c),g=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=jl)}zo(a,c);var v;a=null;for(B in f)if(!c.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var R=f[B];for(v in R)R.hasOwnProperty(v)&&(a||(a={}),a[v]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?g||(g=[]):(g=g||[]).push(B,null));for(B in c){var k=c[B];if(R=f!=null?f[B]:void 0,c.hasOwnProperty(B)&&k!==R&&(k!=null||R!=null))if(B==="style")if(R){for(v in R)!R.hasOwnProperty(v)||k&&k.hasOwnProperty(v)||(a||(a={}),a[v]="");for(v in k)k.hasOwnProperty(v)&&R[v]!==k[v]&&(a||(a={}),a[v]=k[v])}else a||(g||(g=[]),g.push(B,a)),a=k;else B==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,R=R?R.__html:void 0,k!=null&&R!==k&&(g=g||[]).push(B,k)):B==="children"?typeof k!="string"&&typeof k!="number"||(g=g||[]).push(B,""+k):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(k!=null&&B==="onScroll"&&qe("scroll",n),g||R===k||(g=[])):(g=g||[]).push(B,k))}a&&(g=g||[]).push("style",a);var B=g;(i.updateQueue=B)&&(i.flags|=4)}},bm=function(n,i,a,c){a!==c&&(i.flags|=4)};function Ea(n,i){if(!Qe)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Ot(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function iE(n,i,a){var c=i.pendingProps;switch(ch(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(i),null;case 1:return Gt(i.type)&&Bl(),Ot(i),null;case 3:return c=i.stateNode,eo(),Ke(Kt),Ke(Dt),Ih(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(Kl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,Dn!==null&&(Zh(Dn),Dn=null))),Bh(n,i),Ot(i),null;case 5:Eh(i);var f=Qi(ga.current);if(a=i.type,n!==null&&i.stateNode!=null)Dm(n,i,a,c,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Ot(i),null}if(n=Qi(Yn.current),Kl(i)){c=i.stateNode,a=i.type;var g=i.memoizedProps;switch(c[Qn]=i,c[ha]=g,n=(i.mode&1)!==0,a){case"dialog":qe("cancel",c),qe("close",c);break;case"iframe":case"object":case"embed":qe("load",c);break;case"video":case"audio":for(f=0;f<la.length;f++)qe(la[f],c);break;case"source":qe("error",c);break;case"img":case"image":case"link":qe("error",c),qe("load",c);break;case"details":qe("toggle",c);break;case"input":ms(c,g),qe("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!g.multiple},qe("invalid",c);break;case"textarea":ys(c,g),qe("invalid",c)}zo(a,g),f=null;for(var v in g)if(g.hasOwnProperty(v)){var R=g[v];v==="children"?typeof R=="string"?c.textContent!==R&&(g.suppressHydrationWarning!==!0&&Ul(c.textContent,R,n),f=["children",R]):typeof R=="number"&&c.textContent!==""+R&&(g.suppressHydrationWarning!==!0&&Ul(c.textContent,R,n),f=["children",""+R]):o.hasOwnProperty(v)&&R!=null&&v==="onScroll"&&qe("scroll",c)}switch(a){case"input":or(c),hl(c,g,!0);break;case"textarea":or(c),Vo(c);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(c.onclick=jl)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{v=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=ut(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=v.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=v.createElement(a,{is:c.is}):(n=v.createElement(a),a==="select"&&(v=n,c.multiple?v.multiple=!0:c.size&&(v.size=c.size))):n=v.createElementNS(n,a),n[Qn]=i,n[ha]=c,Nm(n,i,!1,!1),i.stateNode=n;e:{switch(v=Bo(a,c),a){case"dialog":qe("cancel",n),qe("close",n),f=c;break;case"iframe":case"object":case"embed":qe("load",n),f=c;break;case"video":case"audio":for(f=0;f<la.length;f++)qe(la[f],n);f=c;break;case"source":qe("error",n),f=c;break;case"img":case"image":case"link":qe("error",n),qe("load",n),f=c;break;case"details":qe("toggle",n),f=c;break;case"input":ms(n,c),f=ki(n,c),qe("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=se({},c,{value:void 0}),qe("invalid",n);break;case"textarea":ys(n,c),f=Lo(n,c),qe("invalid",n);break;default:f=c}zo(a,f),R=f;for(g in R)if(R.hasOwnProperty(g)){var k=R[g];g==="style"?Uo(n,k):g==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&Mo(n,k)):g==="children"?typeof k=="string"?(a!=="textarea"||k!=="")&&Mr(n,k):typeof k=="number"&&Mr(n,""+k):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?k!=null&&g==="onScroll"&&qe("scroll",n):k!=null&&ne(n,g,k,v))}switch(a){case"input":or(n),hl(n,c,!1);break;case"textarea":or(n),Vo(n);break;case"option":c.value!=null&&n.setAttribute("value",""+Fe(c.value));break;case"select":n.multiple=!!c.multiple,g=c.value,g!=null?lr(n,!!c.multiple,g,!1):c.defaultValue!=null&&lr(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=jl)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ot(i),null;case 6:if(n&&i.stateNode!=null)bm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=Qi(ga.current),Qi(Yn.current),Kl(i)){if(c=i.stateNode,a=i.memoizedProps,c[Qn]=i,(g=c.nodeValue!==a)&&(n=on,n!==null))switch(n.tag){case 3:Ul(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Ul(c.nodeValue,a,(n.mode&1)!==0)}g&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Qn]=i,i.stateNode=c}return Ot(i),null;case 13:if(Ke(Je),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Qe&&an!==null&&i.mode&1&&!(i.flags&128))Vp(),Ys(),i.flags|=98560,g=!1;else if(g=Kl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Qn]=i}else Ys(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;Ot(i),g=!1}else Dn!==null&&(Zh(Dn),Dn=null),g=!0;if(!g)return i.flags&65536?i:null}return i.flags&128?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,i.mode&1&&(n===null||Je.current&1?ft===0&&(ft=3):nd())),i.updateQueue!==null&&(i.flags|=4),Ot(i),null);case 4:return eo(),Bh(n,i),n===null&&ua(i.stateNode.containerInfo),Ot(i),null;case 10:return gh(i.type._context),Ot(i),null;case 17:return Gt(i.type)&&Bl(),Ot(i),null;case 19:if(Ke(Je),g=i.memoizedState,g===null)return Ot(i),null;if(c=(i.flags&128)!==0,v=g.rendering,v===null)if(c)Ea(g,!1);else{if(ft!==0||n!==null&&n.flags&128)for(n=i.child;n!==null;){if(v=Zl(n),v!==null){for(i.flags|=128,Ea(g,!1),c=v.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)g=a,n=c,g.flags&=14680066,v=g.alternate,v===null?(g.childLanes=0,g.lanes=n,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=v.childLanes,g.lanes=v.lanes,g.child=v.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=v.memoizedProps,g.memoizedState=v.memoizedState,g.updateQueue=v.updateQueue,g.type=v.type,n=v.dependencies,g.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return We(Je,Je.current&1|2),i.child}n=n.sibling}g.tail!==null&&He()>io&&(i.flags|=128,c=!0,Ea(g,!1),i.lanes=4194304)}else{if(!c)if(n=Zl(v),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ea(g,!0),g.tail===null&&g.tailMode==="hidden"&&!v.alternate&&!Qe)return Ot(i),null}else 2*He()-g.renderingStartTime>io&&a!==1073741824&&(i.flags|=128,c=!0,Ea(g,!1),i.lanes=4194304);g.isBackwards?(v.sibling=i.child,i.child=v):(a=g.last,a!==null?a.sibling=v:i.child=v,g.last=v)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=He(),i.sibling=null,a=Je.current,We(Je,c?a&1|2:a&1),i):(Ot(i),null);case 22:case 23:return td(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&i.mode&1?ln&1073741824&&(Ot(i),i.subtreeFlags&6&&(i.flags|=8192)):Ot(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function sE(n,i){switch(ch(i),i.tag){case 1:return Gt(i.type)&&Bl(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return eo(),Ke(Kt),Ke(Dt),Ih(),n=i.flags,n&65536&&!(n&128)?(i.flags=n&-65537|128,i):null;case 5:return Eh(i),null;case 13:if(Ke(Je),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Ys()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Ke(Je),null;case 4:return eo(),null;case 10:return gh(i.type._context),null;case 22:case 23:return td(),null;case 24:return null;default:return null}}var lu=!1,Lt=!1,oE=typeof WeakSet=="function"?WeakSet:Set,ae=null;function no(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){tt(n,i,c)}else a.current=null}function $h(n,i,a){try{a()}catch(c){tt(n,i,c)}}var Om=!1;function aE(n,i){if(th=Wr,n=dp(),Kc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var v=0,R=-1,k=-1,B=0,X=0,Z=n,Y=null;t:for(;;){for(var ie;Z!==a||f!==0&&Z.nodeType!==3||(R=v+f),Z!==g||c!==0&&Z.nodeType!==3||(k=v+c),Z.nodeType===3&&(v+=Z.nodeValue.length),(ie=Z.firstChild)!==null;)Y=Z,Z=ie;for(;;){if(Z===n)break t;if(Y===a&&++B===f&&(R=v),Y===g&&++X===c&&(k=v),(ie=Z.nextSibling)!==null)break;Z=Y,Y=Z.parentNode}Z=ie}a=R===-1||k===-1?null:{start:R,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(nh={focusedElem:n,selectionRange:a},Wr=!1,ae=i;ae!==null;)if(i=ae,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,ae=n;else for(;ae!==null;){i=ae;try{var le=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,it=le.memoizedState,j=i.stateNode,D=j.getSnapshotBeforeUpdate(i.elementType===i.type?ue:bn(i.type,ue),it);j.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ee){tt(i,i.return,ee)}if(n=i.sibling,n!==null){n.return=i.return,ae=n;break}ae=i.return}return le=Om,Om=!1,le}function Ta(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var g=f.destroy;f.destroy=void 0,g!==void 0&&$h(i,a,g)}f=f.next}while(f!==c)}}function uu(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function Hh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function Lm(n){var i=n.alternate;i!==null&&(n.alternate=null,Lm(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Qn],delete i[ha],delete i[oh],delete i[$w],delete i[Hw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Vm(n){return n.tag===5||n.tag===3||n.tag===4}function Mm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Vm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Wh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=jl));else if(c!==4&&(n=n.child,n!==null))for(Wh(n,i,a),n=n.sibling;n!==null;)Wh(n,i,a),n=n.sibling}function qh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(qh(n,i,a),n=n.sibling;n!==null;)qh(n,i,a),n=n.sibling}var Rt=null,On=!1;function ei(n,i,a){for(a=a.child;a!==null;)Fm(n,i,a),a=a.sibling}function Fm(n,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(Mi,a)}catch{}switch(a.tag){case 5:Lt||no(a,i);case 6:var c=Rt,f=On;Rt=null,ei(n,i,a),Rt=c,On=f,Rt!==null&&(On?(n=Rt,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Rt.removeChild(a.stateNode));break;case 18:Rt!==null&&(On?(n=Rt,a=a.stateNode,n.nodeType===8?sh(n.parentNode,a):n.nodeType===1&&sh(n,a),Pn(n)):sh(Rt,a.stateNode));break;case 4:c=Rt,f=On,Rt=a.stateNode.containerInfo,On=!0,ei(n,i,a),Rt=c,On=f;break;case 0:case 11:case 14:case 15:if(!Lt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var g=f,v=g.destroy;g=g.tag,v!==void 0&&(g&2||g&4)&&$h(a,i,v),f=f.next}while(f!==c)}ei(n,i,a);break;case 1:if(!Lt&&(no(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(R){tt(a,i,R)}ei(n,i,a);break;case 21:ei(n,i,a);break;case 22:a.mode&1?(Lt=(c=Lt)||a.memoizedState!==null,ei(n,i,a),Lt=c):ei(n,i,a);break;default:ei(n,i,a)}}function Um(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new oE),i.forEach(function(c){var f=gE.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Ln(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var g=n,v=i,R=v;e:for(;R!==null;){switch(R.tag){case 5:Rt=R.stateNode,On=!1;break e;case 3:Rt=R.stateNode.containerInfo,On=!0;break e;case 4:Rt=R.stateNode.containerInfo,On=!0;break e}R=R.return}if(Rt===null)throw Error(t(160));Fm(g,v,f),Rt=null,On=!1;var k=f.alternate;k!==null&&(k.return=null),f.return=null}catch(B){tt(f,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)jm(i,n),i=i.sibling}function jm(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ln(i,n),Jn(n),c&4){try{Ta(3,n,n.return),uu(3,n)}catch(ue){tt(n,n.return,ue)}try{Ta(5,n,n.return)}catch(ue){tt(n,n.return,ue)}}break;case 1:Ln(i,n),Jn(n),c&512&&a!==null&&no(a,a.return);break;case 5:if(Ln(i,n),Jn(n),c&512&&a!==null&&no(a,a.return),n.flags&32){var f=n.stateNode;try{Mr(f,"")}catch(ue){tt(n,n.return,ue)}}if(c&4&&(f=n.stateNode,f!=null)){var g=n.memoizedProps,v=a!==null?a.memoizedProps:g,R=n.type,k=n.updateQueue;if(n.updateQueue=null,k!==null)try{R==="input"&&g.type==="radio"&&g.name!=null&&bo(f,g),Bo(R,v);var B=Bo(R,g);for(v=0;v<k.length;v+=2){var X=k[v],Z=k[v+1];X==="style"?Uo(f,Z):X==="dangerouslySetInnerHTML"?Mo(f,Z):X==="children"?Mr(f,Z):ne(f,X,Z,B)}switch(R){case"input":Oo(f,g);break;case"textarea":_s(f,g);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ie=g.value;ie!=null?lr(f,!!g.multiple,ie,!1):Y!==!!g.multiple&&(g.defaultValue!=null?lr(f,!!g.multiple,g.defaultValue,!0):lr(f,!!g.multiple,g.multiple?[]:"",!1))}f[ha]=g}catch(ue){tt(n,n.return,ue)}}break;case 6:if(Ln(i,n),Jn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,g=n.memoizedProps;try{f.nodeValue=g}catch(ue){tt(n,n.return,ue)}}break;case 3:if(Ln(i,n),Jn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Pn(i.containerInfo)}catch(ue){tt(n,n.return,ue)}break;case 4:Ln(i,n),Jn(n);break;case 13:Ln(i,n),Jn(n),f=n.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||(Qh=He())),c&4&&Um(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(Lt=(B=Lt)||X,Ln(i,n),Lt=B):Ln(i,n),Jn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&n.mode&1)for(ae=n,X=n.child;X!==null;){for(Z=ae=X;ae!==null;){switch(Y=ae,ie=Y.child,Y.tag){case 0:case 11:case 14:case 15:Ta(4,Y,Y.return);break;case 1:no(Y,Y.return);var le=Y.stateNode;if(typeof le.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,le.props=i.memoizedProps,le.state=i.memoizedState,le.componentWillUnmount()}catch(ue){tt(c,a,ue)}}break;case 5:no(Y,Y.return);break;case 22:if(Y.memoizedState!==null){$m(Z);continue}}ie!==null?(ie.return=Y,ae=ie):$m(Z)}X=X.sibling}e:for(X=null,Z=n;;){if(Z.tag===5){if(X===null){X=Z;try{f=Z.stateNode,B?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(R=Z.stateNode,k=Z.memoizedProps.style,v=k!=null&&k.hasOwnProperty("display")?k.display:null,R.style.display=Fo("display",v))}catch(ue){tt(n,n.return,ue)}}}else if(Z.tag===6){if(X===null)try{Z.stateNode.nodeValue=B?"":Z.memoizedProps}catch(ue){tt(n,n.return,ue)}}else if((Z.tag!==22&&Z.tag!==23||Z.memoizedState===null||Z===n)&&Z.child!==null){Z.child.return=Z,Z=Z.child;continue}if(Z===n)break e;for(;Z.sibling===null;){if(Z.return===null||Z.return===n)break e;X===Z&&(X=null),Z=Z.return}X===Z&&(X=null),Z.sibling.return=Z.return,Z=Z.sibling}}break;case 19:Ln(i,n),Jn(n),c&4&&Um(n);break;case 21:break;default:Ln(i,n),Jn(n)}}function Jn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(Vm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Mr(f,""),c.flags&=-33);var g=Mm(n);qh(n,g,f);break;case 3:case 4:var v=c.stateNode.containerInfo,R=Mm(n);Wh(n,R,v);break;default:throw Error(t(161))}}catch(k){tt(n,n.return,k)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function lE(n,i,a){ae=n,zm(n)}function zm(n,i,a){for(var c=(n.mode&1)!==0;ae!==null;){var f=ae,g=f.child;if(f.tag===22&&c){var v=f.memoizedState!==null||lu;if(!v){var R=f.alternate,k=R!==null&&R.memoizedState!==null||Lt;R=lu;var B=Lt;if(lu=v,(Lt=k)&&!B)for(ae=f;ae!==null;)v=ae,k=v.child,v.tag===22&&v.memoizedState!==null?Hm(f):k!==null?(k.return=v,ae=k):Hm(f);for(;g!==null;)ae=g,zm(g),g=g.sibling;ae=f,lu=R,Lt=B}Bm(n)}else f.subtreeFlags&8772&&g!==null?(g.return=f,ae=g):Bm(n)}}function Bm(n){for(;ae!==null;){var i=ae;if(i.flags&8772){var a=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:Lt||uu(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!Lt)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:bn(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&$p(i,g,c);break;case 3:var v=i.updateQueue;if(v!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}$p(i,v,a)}break;case 5:var R=i.stateNode;if(a===null&&i.flags&4){a=R;var k=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&a.focus();break;case"img":k.src&&(a.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var Z=X.dehydrated;Z!==null&&Pn(Z)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||i.flags&512&&Hh(i)}catch(Y){tt(i,i.return,Y)}}if(i===n){ae=null;break}if(a=i.sibling,a!==null){a.return=i.return,ae=a;break}ae=i.return}}function $m(n){for(;ae!==null;){var i=ae;if(i===n){ae=null;break}var a=i.sibling;if(a!==null){a.return=i.return,ae=a;break}ae=i.return}}function Hm(n){for(;ae!==null;){var i=ae;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{uu(4,i)}catch(k){tt(i,a,k)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(k){tt(i,f,k)}}var g=i.return;try{Hh(i)}catch(k){tt(i,g,k)}break;case 5:var v=i.return;try{Hh(i)}catch(k){tt(i,v,k)}}}catch(k){tt(i,i.return,k)}if(i===n){ae=null;break}var R=i.sibling;if(R!==null){R.return=i.return,ae=R;break}ae=i.return}}var uE=Math.ceil,cu=ce.ReactCurrentDispatcher,Kh=ce.ReactCurrentOwner,_n=ce.ReactCurrentBatchConfig,Le=0,wt=null,at=null,Ct=0,ln=0,ro=Qr(0),ft=0,Ia=null,Xi=0,hu=0,Gh=0,Sa=null,Yt=null,Qh=0,io=1/0,Ir=null,du=!1,Yh=null,ti=null,fu=!1,ni=null,pu=0,Ra=0,Xh=null,mu=-1,gu=0;function Ht(){return Le&6?He():mu!==-1?mu:mu=He()}function ri(n){return n.mode&1?Le&2&&Ct!==0?Ct&-Ct:qw.transition!==null?(gu===0&&(gu=Ui()),gu):(n=xe,n!==0||(n=window.event,n=n===void 0?16:Zo(n.type)),n):1}function Vn(n,i,a,c){if(50<Ra)throw Ra=0,Xh=null,Error(t(185));zr(n,a,c),(!(Le&2)||n!==wt)&&(n===wt&&(!(Le&2)&&(hu|=a),ft===4&&ii(n,Ct)),Xt(n,c),a===1&&Le===0&&!(i.mode&1)&&(io=He()+500,Hl&&Xr()))}function Xt(n,i){var a=n.callbackNode;hr(n,i);var c=Fi(n,n===wt?Ct:0);if(c===0)a!==null&&Go(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&Go(a),i===1)n.tag===0?Ww(qm.bind(null,n)):Np(qm.bind(null,n)),zw(function(){!(Le&6)&&Xr()}),a=null;else{switch($r(c)){case 1:a=Vi;break;case 4:a=Fr;break;case 16:a=hn;break;case 536870912:a=gl;break;default:a=hn}a=eg(a,Wm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function Wm(n,i){if(mu=-1,gu=0,Le&6)throw Error(t(327));var a=n.callbackNode;if(so()&&n.callbackNode!==a)return null;var c=Fi(n,n===wt?Ct:0);if(c===0)return null;if(c&30||c&n.expiredLanes||i)i=yu(n,c);else{i=c;var f=Le;Le|=2;var g=Gm();(wt!==n||Ct!==i)&&(Ir=null,io=He()+500,Zi(n,i));do try{dE();break}catch(R){Km(n,R)}while(!0);mh(),cu.current=g,Le=f,at!==null?i=0:(wt=null,Ct=0,i=ft)}if(i!==0){if(i===2&&(f=nn(n),f!==0&&(c=f,i=Jh(n,f))),i===1)throw a=Ia,Zi(n,0),ii(n,c),Xt(n,He()),a;if(i===6)ii(n,c);else{if(f=n.current.alternate,!(c&30)&&!cE(f)&&(i=yu(n,c),i===2&&(g=nn(n),g!==0&&(c=g,i=Jh(n,g))),i===1))throw a=Ia,Zi(n,0),ii(n,c),Xt(n,He()),a;switch(n.finishedWork=f,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:es(n,Yt,Ir);break;case 3:if(ii(n,c),(c&130023424)===c&&(i=Qh+500-He(),10<i)){if(Fi(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Ht(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=ih(es.bind(null,n,Yt,Ir),i);break}es(n,Yt,Ir);break;case 4:if(ii(n,c),(c&4194240)===c)break;for(i=n.eventTimes,f=-1;0<c;){var v=31-zt(c);g=1<<v,v=i[v],v>f&&(f=v),c&=~g}if(c=f,c=He()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*uE(c/1960))-c,10<c){n.timeoutHandle=ih(es.bind(null,n,Yt,Ir),c);break}es(n,Yt,Ir);break;case 5:es(n,Yt,Ir);break;default:throw Error(t(329))}}}return Xt(n,He()),n.callbackNode===a?Wm.bind(null,n):null}function Jh(n,i){var a=Sa;return n.current.memoizedState.isDehydrated&&(Zi(n,i).flags|=256),n=yu(n,i),n!==2&&(i=Yt,Yt=a,i!==null&&Zh(i)),n}function Zh(n){Yt===null?Yt=n:Yt.push.apply(Yt,n)}function cE(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Nn(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ii(n,i){for(i&=~Gh,i&=~hu,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-zt(i),c=1<<a;n[a]=-1,i&=~c}}function qm(n){if(Le&6)throw Error(t(327));so();var i=Fi(n,0);if(!(i&1))return Xt(n,He()),null;var a=yu(n,i);if(n.tag!==0&&a===2){var c=nn(n);c!==0&&(i=c,a=Jh(n,c))}if(a===1)throw a=Ia,Zi(n,0),ii(n,i),Xt(n,He()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,es(n,Yt,Ir),Xt(n,He()),null}function ed(n,i){var a=Le;Le|=1;try{return n(i)}finally{Le=a,Le===0&&(io=He()+500,Hl&&Xr())}}function Ji(n){ni!==null&&ni.tag===0&&!(Le&6)&&so();var i=Le;Le|=1;var a=_n.transition,c=xe;try{if(_n.transition=null,xe=1,n)return n()}finally{xe=c,_n.transition=a,Le=i,!(Le&6)&&Xr()}}function td(){ln=ro.current,Ke(ro)}function Zi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,jw(a)),at!==null)for(a=at.return;a!==null;){var c=a;switch(ch(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Bl();break;case 3:eo(),Ke(Kt),Ke(Dt),Ih();break;case 5:Eh(c);break;case 4:eo();break;case 13:Ke(Je);break;case 19:Ke(Je);break;case 10:gh(c.type._context);break;case 22:case 23:td()}a=a.return}if(wt=n,at=n=si(n.current,null),Ct=ln=i,ft=0,Ia=null,Gh=hu=Xi=0,Yt=Sa=null,Gi!==null){for(i=0;i<Gi.length;i++)if(a=Gi[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,g=a.pending;if(g!==null){var v=g.next;g.next=f,c.next=v}a.pending=c}Gi=null}return n}function Km(n,i){do{var a=at;try{if(mh(),eu.current=iu,tu){for(var c=Ze.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}tu=!1}if(Yi=0,vt=dt=Ze=null,ya=!1,_a=0,Kh.current=null,a===null||a.return===null){ft=1,Ia=i,at=null;break}e:{var g=n,v=a.return,R=a,k=i;if(i=Ct,R.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var B=k,X=R,Z=X.tag;if(!(X.mode&1)&&(Z===0||Z===11||Z===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var ie=_m(v);if(ie!==null){ie.flags&=-257,vm(ie,v,R,g,i),ie.mode&1&&ym(g,B,i),i=ie,k=B;var le=i.updateQueue;if(le===null){var ue=new Set;ue.add(k),i.updateQueue=ue}else le.add(k);break e}else{if(!(i&1)){ym(g,B,i),nd();break e}k=Error(t(426))}}else if(Qe&&R.mode&1){var it=_m(v);if(it!==null){!(it.flags&65536)&&(it.flags|=256),vm(it,v,R,g,i),fh(to(k,R));break e}}g=k=to(k,R),ft!==4&&(ft=2),Sa===null?Sa=[g]:Sa.push(g),g=v;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var j=mm(g,k,i);Bp(g,j);break e;case 1:R=k;var D=g.type,z=g.stateNode;if(!(g.flags&128)&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(ti===null||!ti.has(z)))){g.flags|=65536,i&=-i,g.lanes|=i;var ee=gm(g,R,i);Bp(g,ee);break e}}g=g.return}while(g!==null)}Ym(a)}catch(he){i=he,at===a&&a!==null&&(at=a=a.return);continue}break}while(!0)}function Gm(){var n=cu.current;return cu.current=iu,n===null?iu:n}function nd(){(ft===0||ft===3||ft===2)&&(ft=4),wt===null||!(Xi&268435455)&&!(hu&268435455)||ii(wt,Ct)}function yu(n,i){var a=Le;Le|=2;var c=Gm();(wt!==n||Ct!==i)&&(Ir=null,Zi(n,i));do try{hE();break}catch(f){Km(n,f)}while(!0);if(mh(),Le=a,cu.current=c,at!==null)throw Error(t(261));return wt=null,Ct=0,ft}function hE(){for(;at!==null;)Qm(at)}function dE(){for(;at!==null&&!pl();)Qm(at)}function Qm(n){var i=Zm(n.alternate,n,ln);n.memoizedProps=n.pendingProps,i===null?Ym(n):at=i,Kh.current=null}function Ym(n){var i=n;do{var a=i.alternate;if(n=i.return,i.flags&32768){if(a=sE(a,i),a!==null){a.flags&=32767,at=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ft=6,at=null;return}}else if(a=iE(a,i,ln),a!==null){at=a;return}if(i=i.sibling,i!==null){at=i;return}at=i=n}while(i!==null);ft===0&&(ft=5)}function es(n,i,a){var c=xe,f=_n.transition;try{_n.transition=null,xe=1,fE(n,i,a,c)}finally{_n.transition=f,xe=c}return null}function fE(n,i,a,c){do so();while(ni!==null);if(Le&6)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var g=a.lanes|a.childLanes;if(Be(n,g),n===wt&&(at=wt=null,Ct=0),!(a.subtreeFlags&2064)&&!(a.flags&2064)||fu||(fu=!0,eg(hn,function(){return so(),null})),g=(a.flags&15990)!==0,a.subtreeFlags&15990||g){g=_n.transition,_n.transition=null;var v=xe;xe=1;var R=Le;Le|=4,Kh.current=null,aE(n,a),jm(a,n),bw(nh),Wr=!!th,nh=th=null,n.current=a,lE(a),Uc(),Le=R,xe=v,_n.transition=g}else n.current=a;if(fu&&(fu=!1,ni=n,pu=f),g=n.pendingLanes,g===0&&(ti=null),yl(a.stateNode),Xt(n,He()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(du)throw du=!1,n=Yh,Yh=null,n;return pu&1&&n.tag!==0&&so(),g=n.pendingLanes,g&1?n===Xh?Ra++:(Ra=0,Xh=n):Ra=0,Xr(),null}function so(){if(ni!==null){var n=$r(pu),i=_n.transition,a=xe;try{if(_n.transition=null,xe=16>n?16:n,ni===null)var c=!1;else{if(n=ni,ni=null,pu=0,Le&6)throw Error(t(331));var f=Le;for(Le|=4,ae=n.current;ae!==null;){var g=ae,v=g.child;if(ae.flags&16){var R=g.deletions;if(R!==null){for(var k=0;k<R.length;k++){var B=R[k];for(ae=B;ae!==null;){var X=ae;switch(X.tag){case 0:case 11:case 15:Ta(8,X,g)}var Z=X.child;if(Z!==null)Z.return=X,ae=Z;else for(;ae!==null;){X=ae;var Y=X.sibling,ie=X.return;if(Lm(X),X===B){ae=null;break}if(Y!==null){Y.return=ie,ae=Y;break}ae=ie}}}var le=g.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var it=ue.sibling;ue.sibling=null,ue=it}while(ue!==null)}}ae=g}}if(g.subtreeFlags&2064&&v!==null)v.return=g,ae=v;else e:for(;ae!==null;){if(g=ae,g.flags&2048)switch(g.tag){case 0:case 11:case 15:Ta(9,g,g.return)}var j=g.sibling;if(j!==null){j.return=g.return,ae=j;break e}ae=g.return}}var D=n.current;for(ae=D;ae!==null;){v=ae;var z=v.child;if(v.subtreeFlags&2064&&z!==null)z.return=v,ae=z;else e:for(v=D;ae!==null;){if(R=ae,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:uu(9,R)}}catch(he){tt(R,R.return,he)}if(R===v){ae=null;break e}var ee=R.sibling;if(ee!==null){ee.return=R.return,ae=ee;break e}ae=R.return}}if(Le=f,Xr(),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(Mi,n)}catch{}c=!0}return c}finally{xe=a,_n.transition=i}}return!1}function Xm(n,i,a){i=to(a,i),i=mm(n,i,1),n=Zr(n,i,1),i=Ht(),n!==null&&(zr(n,1,i),Xt(n,i))}function tt(n,i,a){if(n.tag===3)Xm(n,n,a);else for(;i!==null;){if(i.tag===3){Xm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ti===null||!ti.has(c))){n=to(a,n),n=gm(i,n,1),i=Zr(i,n,1),n=Ht(),i!==null&&(zr(i,1,n),Xt(i,n));break}}i=i.return}}function pE(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Ht(),n.pingedLanes|=n.suspendedLanes&a,wt===n&&(Ct&a)===a&&(ft===4||ft===3&&(Ct&130023424)===Ct&&500>He()-Qh?Zi(n,0):Gh|=a),Xt(n,i)}function Jm(n,i){i===0&&(n.mode&1?(i=ks,ks<<=1,!(ks&130023424)&&(ks=4194304)):i=1);var a=Ht();n=wr(n,i),n!==null&&(zr(n,i,a),Xt(n,a))}function mE(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Jm(n,a)}function gE(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Jm(n,a)}var Zm;Zm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||Kt.current)Qt=!0;else{if(!(n.lanes&a)&&!(i.flags&128))return Qt=!1,rE(n,i,a);Qt=!!(n.flags&131072)}else Qt=!1,Qe&&i.flags&1048576&&Dp(i,ql,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;au(n,i),n=i.pendingProps;var f=Ks(i,Dt.current);Zs(i,a),f=Ch(null,i,c,n,f,a);var g=Ah();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Gt(c)?(g=!0,$l(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,vh(i),f.updater=su,i.stateNode=f,f._reactInternals=i,bh(i,c,n,a),i=Mh(null,i,c,!0,g,a)):(i.tag=0,Qe&&g&&uh(i),$t(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(au(n,i),n=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=_E(c),n=bn(c,n),f){case 0:i=Vh(null,i,c,n,a);break e;case 1:i=Rm(null,i,c,n,a);break e;case 11:i=wm(null,i,c,n,a);break e;case 14:i=Em(null,i,c,bn(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:bn(c,f),Vh(n,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:bn(c,f),Rm(n,i,c,f,a);case 3:e:{if(Cm(i),n===null)throw Error(t(387));c=i.pendingProps,g=i.memoizedState,f=g.element,zp(n,i),Jl(i,c,null,a);var v=i.memoizedState;if(c=v.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=to(Error(t(423)),i),i=Am(n,i,c,a,f);break e}else if(c!==f){f=to(Error(t(424)),i),i=Am(n,i,c,a,f);break e}else for(an=Gr(i.stateNode.containerInfo.firstChild),on=i,Qe=!0,Dn=null,a=Up(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Ys(),c===f){i=Tr(n,i,a);break e}$t(n,i,c,a)}i=i.child}return i;case 5:return Hp(i),n===null&&dh(i),c=i.type,f=i.pendingProps,g=n!==null?n.memoizedProps:null,v=f.children,rh(c,f)?v=null:g!==null&&rh(c,g)&&(i.flags|=32),Sm(n,i),$t(n,i,v,a),i.child;case 6:return n===null&&dh(i),null;case 13:return km(n,i,a);case 4:return wh(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=Xs(i,null,c,a):$t(n,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:bn(c,f),wm(n,i,c,f,a);case 7:return $t(n,i,i.pendingProps,a),i.child;case 8:return $t(n,i,i.pendingProps.children,a),i.child;case 12:return $t(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,g=i.memoizedProps,v=f.value,We(Ql,c._currentValue),c._currentValue=v,g!==null)if(Nn(g.value,v)){if(g.children===f.children&&!Kt.current){i=Tr(n,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var R=g.dependencies;if(R!==null){v=g.child;for(var k=R.firstContext;k!==null;){if(k.context===c){if(g.tag===1){k=Er(-1,a&-a),k.tag=2;var B=g.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?k.next=k:(k.next=X.next,X.next=k),B.pending=k}}g.lanes|=a,k=g.alternate,k!==null&&(k.lanes|=a),yh(g.return,a,i),R.lanes|=a;break}k=k.next}}else if(g.tag===10)v=g.type===i.type?null:g.child;else if(g.tag===18){if(v=g.return,v===null)throw Error(t(341));v.lanes|=a,R=v.alternate,R!==null&&(R.lanes|=a),yh(v,a,i),v=g.sibling}else v=g.child;if(v!==null)v.return=g;else for(v=g;v!==null;){if(v===i){v=null;break}if(g=v.sibling,g!==null){g.return=v.return,v=g;break}v=v.return}g=v}$t(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,Zs(i,a),f=gn(f),c=c(f),i.flags|=1,$t(n,i,c,a),i.child;case 14:return c=i.type,f=bn(c,i.pendingProps),f=bn(c.type,f),Em(n,i,c,f,a);case 15:return Tm(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:bn(c,f),au(n,i),i.tag=1,Gt(c)?(n=!0,$l(i)):n=!1,Zs(i,a),fm(i,c,f),bh(i,c,f,a),Mh(null,i,c,!0,n,a);case 19:return xm(n,i,a);case 22:return Im(n,i,a)}throw Error(t(156,i.tag))};function eg(n,i){return Cs(n,i)}function yE(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(n,i,a,c){return new yE(n,i,a,c)}function rd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function _E(n){if(typeof n=="function")return rd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===M)return 11;if(n===xt)return 14}return 2}function si(n,i){var a=n.alternate;return a===null?(a=vn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function _u(n,i,a,c,f,g){var v=2;if(c=n,typeof n=="function")rd(n)&&(v=1);else if(typeof n=="string")v=5;else e:switch(n){case N:return ts(a.children,f,g,i);case I:v=8,f|=8;break;case C:return n=vn(12,a,i,f|2),n.elementType=C,n.lanes=g,n;case A:return n=vn(13,a,i,f),n.elementType=A,n.lanes=g,n;case nt:return n=vn(19,a,i,f),n.elementType=nt,n.lanes=g,n;case ze:return vu(a,f,g,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case P:v=10;break e;case b:v=9;break e;case M:v=11;break e;case xt:v=14;break e;case Nt:v=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=vn(v,a,i,f),i.elementType=n,i.type=c,i.lanes=g,i}function ts(n,i,a,c){return n=vn(7,n,c,i),n.lanes=a,n}function vu(n,i,a,c){return n=vn(22,n,c,i),n.elementType=ze,n.lanes=a,n.stateNode={isHidden:!1},n}function id(n,i,a){return n=vn(6,n,null,i),n.lanes=a,n}function sd(n,i,a){return i=vn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function vE(n,i,a,c,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jr(0),this.expirationTimes=jr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jr(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function od(n,i,a,c,f,g,v,R,k){return n=new vE(n,i,a,R,k),i===1?(i=1,g===!0&&(i|=8)):i=0,g=vn(3,null,null,i),n.current=g,g.stateNode=n,g.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(g),n}function wE(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Te,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function tg(n){if(!n)return Yr;n=n._reactInternals;e:{if(Sn(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Gt(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if(Gt(a))return Pp(n,a,i)}return i}function ng(n,i,a,c,f,g,v,R,k){return n=od(a,c,!0,n,f,g,v,R,k),n.context=tg(null),a=n.current,c=Ht(),f=ri(a),g=Er(c,f),g.callback=i??null,Zr(a,g,f),n.current.lanes=f,zr(n,f,c),Xt(n,c),n}function wu(n,i,a,c){var f=i.current,g=Ht(),v=ri(f);return a=tg(a),i.context===null?i.context=a:i.pendingContext=a,i=Er(g,v),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=Zr(f,i,v),n!==null&&(Vn(n,f,v,g),Xl(n,f,v)),v}function Eu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function rg(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function ad(n,i){rg(n,i),(n=n.alternate)&&rg(n,i)}var ig=typeof reportError=="function"?reportError:function(n){console.error(n)};function ld(n){this._internalRoot=n}Tu.prototype.render=ld.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));wu(n,i,null,null)},Tu.prototype.unmount=ld.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Ji(function(){wu(null,n,null,null)}),i[gr]=null}};function Tu(n){this._internalRoot=n}Tu.prototype.unstable_scheduleHydration=function(n){if(n){var i=Tl();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Wn.length&&i!==0&&i<Wn[a].priority;a++);Wn.splice(a,0,n),a===0&&Rl(n)}};function ud(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function sg(){}function EE(n,i,a,c,f){if(f){if(typeof c=="function"){var g=c;c=function(){var B=Eu(v);g.call(B)}}var v=ng(i,c,n,0,null,!1,!1,"",sg);return n._reactRootContainer=v,n[gr]=v.current,ua(n.nodeType===8?n.parentNode:n),Ji(),v}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var R=c;c=function(){var B=Eu(k);R.call(B)}}var k=od(n,0,!1,null,null,!1,!1,"",sg);return n._reactRootContainer=k,n[gr]=k.current,ua(n.nodeType===8?n.parentNode:n),Ji(function(){wu(i,k,a,c)}),k}function Su(n,i,a,c,f){var g=a._reactRootContainer;if(g){var v=g;if(typeof f=="function"){var R=f;f=function(){var k=Eu(v);R.call(k)}}wu(i,v,n,f)}else v=EE(a,i,n,f,c);return Eu(v)}wl=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ur(i.pendingLanes);a!==0&&(Br(i,a|1),Xt(i,He()),!(Le&6)&&(io=He()+500,Xr()))}break;case 13:Ji(function(){var c=wr(n,1);if(c!==null){var f=Ht();Vn(c,n,1,f)}}),ad(n,1)}},Ps=function(n){if(n.tag===13){var i=wr(n,134217728);if(i!==null){var a=Ht();Vn(i,n,134217728,a)}ad(n,134217728)}},El=function(n){if(n.tag===13){var i=ri(n),a=wr(n,i);if(a!==null){var c=Ht();Vn(a,n,i,c)}ad(n,i)}},Tl=function(){return xe},Il=function(n,i){var a=xe;try{return xe=n,i()}finally{xe=a}},ws=function(n,i,a){switch(i){case"input":if(Oo(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=zl(c);if(!f)throw Error(t(90));ps(c),Oo(c,f)}}}break;case"textarea":_s(n,a);break;case"select":i=a.value,i!=null&&lr(n,!!a.multiple,i,!1)}},Di=ed,Ho=Ji;var TE={usingClientEntryPoint:!1,Events:[da,Ws,zl,$n,$o,ed]},Ca={findFiberByHostInstance:Hi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IE={bundleType:Ca.bundleType,version:Ca.version,rendererPackageName:Ca.rendererPackageName,rendererConfig:Ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ce.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ko(n),n===null?null:n.stateNode},findFiberByHostInstance:Ca.findFiberByHostInstance,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ru.isDisabled&&Ru.supportsFiber)try{Mi=Ru.inject(IE),tn=Ru}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TE,Jt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(i))throw Error(t(200));return wE(n,i,null,a)},Jt.createRoot=function(n,i){if(!ud(n))throw Error(t(299));var a=!1,c="",f=ig;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=od(n,1,!1,null,null,a,!1,c,f),n[gr]=i.current,ua(n.nodeType===8?n.parentNode:n),new ld(i)},Jt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=Ko(i),n=n===null?null:n.stateNode,n},Jt.flushSync=function(n){return Ji(n)},Jt.hydrate=function(n,i,a){if(!Iu(i))throw Error(t(200));return Su(null,n,i,!0,a)},Jt.hydrateRoot=function(n,i,a){if(!ud(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,g="",v=ig;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(v=a.onRecoverableError)),i=ng(i,null,n,1,a??null,f,!1,g,v),n[gr]=i.current,ua(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new Tu(i)},Jt.render=function(n,i,a){if(!Iu(i))throw Error(t(200));return Su(null,n,i,!1,a)},Jt.unmountComponentAtNode=function(n){if(!Iu(n))throw Error(t(40));return n._reactRootContainer?(Ji(function(){Su(null,null,n,!1,function(){n._reactRootContainer=null,n[gr]=null})}),!0):!1},Jt.unstable_batchedUpdates=ed,Jt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!Iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return Su(n,i,a,!1,c)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var fg;function DE(){if(fg)return dd.exports;fg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),dd.exports=NE(),dd.exports}var pg;function bE(){if(pg)return Cu;pg=1;var r=DE();return Cu.createRoot=r.createRoot,Cu.hydrateRoot=r.hydrateRoot,Cu}var OE=bE(),ka={},mg;function LE(){if(mg)return ka;mg=1,Object.defineProperty(ka,"__esModule",{value:!0}),ka.parse=h,ka.serialize=y;const r=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,o=Object.prototype.toString,l=(()=>{const S=function(){};return S.prototype=Object.create(null),S})();function h(S,O){const U=new l,$=S.length;if($<2)return U;const L=(O==null?void 0:O.decode)||w;let q=0;do{const K=S.indexOf("=",q);if(K===-1)break;const ne=S.indexOf(";",q),ce=ne===-1?$:ne;if(K>ce){q=S.lastIndexOf(";",K-1)+1;continue}const Se=d(S,q,K),Te=p(S,K,Se),N=S.slice(Se,Te);if(U[N]===void 0){let I=d(S,K+1,ce),C=p(S,ce,I);const P=L(S.slice(I,C));U[N]=P}q=ce+1}while(q<$);return U}function d(S,O,U){do{const $=S.charCodeAt(O);if($!==32&&$!==9)return O}while(++O<U);return U}function p(S,O,U){for(;O>U;){const $=S.charCodeAt(--O);if($!==32&&$!==9)return O+1}return U}function y(S,O,U){const $=(U==null?void 0:U.encode)||encodeURIComponent;if(!r.test(S))throw new TypeError(`argument name is invalid: ${S}`);const L=$(O);if(!e.test(L))throw new TypeError(`argument val is invalid: ${O}`);let q=S+"="+L;if(!U)return q;if(U.maxAge!==void 0){if(!Number.isInteger(U.maxAge))throw new TypeError(`option maxAge is invalid: ${U.maxAge}`);q+="; Max-Age="+U.maxAge}if(U.domain){if(!t.test(U.domain))throw new TypeError(`option domain is invalid: ${U.domain}`);q+="; Domain="+U.domain}if(U.path){if(!s.test(U.path))throw new TypeError(`option path is invalid: ${U.path}`);q+="; Path="+U.path}if(U.expires){if(!T(U.expires)||!Number.isFinite(U.expires.valueOf()))throw new TypeError(`option expires is invalid: ${U.expires}`);q+="; Expires="+U.expires.toUTCString()}if(U.httpOnly&&(q+="; HttpOnly"),U.secure&&(q+="; Secure"),U.partitioned&&(q+="; Partitioned"),U.priority)switch(typeof U.priority=="string"?U.priority.toLowerCase():void 0){case"low":q+="; Priority=Low";break;case"medium":q+="; Priority=Medium";break;case"high":q+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${U.priority}`)}if(U.sameSite)switch(typeof U.sameSite=="string"?U.sameSite.toLowerCase():U.sameSite){case!0:case"strict":q+="; SameSite=Strict";break;case"lax":q+="; SameSite=Lax";break;case"none":q+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${U.sameSite}`)}return q}function w(S){if(S.indexOf("%")===-1)return S;try{return decodeURIComponent(S)}catch{return S}}function T(S){return o.call(S)==="[object Date]"}return ka}LE();/**
 * react-router v7.1.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var gg="popstate";function VE(r={}){function e(s,o){let{pathname:l,search:h,hash:d}=s.location;return Pd("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:za(o)}return FE(e,t,null,r)}function Xe(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function jn(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ME(){return Math.random().toString(36).substring(2,10)}function yg(r,e){return{usr:r.state,key:r.key,idx:e}}function Pd(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:t,key:e&&e.key||s||ME()}}function za({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function So(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function FE(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,d="POP",p=null,y=w();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function w(){return(h.state||{idx:null}).idx}function T(){d="POP";let L=w(),q=L==null?null:L-y;y=L,p&&p({action:d,location:$.location,delta:q})}function S(L,q){d="PUSH";let K=Pd($.location,L,q);y=w()+1;let ne=yg(K,y),ce=$.createHref(K);try{h.pushState(ne,"",ce)}catch(Se){if(Se instanceof DOMException&&Se.name==="DataCloneError")throw Se;o.location.assign(ce)}l&&p&&p({action:d,location:$.location,delta:1})}function O(L,q){d="REPLACE";let K=Pd($.location,L,q);y=w();let ne=yg(K,y),ce=$.createHref(K);h.replaceState(ne,"",ce),l&&p&&p({action:d,location:$.location,delta:0})}function U(L){let q=o.location.origin!=="null"?o.location.origin:o.location.href,K=typeof L=="string"?L:za(L);return K=K.replace(/ $/,"%20"),Xe(q,`No window.location.(origin|href) available to create URL for href: ${K}`),new URL(K,q)}let $={get action(){return d},get location(){return r(o,h)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(gg,T),p=L,()=>{o.removeEventListener(gg,T),p=null}},createHref(L){return e(o,L)},createURL:U,encodeLocation(L){let q=U(L);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:S,replace:O,go(L){return h.go(L)}};return $}function By(r,e,t="/"){return UE(r,e,t,!1)}function UE(r,e,t,s){let o=typeof e=="string"?So(e):e,l=yi(o.pathname||"/",t);if(l==null)return null;let h=$y(r);jE(h);let d=null;for(let p=0;d==null&&p<h.length;++p){let y=XE(l);d=QE(h[p],y,s)}return d}function $y(r,e=[],t=[],s=""){let o=(l,h,d)=>{let p={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};p.relativePath.startsWith("/")&&(Xe(p.relativePath.startsWith(s),`Absolute route path "${p.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(s.length));let y=kr([s,p.relativePath]),w=t.concat(p);l.children&&l.children.length>0&&(Xe(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),$y(l.children,e,w,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:KE(y,l.index),routesMeta:w})};return r.forEach((l,h)=>{var d;if(l.path===""||!((d=l.path)!=null&&d.includes("?")))o(l,h);else for(let p of Hy(l.path))o(l,h,p)}),e}function Hy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=Hy(s.join("/")),d=[];return d.push(...h.map(p=>p===""?l:[l,p].join("/"))),o&&d.push(...h),d.map(p=>r.startsWith("/")&&p===""?"/":p)}function jE(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:GE(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var zE=/^:[\w-]+$/,BE=3,$E=2,HE=1,WE=10,qE=-2,_g=r=>r==="*";function KE(r,e){let t=r.split("/"),s=t.length;return t.some(_g)&&(s+=qE),e&&(s+=$E),t.filter(o=>!_g(o)).reduce((o,l)=>o+(zE.test(l)?BE:l===""?HE:WE),s)}function GE(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function QE(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let d=0;d<s.length;++d){let p=s[d],y=d===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",T=Ku({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),S=p.route;if(!T&&y&&t&&!s[s.length-1].route.index&&(T=Ku({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:kr([l,T.pathname]),pathnameBase:t0(kr([l,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(l=kr([l,T.pathnameBase]))}return h}function Ku(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=YE(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((y,{paramName:w,isOptional:T},S)=>{if(w==="*"){let U=d[S]||"";h=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const O=d[S];return T&&!O?y[w]=void 0:y[w]=(O||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function YE(r,e=!1,t=!0){jn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,p)=>(s.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function XE(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jn(!1,`The URL path "${r}" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function yi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function JE(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?So(r):r;return{pathname:t?t.startsWith("/")?t:ZE(t,e):e,search:n0(s),hash:r0(o)}}function ZE(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function md(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function e0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function rf(r){let e=e0(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function sf(r,e,t,s=!1){let o;typeof r=="string"?o=So(r):(o={...r},Xe(!o.pathname||!o.pathname.includes("?"),md("?","pathname","search",o)),Xe(!o.pathname||!o.pathname.includes("#"),md("#","pathname","hash",o)),Xe(!o.search||!o.search.includes("#"),md("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let T=e.length-1;if(!s&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}d=T>=0?e[T]:"/"}let p=JE(o,d),y=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}var kr=r=>r.join("/").replace(/\/\/+/g,"/"),t0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),n0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,r0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function i0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var Wy=["POST","PUT","PATCH","DELETE"];new Set(Wy);var s0=["GET",...Wy];new Set(s0);var Ro=H.createContext(null);Ro.displayName="DataRouter";var pc=H.createContext(null);pc.displayName="DataRouterState";var qy=H.createContext({isTransitioning:!1});qy.displayName="ViewTransition";var o0=H.createContext(new Map);o0.displayName="Fetchers";var a0=H.createContext(null);a0.displayName="Await";var zn=H.createContext(null);zn.displayName="Navigation";var Xa=H.createContext(null);Xa.displayName="Location";var ir=H.createContext({outlet:null,matches:[],isDataRoute:!1});ir.displayName="Route";var of=H.createContext(null);of.displayName="RouteError";function l0(r,{relative:e}={}){Xe(Co(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=H.useContext(zn),{hash:o,pathname:l,search:h}=Za(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:kr([t,l])),s.createHref({pathname:d,search:h,hash:o})}function Co(){return H.useContext(Xa)!=null}function Or(){return Xe(Co(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(Xa).location}var Ky="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Gy(r){H.useContext(zn).static||H.useLayoutEffect(r)}function Ja(){let{isDataRoute:r}=H.useContext(ir);return r?E0():u0()}function u0(){Xe(Co(),"useNavigate() may be used only in the context of a <Router> component.");let r=H.useContext(Ro),{basename:e,navigator:t}=H.useContext(zn),{matches:s}=H.useContext(ir),{pathname:o}=Or(),l=JSON.stringify(rf(s)),h=H.useRef(!1);return Gy(()=>{h.current=!0}),H.useCallback((p,y={})=>{if(jn(h.current,Ky),!h.current)return;if(typeof p=="number"){t.go(p);return}let w=sf(p,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:kr([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,l,o,r])}H.createContext(null);function Za(r,{relative:e}={}){let{matches:t}=H.useContext(ir),{pathname:s}=Or(),o=JSON.stringify(rf(t));return H.useMemo(()=>sf(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function c0(r,e){return Qy(r,e)}function Qy(r,e,t,s){var q;Xe(Co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=H.useContext(zn),{matches:l}=H.useContext(ir),h=l[l.length-1],d=h?h.params:{},p=h?h.pathname:"/",y=h?h.pathnameBase:"/",w=h&&h.route;{let K=w&&w.path||"";Yy(p,!w||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let T=Or(),S;if(e){let K=typeof e=="string"?So(e):e;Xe(y==="/"||((q=K.pathname)==null?void 0:q.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${K.pathname}" was given in the \`location\` prop.`),S=K}else S=T;let O=S.pathname||"/",U=O;if(y!=="/"){let K=y.replace(/^\//,"").split("/");U="/"+O.replace(/^\//,"").split("/").slice(K.length).join("/")}let $=By(r,{pathname:U});jn(w||$!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),jn($==null||$[$.length-1].route.element!==void 0||$[$.length-1].route.Component!==void 0||$[$.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let L=m0($&&$.map(K=>Object.assign({},K,{params:Object.assign({},d,K.params),pathname:kr([y,o.encodeLocation?o.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?y:kr([y,o.encodeLocation?o.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),l,t,s);return e&&L?H.createElement(Xa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},L):L}function h0(){let r=w0(),e=i0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:l},"ErrorBoundary")," or"," ",H.createElement("code",{style:l},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),t?H.createElement("pre",{style:o},t):null,h)}var d0=H.createElement(h0,null),f0=class extends H.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){console.error("React Router caught the following error during render",r,e)}render(){return this.state.error!==void 0?H.createElement(ir.Provider,{value:this.props.routeContext},H.createElement(of.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function p0({routeContext:r,match:e,children:t}){let s=H.useContext(Ro);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(ir.Provider,{value:r},t)}function m0(r,e=[],t=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,l=t==null?void 0:t.errors;if(l!=null){let p=o.findIndex(y=>y.route.id&&(l==null?void 0:l[y.route.id])!==void 0);Xe(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,d=-1;if(t)for(let p=0;p<o.length;p++){let y=o[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(d=p),y.route.id){let{loaderData:w,errors:T}=t,S=y.route.loader&&!w.hasOwnProperty(y.route.id)&&(!T||T[y.route.id]===void 0);if(y.route.lazy||S){h=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((p,y,w)=>{let T,S=!1,O=null,U=null;t&&(T=l&&y.route.id?l[y.route.id]:void 0,O=y.route.errorElement||d0,h&&(d<0&&w===0?(Yy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,U=null):d===w&&(S=!0,U=y.route.hydrateFallbackElement||null)));let $=e.concat(o.slice(0,w+1)),L=()=>{let q;return T?q=O:S?q=U:y.route.Component?q=H.createElement(y.route.Component,null):y.route.element?q=y.route.element:q=p,H.createElement(p0,{match:y,routeContext:{outlet:p,matches:$,isDataRoute:t!=null},children:q})};return t&&(y.route.ErrorBoundary||y.route.errorElement||w===0)?H.createElement(f0,{location:t.location,revalidation:t.revalidation,component:O,error:T,children:L(),routeContext:{outlet:null,matches:$,isDataRoute:!0}}):L()},null)}function af(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g0(r){let e=H.useContext(Ro);return Xe(e,af(r)),e}function y0(r){let e=H.useContext(pc);return Xe(e,af(r)),e}function _0(r){let e=H.useContext(ir);return Xe(e,af(r)),e}function lf(r){let e=_0(r),t=e.matches[e.matches.length-1];return Xe(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function v0(){return lf("useRouteId")}function w0(){var s;let r=H.useContext(of),e=y0("useRouteError"),t=lf("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function E0(){let{router:r}=g0("useNavigate"),e=lf("useNavigate"),t=H.useRef(!1);return Gy(()=>{t.current=!0}),H.useCallback(async(o,l={})=>{jn(t.current,Ky),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var vg={};function Yy(r,e,t){!e&&!vg[r]&&(vg[r]=!0,jn(!1,t))}H.memo(T0);function T0({routes:r,future:e,state:t}){return Qy(r,void 0,t,e)}function Xy({to:r,replace:e,state:t,relative:s}){Xe(Co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=H.useContext(zn);jn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=H.useContext(ir),{pathname:h}=Or(),d=Ja(),p=sf(r,rf(l),h,s==="path"),y=JSON.stringify(p);return H.useEffect(()=>{d(JSON.parse(y),{replace:e,state:t,relative:s})},[d,y,s,e,t]),null}function xa(r){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function I0({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){Xe(!Co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=H.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=So(t));let{pathname:p="/",search:y="",hash:w="",state:T=null,key:S="default"}=t,O=H.useMemo(()=>{let U=yi(p,h);return U==null?null:{location:{pathname:U,search:y,hash:w,state:T,key:S},navigationType:s}},[h,p,y,w,T,S,s]);return jn(O!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:H.createElement(zn.Provider,{value:d},H.createElement(Xa.Provider,{children:e,value:O}))}function S0({children:r,location:e}){return c0(xd(r),e)}function xd(r,e=[]){let t=[];return H.Children.forEach(r,(s,o)=>{if(!H.isValidElement(s))return;let l=[...e,o];if(s.type===H.Fragment){t.push.apply(t,xd(s.props.children,l));return}Xe(s.type===xa,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=xd(s.props.children,l)),t.push(h)}),t}var Lu="get",Vu="application/x-www-form-urlencoded";function mc(r){return r!=null&&typeof r.tagName=="string"}function R0(r){return mc(r)&&r.tagName.toLowerCase()==="button"}function C0(r){return mc(r)&&r.tagName.toLowerCase()==="form"}function A0(r){return mc(r)&&r.tagName.toLowerCase()==="input"}function k0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function P0(r,e){return r.button===0&&(!e||e==="_self")&&!k0(r)}var Au=null;function x0(){if(Au===null)try{new FormData(document.createElement("form"),0),Au=!1}catch{Au=!0}return Au}var N0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gd(r){return r!=null&&!N0.has(r)?(jn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Vu}"`),null):r}function D0(r,e){let t,s,o,l,h;if(C0(r)){let d=r.getAttribute("action");s=d?yi(d,e):null,t=r.getAttribute("method")||Lu,o=gd(r.getAttribute("enctype"))||Vu,l=new FormData(r)}else if(R0(r)||A0(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||d.getAttribute("action");if(s=p?yi(p,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||Lu,o=gd(r.getAttribute("formenctype"))||gd(d.getAttribute("enctype"))||Vu,l=new FormData(d,r),!x0()){let{name:y,type:w,value:T}=r;if(w==="image"){let S=y?`${y}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else y&&l.append(y,T)}}else{if(mc(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Lu,s=null,o=Vu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}function uf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}async function b0(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function O0(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function L0(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await b0(l,t);return h.links?h.links():[]}return[]}));return U0(s.flat(1).filter(O0).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function wg(r,e,t,s,o,l){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,d=(p,y)=>{var w;return t[y].pathname!==p.pathname||((w=t[y].route.path)==null?void 0:w.endsWith("*"))&&t[y].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,y)=>h(p,y)||d(p,y)):l==="data"?e.filter((p,y)=>{var T;let w=s.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(h(p,y)||d(p,y))return!0;if(p.route.shouldRevalidate){let S=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((T=t[0])==null?void 0:T.params)||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof S=="boolean")return S}return!0}):[]}function V0(r,e){return M0(r.map(t=>{let s=e.routes[t.route.id];if(!s)return[];let o=[s.module];return s.imports&&(o=o.concat(s.imports)),o}).flat(1))}function M0(r){return[...new Set(r)]}function F0(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function U0(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(F0(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function j0(r){let e=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function z0(){let r=H.useContext(Ro);return uf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function B0(){let r=H.useContext(pc);return uf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cf=H.createContext(void 0);cf.displayName="FrameworkContext";function Jy(){let r=H.useContext(cf);return uf(r,"You must render this element inside a <HydratedRouter> element"),r}function $0(r,e){let t=H.useContext(cf),[s,o]=H.useState(!1),[l,h]=H.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:y,onMouseLeave:w,onTouchStart:T}=e,S=H.useRef(null);H.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let $=q=>{q.forEach(K=>{h(K.isIntersecting)})},L=new IntersectionObserver($,{threshold:.5});return S.current&&L.observe(S.current),()=>{L.disconnect()}}},[r]),H.useEffect(()=>{if(s){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[s]);let O=()=>{o(!0)},U=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,S,{}]:[l,S,{onFocus:Pa(d,O),onBlur:Pa(p,U),onMouseEnter:Pa(y,O),onMouseLeave:Pa(w,U),onTouchStart:Pa(T,O)}]:[!1,S,{}]}function Pa(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function H0({page:r,...e}){let{router:t}=z0(),s=H.useMemo(()=>By(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?H.createElement(q0,{page:r,matches:s,...e}):null}function W0(r){let{manifest:e,routeModules:t}=Jy(),[s,o]=H.useState([]);return H.useEffect(()=>{let l=!1;return L0(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function q0({page:r,matches:e,...t}){let s=Or(),{manifest:o,routeModules:l}=Jy(),{loaderData:h,matches:d}=B0(),p=H.useMemo(()=>wg(r,e,d,o,s,"data"),[r,e,d,o,s]),y=H.useMemo(()=>wg(r,e,d,o,s,"assets"),[r,e,d,o,s]),w=H.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let O=new Set,U=!1;if(e.forEach(L=>{var K;let q=o.routes[L.route.id];!q||!q.hasLoader||(!p.some(ne=>ne.route.id===L.route.id)&&L.route.id in h&&((K=l[L.route.id])!=null&&K.shouldRevalidate)||q.hasClientLoader?U=!0:O.add(L.route.id))}),O.size===0)return[];let $=j0(r);return U&&O.size>0&&$.searchParams.set("_routes",e.filter(L=>O.has(L.route.id)).map(L=>L.route.id).join(",")),[$.pathname+$.search]},[h,s,o,p,e,r,l]),T=H.useMemo(()=>V0(y,o),[y,o]),S=W0(y);return H.createElement(H.Fragment,null,w.map(O=>H.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),T.map(O=>H.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),S.map(({key:O,link:U})=>H.createElement("link",{key:O,...U})))}function K0(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Zy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Zy&&(window.__reactRouterVersion="7.1.1")}catch{}function G0({basename:r,children:e,window:t}){let s=H.useRef();s.current==null&&(s.current=VE({window:t,v5Compat:!0}));let o=s.current,[l,h]=H.useState({action:o.action,location:o.location}),d=H.useCallback(p=>{H.startTransition(()=>h(p))},[h]);return H.useLayoutEffect(()=>o.listen(d),[o,d]),H.createElement(I0,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var e_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t_=H.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:d,target:p,to:y,preventScrollReset:w,viewTransition:T,...S},O){let{basename:U}=H.useContext(zn),$=typeof y=="string"&&e_.test(y),L,q=!1;if(typeof y=="string"&&$&&(L=y,Zy))try{let C=new URL(window.location.href),P=y.startsWith("//")?new URL(C.protocol+y):new URL(y),b=yi(P.pathname,U);P.origin===C.origin&&b!=null?y=b+P.search+P.hash:q=!0}catch{jn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=l0(y,{relative:o}),[ne,ce,Se]=$0(s,S),Te=J0(y,{replace:h,state:d,target:p,preventScrollReset:w,relative:o,viewTransition:T});function N(C){e&&e(C),C.defaultPrevented||Te(C)}let I=H.createElement("a",{...S,...Se,href:L||K,onClick:q||l?e:N,ref:K0(O,ce),target:p,"data-discover":!$&&t==="render"?"true":void 0});return ne&&!$?H.createElement(H.Fragment,null,I,H.createElement(H0,{page:K})):I});t_.displayName="Link";var Q0=H.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:d,children:p,...y},w){let T=Za(h,{relative:y.relative}),S=Or(),O=H.useContext(pc),{navigator:U,basename:$}=H.useContext(zn),L=O!=null&&rT(T)&&d===!0,q=U.encodeLocation?U.encodeLocation(T).pathname:T.pathname,K=S.pathname,ne=O&&O.navigation&&O.navigation.location?O.navigation.location.pathname:null;t||(K=K.toLowerCase(),ne=ne?ne.toLowerCase():null,q=q.toLowerCase()),ne&&$&&(ne=yi(ne,$)||ne);const ce=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let Se=K===q||!o&&K.startsWith(q)&&K.charAt(ce)==="/",Te=ne!=null&&(ne===q||!o&&ne.startsWith(q)&&ne.charAt(q.length)==="/"),N={isActive:Se,isPending:Te,isTransitioning:L},I=Se?e:void 0,C;typeof s=="function"?C=s(N):C=[s,Se?"active":null,Te?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(N):l;return H.createElement(t_,{...y,"aria-current":I,className:C,ref:w,style:P,to:h,viewTransition:d},typeof p=="function"?p(N):p)});Q0.displayName="NavLink";var Y0=H.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=Lu,action:d,onSubmit:p,relative:y,preventScrollReset:w,viewTransition:T,...S},O)=>{let U=tT(),$=nT(d,{relative:y}),L=h.toLowerCase()==="get"?"get":"post",q=typeof d=="string"&&e_.test(d),K=ne=>{if(p&&p(ne),ne.defaultPrevented)return;ne.preventDefault();let ce=ne.nativeEvent.submitter,Se=(ce==null?void 0:ce.getAttribute("formmethod"))||h;U(ce||ne.currentTarget,{fetcherKey:e,method:Se,navigate:t,replace:o,state:l,relative:y,preventScrollReset:w,viewTransition:T})};return H.createElement("form",{ref:O,method:L,action:$,onSubmit:s?p:K,...S,"data-discover":!q&&r==="render"?"true":void 0})});Y0.displayName="Form";function X0(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function n_(r){let e=H.useContext(Ro);return Xe(e,X0(r)),e}function J0(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let d=Ja(),p=Or(),y=Za(r,{relative:l});return H.useCallback(w=>{if(P0(w,e)){w.preventDefault();let T=t!==void 0?t:za(p)===za(y);d(r,{replace:T,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[p,d,y,t,s,e,r,o,l,h])}var Z0=0,eT=()=>`__${String(++Z0)}__`;function tT(){let{router:r}=n_("useSubmit"),{basename:e}=H.useContext(zn),t=v0();return H.useCallback(async(s,o={})=>{let{action:l,method:h,encType:d,formData:p,body:y}=D0(s,e);if(o.navigate===!1){let w=o.fetcherKey||eT();await r.fetch(w,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function nT(r,{relative:e}={}){let{basename:t}=H.useContext(zn),s=H.useContext(ir);Xe(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Za(r||".",{relative:e})},h=Or();if(r==null){l.search=h.search;let d=new URLSearchParams(l.search),p=d.getAll("index");if(p.some(w=>w==="")){d.delete("index"),p.filter(T=>T).forEach(T=>d.append("index",T));let w=d.toString();l.search=w?`?${w}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:kr([t,l.pathname])),za(l)}function rT(r,e={}){let t=H.useContext(qy);Xe(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=n_("useViewTransitionState"),o=Za(r,{relative:e.relative});if(!t.isTransitioning)return!1;let l=yi(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=yi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Ku(o.pathname,h)!=null||Ku(o.pathname,l)!=null}new TextEncoder;var Eg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},iT=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],p=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},i_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,p=o+2<r.length,y=p?r[o+2]:0,w=l>>2,T=(l&3)<<4|d>>4;let S=(d&15)<<2|y>>6,O=y&63;p||(O=64,h||(S=64)),s.push(t[w],t[T],t[S],t[O])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(r_(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):iT(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const T=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||T==null)throw new sT;const S=l<<2|d>>4;if(s.push(S),y!==64){const O=d<<4&240|y>>2;if(s.push(O),T!==64){const U=y<<6&192|T;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class sT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oT=function(r){const e=r_(r);return i_.encodeByteArray(e,!0)},Gu=function(r){return oT(r).replace(/\./g,"")},s_=function(r){try{return i_.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=()=>aT().__FIREBASE_DEFAULTS__,uT=()=>{if(typeof process>"u"||typeof Eg>"u")return;const r=Eg.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},cT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&s_(r[1]);return e&&JSON.parse(e)},gc=()=>{try{return lT()||uT()||cT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},o_=r=>{var e,t;return(t=(e=gc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[r]},hT=r=>{const e=o_(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},a_=()=>{var r;return(r=gc())===null||r===void 0?void 0:r.config},l_=r=>{var e;return(e=gc())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},r);return[Gu(JSON.stringify(t)),Gu(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function mT(){var r;const e=(r=gc())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yT(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function _T(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vT(){const r=Ut();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function wT(){return!mT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ET(){try{return typeof indexedDB=="object"}catch{return!1}}function TT(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="FirebaseError";class Lr extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=IT,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?ST(l,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new Lr(o,d,s)}}function ST(r,e){return r.replace(RT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const RT=/\{\$([^}]+)}/g;function CT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Qu(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Tg(l)&&Tg(h)){if(!Qu(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Tg(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(r){const e=[];for(const[t,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Na(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function Da(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function AT(r,e){const t=new kT(r,e);return t.subscribe.bind(t)}class kT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");PT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=yd),o.error===void 0&&(o.error=yd),o.complete===void 0&&(o.complete=yd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PT(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(r){return r&&r._delegate?r._delegate:r}class as{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new dT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(l){if(o)return null;throw l}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(DT(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&h.resolve(o)}return o}onInit(e,t){var s;const o=this.normalizeInstanceIdentifier(t),l=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;l.add(e),this.onInitCallbacks.set(o,l);const h=this.instances.get(o);return h&&e(h,o),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:NT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NT(r){return r===ns?void 0:r}function DT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(ke||(ke={}));const OT={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},LT=ke.INFO,VT={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},MT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=VT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hf{constructor(e){this.name=e,this._logLevel=LT,this._logHandler=MT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?OT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const FT=(r,e)=>e.some(t=>r instanceof t);let Ig,Sg;function UT(){return Ig||(Ig=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jT(){return Sg||(Sg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const u_=new WeakMap,Nd=new WeakMap,c_=new WeakMap,_d=new WeakMap,df=new WeakMap;function zT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(di(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&u_.set(t,r)}).catch(()=>{}),df.set(e,r),e}function BT(r){if(Nd.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Nd.set(r,e)}let Dd={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Nd.get(r);if(e==="objectStoreNames")return r.objectStoreNames||c_.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return di(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $T(r){Dd=r(Dd)}function HT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(vd(this),e,...t);return c_.set(s,e.sort?e.sort():[e]),di(s)}:jT().includes(r)?function(...e){return r.apply(vd(this),e),di(u_.get(this))}:function(...e){return di(r.apply(vd(this),e))}}function WT(r){return typeof r=="function"?HT(r):(r instanceof IDBTransaction&&BT(r),FT(r,UT())?new Proxy(r,Dd):r)}function di(r){if(r instanceof IDBRequest)return zT(r);if(_d.has(r))return _d.get(r);const e=WT(r);return e!==r&&(_d.set(r,e),df.set(e,r)),e}const vd=r=>df.get(r);function qT(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=di(h);return s&&h.addEventListener("upgradeneeded",p=>{s(di(h.result),p.oldVersion,p.newVersion,di(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),d.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const KT=["get","getKey","getAll","getAllKeys","count"],GT=["put","add","delete","clear"],wd=new Map;function Rg(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(wd.get(e))return wd.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=GT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||KT.includes(t)))return;const l=async function(h,...d){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&p.done]))[0]};return wd.set(e,l),l}$T(r=>({...r,get:(e,t,s)=>Rg(e,t)||r.get(e,t,s),has:(e,t)=>!!Rg(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(YT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function YT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const bd="@firebase/app",Cg="0.10.17";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new hf("@firebase/app"),XT="@firebase/app-compat",JT="@firebase/analytics-compat",ZT="@firebase/analytics",eI="@firebase/app-check-compat",tI="@firebase/app-check",nI="@firebase/auth",rI="@firebase/auth-compat",iI="@firebase/database",sI="@firebase/data-connect",oI="@firebase/database-compat",aI="@firebase/functions",lI="@firebase/functions-compat",uI="@firebase/installations",cI="@firebase/installations-compat",hI="@firebase/messaging",dI="@firebase/messaging-compat",fI="@firebase/performance",pI="@firebase/performance-compat",mI="@firebase/remote-config",gI="@firebase/remote-config-compat",yI="@firebase/storage",_I="@firebase/storage-compat",vI="@firebase/firestore",wI="@firebase/vertexai",EI="@firebase/firestore-compat",TI="firebase",II="11.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="[DEFAULT]",SI={[bd]:"fire-core",[XT]:"fire-core-compat",[ZT]:"fire-analytics",[JT]:"fire-analytics-compat",[tI]:"fire-app-check",[eI]:"fire-app-check-compat",[nI]:"fire-auth",[rI]:"fire-auth-compat",[iI]:"fire-rtdb",[sI]:"fire-data-connect",[oI]:"fire-rtdb-compat",[aI]:"fire-fn",[lI]:"fire-fn-compat",[uI]:"fire-iid",[cI]:"fire-iid-compat",[hI]:"fire-fcm",[dI]:"fire-fcm-compat",[fI]:"fire-perf",[pI]:"fire-perf-compat",[mI]:"fire-rc",[gI]:"fire-rc-compat",[yI]:"fire-gcs",[_I]:"fire-gcs-compat",[vI]:"fire-fst",[EI]:"fire-fst-compat",[wI]:"fire-vertex","fire-js":"fire-js",[TI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new Map,RI=new Map,Ld=new Map;function Ag(r,e){try{r.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function mo(r){const e=r.name;if(Ld.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;Ld.set(e,r);for(const t of Yu.values())Ag(t,r);for(const t of RI.values())Ag(t,r);return!0}function ff(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function Mn(r){return r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new el("app","Firebase",CI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,t,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new as("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=II;function h_(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s=Object.assign({name:Od,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw fi.create("bad-app-name",{appName:String(o)});if(t||(t=a_()),!t)throw fi.create("no-options");const l=Yu.get(o);if(l){if(Qu(t,l.options)&&Qu(s,l.config))return l;throw fi.create("duplicate-app",{appName:o})}const h=new bT(o);for(const p of Ld.values())h.addComponent(p);const d=new AI(t,s,h);return Yu.set(o,d),d}function d_(r=Od){const e=Yu.get(r);if(!e&&r===Od&&a_())return h_();if(!e)throw fi.create("no-app",{appName:r});return e}function pi(r,e,t){var s;let o=(s=SI[r])!==null&&s!==void 0?s:r;t&&(o+=`-${t}`);const l=o.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const d=[`Unable to register library "${o}" with version "${e}":`];l&&d.push(`library name "${o}" contains illegal characters (whitespace or "/")`),l&&h&&d.push("and"),h&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(d.join(" "));return}mo(new as(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI="firebase-heartbeat-database",PI=1,Ba="firebase-heartbeat-store";let Ed=null;function f_(){return Ed||(Ed=qT(kI,PI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ba)}catch(t){console.warn(t)}}}}).catch(r=>{throw fi.create("idb-open",{originalErrorMessage:r.message})})),Ed}async function xI(r){try{const t=(await f_()).transaction(Ba),s=await t.objectStore(Ba).get(p_(r));return await t.done,s}catch(e){if(e instanceof Lr)xr.warn(e.message);else{const t=fi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(t.message)}}}async function kg(r,e){try{const s=(await f_()).transaction(Ba,"readwrite");await s.objectStore(Ba).put(e,p_(r)),await s.done}catch(t){if(t instanceof Lr)xr.warn(t.message);else{const s=fi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xr.warn(s.message)}}}function p_(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=1024,DI=30*24*60*60*1e3;class bI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Pg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const d=new Date(h.date).valueOf();return Date.now()-d<=DI}),this._storage.overwrite(this._heartbeatsCache))}catch(s){xr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Pg(),{heartbeatsToSend:s,unsentEntries:o}=OI(this._heartbeatsCache.heartbeats),l=Gu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xr.warn(t),""}}}function Pg(){return new Date().toISOString().substring(0,10)}function OI(r,e=NI){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),xg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),xg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class LI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ET()?TT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await xI(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const o=await this.read();return kg(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function xg(r){return Gu(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VI(r){mo(new as("platform-logger",e=>new QT(e),"PRIVATE")),mo(new as("heartbeat",e=>new bI(e),"PRIVATE")),pi(bd,Cg,r),pi(bd,Cg,"esm2017"),pi("fire-js","")}VI("");function pf(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(t[s[o]]=r[s[o]]);return t}function m_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MI=m_,g_=new el("auth","Firebase",m_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xu=new hf("@firebase/auth");function FI(r,...e){Xu.logLevel<=ke.WARN&&Xu.warn(`Auth (${Ao}): ${r}`,...e)}function Mu(r,...e){Xu.logLevel<=ke.ERROR&&Xu.error(`Auth (${Ao}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(r,...e){throw gf(r,...e)}function Fn(r,...e){return gf(r,...e)}function mf(r,e,t){const s=Object.assign(Object.assign({},MI()),{[e]:t});return new el("auth","Firebase",s).create(e,{appName:r.name})}function Pr(r){return mf(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function UI(r,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&En(r,"argument-error"),mf(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function gf(r,...e){if(typeof r!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(t,...s)}return g_.create(r,...e)}function _e(r,e,...t){if(!r)throw gf(e,...t)}function Rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Mu(e),new Error(e)}function Nr(r,e){r||Rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function jI(){return Ng()==="http:"||Ng()==="https:"}function Ng(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jI()||yT()||"connection"in navigator)?navigator.onLine:!0}function BI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nr(t>e,"Short delay should be less than long delay!"),this.isMobile=pT()||_T()}get(){return zI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(r,e){Nr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new nl(3e4,6e4);function Ii(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function Si(r,e,t,s,o={}){return __(r,o,async()=>{let l={},h={};s&&(e==="GET"?h=s:l={body:JSON.stringify(s)});const d=tl(Object.assign({key:r.config.apiKey},h)).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const y=Object.assign({method:e,headers:p},l);return gT()||(y.referrerPolicy="no-referrer"),y_.fetch()(v_(r,r.config.apiHost,t,d),y)})}async function __(r,e,t){r._canInitEmulator=!1;const s=Object.assign(Object.assign({},$I),e);try{const o=new qI(r),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await l.json();if("needConfirmation"in h)throw ku(r,"account-exists-with-different-credential",h);if(l.ok&&!("errorMessage"in h))return h;{const d=l.ok?h.errorMessage:h.error.message,[p,y]=d.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ku(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ku(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw ku(r,"user-disabled",h);const w=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw mf(r,w,y);En(r,w)}}catch(o){if(o instanceof Lr)throw o;En(r,"network-request-failed",{message:String(o)})}}async function rl(r,e,t,s,o={}){const l=await Si(r,e,t,s,o);return"mfaPendingCredential"in l&&En(r,"multi-factor-auth-required",{_serverResponse:l}),l}function v_(r,e,t,s){const o=`${e}${t}?${s}`;return r.config.emulator?yf(r.config,o):`${r.config.apiScheme}://${o}`}function WI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(Fn(this.auth,"network-request-failed")),HI.get())})}}function ku(r,e,t){const s={appName:r.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=Fn(r,e,s);return o.customData._tokenResponse=t,o}function Dg(r){return r!==void 0&&r.enterprise!==void 0}class KI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return WI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function GI(r,e){return Si(r,"GET","/v2/recaptchaConfig",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QI(r,e){return Si(r,"POST","/v1/accounts:delete",e)}async function w_(r,e){return Si(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Va(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YI(r,e=!1){const t=jt(r),s=await t.getIdToken(e),o=_f(s);_e(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,h=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:Va(Td(o.auth_time)),issuedAtTime:Va(Td(o.iat)),expirationTime:Va(Td(o.exp)),signInProvider:h||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Td(r){return Number(r)*1e3}function _f(r){const[e,t,s]=r.split(".");if(e===void 0||t===void 0||s===void 0)return Mu("JWT malformed, contained fewer than 3 sections"),null;try{const o=s_(t);return o?JSON.parse(o):(Mu("Failed to decode base64 JWT payload"),null)}catch(o){return Mu("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function bg(r){const e=_f(r);return _e(e,"internal-error"),_e(typeof e.exp<"u","internal-error"),_e(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(r,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Lr&&XI(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function XI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Va(this.lastLoginAt),this.creationTime=Va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(r){var e;const t=r.auth,s=await r.getIdToken(),o=await $a(r,w_(t,{idToken:s}));_e(o==null?void 0:o.users.length,t,"internal-error");const l=o.users[0];r._notifyReloadListener(l);const h=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?E_(l.providerUserInfo):[],d=eS(r.providerData,h),p=r.isAnonymous,y=!(r.email&&l.passwordHash)&&!(d!=null&&d.length),w=p?y:!1,T={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:d,metadata:new Md(l.createdAt,l.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function ZI(r){const e=jt(r);await Ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eS(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function E_(r){return r.map(e=>{var{providerId:t}=e,s=pf(e,["providerId"]);return{providerId:t,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(r,e){const t=await __(r,{},async()=>{const s=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=r.config,h=v_(r,o,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();return d["Content-Type"]="application/x-www-form-urlencoded",y_.fetch()(h,{method:"POST",headers:d,body:s})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function nS(r,e){return Si(r,"POST","/v2/accounts:revokeToken",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_e(e.idToken,"internal-error"),_e(typeof e.idToken<"u","internal-error"),_e(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_e(e.length!==0,"internal-error");const t=bg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(_e(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await tS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,h=new co;return s&&(_e(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(_e(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),l&&(_e(typeof l=="number","internal-error",{appName:e}),h.expirationTime=l),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new co,this.toJSON())}_performRefresh(){return Rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(r,e){_e(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Cr{constructor(e){var{uid:t,auth:s,stsTokenManager:o}=e,l=pf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Md(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await $a(this,this.stsTokenManager.getToken(this.auth,e));return _e(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YI(this,e)}reload(){return ZI(this)}_assign(e){this!==e&&(_e(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_e(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Ju(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mn(this.auth.app))return Promise.reject(Pr(this.auth));const e=await this.getIdToken();return await $a(this,QI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var s,o,l,h,d,p,y,w;const T=(s=t.displayName)!==null&&s!==void 0?s:void 0,S=(o=t.email)!==null&&o!==void 0?o:void 0,O=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,U=(h=t.photoURL)!==null&&h!==void 0?h:void 0,$=(d=t.tenantId)!==null&&d!==void 0?d:void 0,L=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,q=(y=t.createdAt)!==null&&y!==void 0?y:void 0,K=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:ne,emailVerified:ce,isAnonymous:Se,providerData:Te,stsTokenManager:N}=t;_e(ne&&N,e,"internal-error");const I=co.fromJSON(this.name,N);_e(typeof ne=="string",e,"internal-error"),ai(T,e.name),ai(S,e.name),_e(typeof ce=="boolean",e,"internal-error"),_e(typeof Se=="boolean",e,"internal-error"),ai(O,e.name),ai(U,e.name),ai($,e.name),ai(L,e.name),ai(q,e.name),ai(K,e.name);const C=new Cr({uid:ne,auth:e,email:S,emailVerified:ce,displayName:T,isAnonymous:Se,photoURL:U,phoneNumber:O,tenantId:$,stsTokenManager:I,createdAt:q,lastLoginAt:K});return Te&&Array.isArray(Te)&&(C.providerData=Te.map(P=>Object.assign({},P))),L&&(C._redirectEventId=L),C}static async _fromIdTokenResponse(e,t,s=!1){const o=new co;o.updateFromServerResponse(t);const l=new Cr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ju(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];_e(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?E_(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),d=new co;d.updateFromIdToken(s);const p=new Cr({uid:o.localId,auth:e,stsTokenManager:d,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Md(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new Map;function Ar(r){Nr(r instanceof Function,"Expected a class definition");let e=Og.get(r);return e?(Nr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Og.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T_.type="NONE";const Lg=T_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(r,e,t){return`firebase:${r}:${e}:${t}`}class ho{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Fu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Fu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Cr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new ho(Ar(Lg),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Ar(Lg);const h=Fu(s,e.config.apiKey,e.name);let d=null;for(const y of t)try{const w=await y._get(h);if(w){const T=Cr._fromJSON(e,w);y!==l&&(d=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new ho(l,e,s):(l=p[0],d&&await l._set(h,d.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(h)}catch{}})),new ho(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vg(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(I_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(k_(e))return"Blackberry";if(P_(e))return"Webos";if(S_(e))return"Safari";if((e.includes("chrome/")||R_(e))&&!e.includes("edge/"))return"Chrome";if(A_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function I_(r=Ut()){return/firefox\//i.test(r)}function S_(r=Ut()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R_(r=Ut()){return/crios\//i.test(r)}function C_(r=Ut()){return/iemobile/i.test(r)}function A_(r=Ut()){return/android/i.test(r)}function k_(r=Ut()){return/blackberry/i.test(r)}function P_(r=Ut()){return/webos/i.test(r)}function vf(r=Ut()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function rS(r=Ut()){var e;return vf(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iS(){return vT()&&document.documentMode===10}function x_(r=Ut()){return vf(r)||A_(r)||P_(r)||k_(r)||/windows phone/i.test(r)||C_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(r,e=[]){let t;switch(r){case"Browser":t=Vg(Ut());break;case"Worker":t=`${Vg(Ut())}-${r}`;break;default:t=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ao}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((h,d)=>{try{const p=e(l);h(p)}catch(p){d(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oS(r,e={}){return Si(r,"GET","/v2/passwordPolicy",Ii(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS=6;class lS{constructor(e){var t,s,o,l;const h=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=h.minPasswordLength)!==null&&t!==void 0?t:aS,h.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=h.maxPasswordLength),h.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=h.containsLowercaseCharacter),h.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=h.containsUppercaseCharacter),h.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=h.containsNumericCharacter),h.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=h.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,s,o,l,h,d;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(h=p.containsNumericCharacter)!==null&&h!==void 0?h:!0),p.isValid&&(p.isValid=(d=p.containsNonAlphanumericCharacter)!==null&&d!==void 0?d:!0),p}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mg(this),this.idTokenSubscription=new Mg(this),this.beforeStateQueue=new sS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=g_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ar(t)),this._initializationPromise=this.queue(async()=>{var s,o;if(!this._deleted&&(this.persistenceManager=await ho.create(this,e),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await w_(this,{idToken:e}),s=await Cr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Mn(this.app)){const h=this.app.settings.authIdToken;return h?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(h).then(d,d))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const h=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,d=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!h||h===d)&&(p!=null&&p.user)&&(o=p.user,l=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(o)}catch(h){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return _e(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ju(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mn(this.app))return Promise.reject(Pr(this));const t=e?jt(e):null;return t&&_e(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&_e(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mn(this.app)?Promise.reject(Pr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mn(this.app)?Promise.reject(Pr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oS(this),t=new lS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await nS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ar(e)||this._popupRedirectResolver;_e(t,this,"argument-error"),this.redirectPersistenceManager=await ho.create(this,[Ar(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let h=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(_e(d,this,"internal-error"),d.then(()=>{h||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _e(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=N_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(t["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(t["X-Firebase-AppCheck"]=o),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&FI(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ri(r){return jt(r)}class Mg{constructor(e){this.auth=e,this.observer=null,this.addObserver=AT(t=>this.observer=t)}get next(){return _e(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cS(r){yc=r}function D_(r){return yc.loadJS(r)}function hS(){return yc.recaptchaEnterpriseScript}function dS(){return yc.gapiScript}function fS(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class pS{constructor(){this.enterprise=new mS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class mS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const gS="recaptcha-enterprise",b_="NO_RECAPTCHA";class yS{constructor(e){this.type=gS,this.auth=Ri(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(h,d)=>{GI(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)d(new Error("recaptcha Enterprise site key undefined"));else{const y=new KI(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,h(y.siteKey)}}).catch(p=>{d(p)})})}function o(l,h,d){const p=window.grecaptcha;Dg(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{h(y)}).catch(()=>{h(b_)})}):d(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pS().execute("siteKey",{action:"verify"}):new Promise((l,h)=>{s(this.auth).then(d=>{if(!t&&Dg(window.grecaptcha))o(d,l,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=hS();p.length!==0&&(p+=d),D_(p).then(()=>{o(d,l,h)}).catch(y=>{h(y)})}}).catch(d=>{h(d)})})}}async function Fg(r,e,t,s=!1,o=!1){const l=new yS(r);let h;if(o)h=b_;else try{h=await l.verify(t)}catch{h=await l.verify(t,!0)}const d=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in d){const p=d.phoneEnrollmentInfo.phoneNumber,y=d.phoneEnrollmentInfo.recaptchaToken;Object.assign(d,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in d){const p=d.phoneSignInInfo.recaptchaToken;Object.assign(d,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return d}return s?Object.assign(d,{captchaResp:h}):Object.assign(d,{captchaResponse:h}),Object.assign(d,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(d,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),d}async function Fd(r,e,t,s,o){var l;if(!((l=r._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const h=await Fg(r,e,t,t==="getOobCode");return s(r,h)}else return s(r,e).catch(async h=>{if(h.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await Fg(r,e,t,t==="getOobCode");return s(r,d)}else return Promise.reject(h)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(r,e){const t=ff(r,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Qu(l,e??{}))return o;En(o,"already-initialized")}return t.initialize({options:e})}function vS(r,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(Ar);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function wS(r,e,t){const s=Ri(r);_e(s._canInitEmulator,s,"emulator-config-failed"),_e(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=O_(e),{host:h,port:d}=ES(e),p=d===null?"":`:${d}`;s.config.emulator={url:`${l}//${h}${p}/`},s.settings.appVerificationDisabledForTesting=!0,s.emulatorConfig=Object.freeze({host:h,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})}),TS()}function O_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function ES(r){const e=O_(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:Ug(s.substr(l.length+1))}}else{const[l,h]=s.split(":");return{host:l,port:Ug(h)}}}function Ug(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function TS(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rr("not implemented")}_getIdTokenResponse(e){return Rr("not implemented")}_linkToIdToken(e,t){return Rr("not implemented")}_getReauthenticationResolver(e){return Rr("not implemented")}}async function IS(r,e){return Si(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SS(r,e){return rl(r,"POST","/v1/accounts:signInWithPassword",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RS(r,e){return rl(r,"POST","/v1/accounts:signInWithEmailLink",Ii(r,e))}async function CS(r,e){return rl(r,"POST","/v1/accounts:signInWithEmailLink",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha extends wf{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ha(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ha(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(e,t,"signInWithPassword",SS);case"emailLink":return RS(e,{email:this._email,oobCode:this._password});default:En(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fd(e,s,"signUpPassword",IS);case"emailLink":return CS(e,{idToken:t,email:this._email,oobCode:this._password});default:En(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fo(r,e){return rl(r,"POST","/v1/accounts:signInWithIdp",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="http://localhost";class ls extends wf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ls(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):En("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=t,l=pf(t,["providerId","signInMethod"]);if(!s||!o)return null;const h=new ls(s,o);return h.idToken=l.idToken||void 0,h.accessToken=l.accessToken||void 0,h.secret=l.secret,h.nonce=l.nonce,h.pendingToken=l.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return fo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,fo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,fo(e,t)}buildRequest(){const e={requestUri:AS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=tl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PS(r){const e=Na(Da(r)).link,t=e?Na(Da(e)).deep_link_id:null,s=Na(Da(r)).deep_link_id;return(s?Na(Da(s)).link:null)||s||t||e||r}class Ef{constructor(e){var t,s,o,l,h,d;const p=Na(Da(e)),y=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(s=p.oobCode)!==null&&s!==void 0?s:null,T=kS((o=p.mode)!==null&&o!==void 0?o:null);_e(y&&w&&T,"argument-error"),this.apiKey=y,this.operation=T,this.code=w,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(h=p.languageCode)!==null&&h!==void 0?h:null,this.tenantId=(d=p.tenantId)!==null&&d!==void 0?d:null}static parseLink(e){const t=PS(e);try{return new Ef(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.providerId=ko.PROVIDER_ID}static credential(e,t){return Ha._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=Ef.parseLink(t);return _e(s,"argument-error"),Ha._fromEmailAndCode(e,s.code,s.tenantId)}}ko.PROVIDER_ID="password";ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends Tf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends il{constructor(){super("facebook.com")}static credential(e){return ls._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return li.credential(e.oauthAccessToken)}catch{return null}}}li.FACEBOOK_SIGN_IN_METHOD="facebook.com";li.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends il{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ls._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Sr.credential(t,s)}catch{return null}}}Sr.GOOGLE_SIGN_IN_METHOD="google.com";Sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends il{constructor(){super("github.com")}static credential(e){return ls._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.GITHUB_SIGN_IN_METHOD="github.com";ui.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci extends il{constructor(){super("twitter.com")}static credential(e,t){return ls._fromParams({providerId:ci.PROVIDER_ID,signInMethod:ci.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ci.credentialFromTaggedObject(e)}static credentialFromError(e){return ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ci.credential(t,s)}catch{return null}}}ci.TWITTER_SIGN_IN_METHOD="twitter.com";ci.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(r,e){return rl(r,"POST","/v1/accounts:signUp",Ii(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await Cr._fromIdTokenResponse(e,s,o),h=jg(s);return new us({user:l,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=jg(s);return new us({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function jg(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends Lr{constructor(e,t,s,o){var l;super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Zu.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Zu(e,t,s,o)}}function L_(r,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Zu._fromErrorAndOperation(r,l,e,s):l})}async function NS(r,e,t=!1){const s=await $a(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return us._forOperation(r,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DS(r,e,t=!1){const{auth:s}=r;if(Mn(s.app))return Promise.reject(Pr(s));const o="reauthenticate";try{const l=await $a(r,L_(s,o,e,r),t);_e(l.idToken,s,"internal-error");const h=_f(l.idToken);_e(h,s,"internal-error");const{sub:d}=h;return _e(r.uid===d,s,"user-mismatch"),us._forOperation(r,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&En(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V_(r,e,t=!1){if(Mn(r.app))return Promise.reject(Pr(r));const s="signIn",o=await L_(r,s,e),l=await us._fromIdTokenResponse(r,s,o);return t||await r._updateCurrentUser(l.user),l}async function bS(r,e){return V_(Ri(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M_(r){const e=Ri(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function OS(r,e,t){if(Mn(r.app))return Promise.reject(Pr(r));const s=Ri(r),h=await Fd(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&M_(r),p}),d=await us._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(d.user),d}function LS(r,e,t){return Mn(r.app)?Promise.reject(Pr(r)):bS(jt(r),ko.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&M_(r),s})}function VS(r,e,t,s){return jt(r).onIdTokenChanged(e,t,s)}function MS(r,e,t){return jt(r).beforeAuthStateChanged(e,t)}function FS(r){return jt(r).signOut()}const ec="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=1e3,jS=10;class U_ extends F_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=x_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,d,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},l=this.storage.getItem(s);iS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,jS):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},US)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}U_.type="LOCAL";const zS=U_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends F_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}j_.type="SESSION";const z_=j_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new _c(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,h=this.handlersMap[o];if(!(h!=null&&h.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const d=Array.from(h).map(async y=>y(t.origin,l)),p=await BS(d);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_c.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(r="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,h;return new Promise((d,p)=>{const y=If("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(S.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zn(){return window}function HS(r){Zn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(){return typeof Zn().WorkerGlobalScope<"u"&&typeof Zn().importScripts=="function"}async function WS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function KS(){return B_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_="firebaseLocalStorageDb",GS=1,tc="firebaseLocalStorage",H_="fbase_key";class sl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vc(r,e){return r.transaction([tc],e?"readwrite":"readonly").objectStore(tc)}function QS(){const r=indexedDB.deleteDatabase($_);return new sl(r).toPromise()}function Ud(){const r=indexedDB.open($_,GS);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(tc,{keyPath:H_})}catch(o){t(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(tc)?e(s):(s.close(),await QS(),e(await Ud()))})})}async function zg(r,e,t){const s=vc(r,!0).put({[H_]:e,value:t});return new sl(s).toPromise()}async function YS(r,e){const t=vc(r,!1).get(e),s=await new sl(t).toPromise();return s===void 0?null:s.value}function Bg(r,e){const t=vc(r,!0).delete(e);return new sl(t).toPromise()}const XS=800,JS=3;class W_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ud(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>JS)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_c._getInstance(KS()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await WS(),!this.activeServiceWorker)return;this.sender=new $S(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((t=s[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ud();return await zg(e,ec,"1"),await Bg(e,ec),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>zg(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>YS(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Bg(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=vc(o,!1).getAll();return new sl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),XS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}W_.type="LOCAL";const ZS=W_;new nl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q_(r,e){return e?Ar(e):(_e(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf extends wf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return fo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return fo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function e1(r){return V_(r.auth,new Sf(r),r.bypassAuthState)}function t1(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),DS(t,new Sf(r),r.bypassAuthState)}async function n1(r){const{auth:e,user:t}=r;return _e(t,e,"internal-error"),NS(t,new Sf(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:h,type:d}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e1;case"linkViaPopup":case"linkViaRedirect":return n1;case"reauthViaPopup":case"reauthViaRedirect":return t1;default:En(this.auth,"internal-error")}}resolve(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new nl(2e3,1e4);async function G_(r,e,t){if(Mn(r.app))return Promise.reject(Fn(r,"operation-not-supported-in-this-environment"));const s=Ri(r);UI(r,e,Tf);const o=q_(s,t);return new rs(s,"signInViaPopup",e,o).executeNotNull()}class rs extends K_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,rs.currentPopupAction&&rs.currentPopupAction.cancel(),rs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _e(e,this.auth,"internal-error"),e}async onExecution(){Nr(this.filter.length===1,"Popup operations only handle one event");const e=If();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if(!((s=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r1.get())};e()}}rs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="pendingRedirect",Uu=new Map;class s1 extends K_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Uu.get(this.auth._key());if(!e){try{const s=await o1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Uu.set(this.auth._key(),e)}return this.bypassAuthState||Uu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o1(r,e){const t=u1(e),s=l1(r);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function a1(r,e){Uu.set(r._key(),e)}function l1(r){return Ar(r._redirectPersistence)}function u1(r){return Fu(i1,r.config.apiKey,r.name)}async function c1(r,e,t=!1){if(Mn(r.app))return Promise.reject(Pr(r));const s=Ri(r),o=q_(s,e),h=await new s1(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1=10*60*1e3;class d1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f1(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Q_(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";t.onError(Fn(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=h1&&this.cachedEventUids.clear(),this.cachedEventUids.has($g(e))}saveEventToCache(e){this.cachedEventUids.add($g(e)),this.lastProcessedEventTime=Date.now()}}function $g(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Q_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f1(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(r,e={}){return Si(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g1=/^https?/;async function y1(r){if(r.config.emulator)return;const{authorizedDomains:e}=await p1(r);for(const t of e)try{if(_1(t))return}catch{}En(r,"unauthorized-domain")}function _1(r){const e=Vd(),{protocol:t,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&s===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!g1.test(t))return!1;if(m1.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=new nl(3e4,6e4);function Hg(){const r=Zn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function w1(r){return new Promise((e,t)=>{var s,o,l;function h(){Hg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Hg(),t(Fn(r,"network-request-failed"))},timeout:v1.get()})}if(!((o=(s=Zn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((l=Zn().gapi)===null||l===void 0)&&l.load)h();else{const d=fS("iframefcb");return Zn()[d]=()=>{gapi.load?h():t(Fn(r,"network-request-failed"))},D_(`${dS()}?onload=${d}`).catch(p=>t(p))}}).catch(e=>{throw ju=null,e})}let ju=null;function E1(r){return ju=ju||w1(r),ju}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1=new nl(5e3,15e3),I1="__/auth/iframe",S1="emulator/auth/iframe",R1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},C1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function A1(r){const e=r.config;_e(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?yf(e,S1):`https://${r.config.authDomain}/${I1}`,s={apiKey:e.apiKey,appName:r.name,v:Ao},o=C1.get(r.config.apiHost);o&&(s.eid=o);const l=r._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${tl(s).slice(1)}`}async function k1(r){const e=await E1(r),t=Zn().gapi;return _e(t,r,"internal-error"),e.open({where:document.body,url:A1(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:R1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const h=Fn(r,"network-request-failed"),d=Zn().setTimeout(()=>{l(h)},T1.get());function p(){Zn().clearTimeout(d),o(s)}s.ping(p).then(p,()=>{l(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},x1=500,N1=600,D1="_blank",b1="http://localhost";class Wg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function O1(r,e,t,s=x1,o=N1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const p=Object.assign(Object.assign({},P1),{width:s.toString(),height:o.toString(),top:l,left:h}),y=Ut().toLowerCase();t&&(d=R_(y)?D1:t),I_(y)&&(e=e||b1,p.scrollbars="yes");const w=Object.entries(p).reduce((S,[O,U])=>`${S}${O}=${U},`,"");if(rS(y)&&d!=="_self")return L1(e||"",d),new Wg(null);const T=window.open(e||"",d,w);_e(T,r,"popup-blocked");try{T.focus()}catch{}return new Wg(T)}function L1(r,e){const t=document.createElement("a");t.href=r,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="__/auth/handler",M1="emulator/auth/handler",F1=encodeURIComponent("fac");async function qg(r,e,t,s,o,l){_e(r.config.authDomain,r,"auth-domain-config-required"),_e(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:s,v:Ao,eventId:o};if(e instanceof Tf){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",CT(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,T]of Object.entries({}))h[w]=T}if(e instanceof il){const w=e.getScopes().filter(T=>T!=="");w.length>0&&(h.scopes=w.join(","))}r.tenantId&&(h.tid=r.tenantId);const d=h;for(const w of Object.keys(d))d[w]===void 0&&delete d[w];const p=await r._getAppCheckToken(),y=p?`#${F1}=${encodeURIComponent(p)}`:"";return`${U1(r)}?${tl(d).slice(1)}${y}`}function U1({config:r}){return r.emulator?yf(r,M1):`https://${r.authDomain}/${V1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Id="webStorageSupport";class j1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=z_,this._completeRedirectFn=c1,this._overrideRedirectResult=a1}async _openPopup(e,t,s,o){var l;Nr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const h=await qg(e,t,s,Vd(),o);return O1(e,h,If())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await qg(e,t,s,Vd(),o);return HS(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Nr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await k1(e),s=new d1(e);return t.register("authEvent",o=>(_e(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Id,{type:Id},o=>{var l;const h=(l=o==null?void 0:o[0])===null||l===void 0?void 0:l[Id];h!==void 0&&t(!!h),En(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=y1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return x_()||S_()||vf()}}const z1=j1;var Kg="@firebase/auth",Gg="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_e(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function H1(r){mo(new as("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:h,authDomain:d}=s.options;_e(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:N_(r)},y=new uS(s,o,l,p);return vS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),mo(new as("auth-internal",e=>{const t=Ri(e.getProvider("auth").getImmediate());return(s=>new B1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),pi(Kg,Gg,$1(r)),pi(Kg,Gg,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1=5*60,q1=l_("authIdTokenMaxAge")||W1;let Qg=null;const K1=r=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>q1)return;const o=t==null?void 0:t.token;Qg!==o&&(Qg=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function G1(r=d_()){const e=ff(r,"auth");if(e.isInitialized())return e.getImmediate();const t=_S(r,{popupRedirectResolver:z1,persistence:[ZS,zS,z_]}),s=l_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const h=K1(l.toString());MS(t,h,()=>h(t.currentUser)),VS(t,d=>h(d))}}const o=o_("auth");return o&&wS(t,`http://${o}`),t}function Q1(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}cS({loadJS(r){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const l=Fn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",Q1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});H1("Browser");var Y1="firebase",X1="11.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pi(Y1,X1,"app");var Yg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,Y_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function C(){}C.prototype=I.prototype,N.D=I.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(P,b,M){for(var A=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)A[nt-2]=arguments[nt];return I.prototype[b].apply(P,A)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,I,C){C||(C=0);var P=Array(16);if(typeof I=="string")for(var b=0;16>b;++b)P[b]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(b=0;16>b;++b)P[b]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=N.g[0],C=N.g[1],b=N.g[2];var M=N.g[3],A=I+(M^C&(b^M))+P[0]+3614090360&4294967295;I=C+(A<<7&4294967295|A>>>25),A=M+(b^I&(C^b))+P[1]+3905402710&4294967295,M=I+(A<<12&4294967295|A>>>20),A=b+(C^M&(I^C))+P[2]+606105819&4294967295,b=M+(A<<17&4294967295|A>>>15),A=C+(I^b&(M^I))+P[3]+3250441966&4294967295,C=b+(A<<22&4294967295|A>>>10),A=I+(M^C&(b^M))+P[4]+4118548399&4294967295,I=C+(A<<7&4294967295|A>>>25),A=M+(b^I&(C^b))+P[5]+1200080426&4294967295,M=I+(A<<12&4294967295|A>>>20),A=b+(C^M&(I^C))+P[6]+2821735955&4294967295,b=M+(A<<17&4294967295|A>>>15),A=C+(I^b&(M^I))+P[7]+4249261313&4294967295,C=b+(A<<22&4294967295|A>>>10),A=I+(M^C&(b^M))+P[8]+1770035416&4294967295,I=C+(A<<7&4294967295|A>>>25),A=M+(b^I&(C^b))+P[9]+2336552879&4294967295,M=I+(A<<12&4294967295|A>>>20),A=b+(C^M&(I^C))+P[10]+4294925233&4294967295,b=M+(A<<17&4294967295|A>>>15),A=C+(I^b&(M^I))+P[11]+2304563134&4294967295,C=b+(A<<22&4294967295|A>>>10),A=I+(M^C&(b^M))+P[12]+1804603682&4294967295,I=C+(A<<7&4294967295|A>>>25),A=M+(b^I&(C^b))+P[13]+4254626195&4294967295,M=I+(A<<12&4294967295|A>>>20),A=b+(C^M&(I^C))+P[14]+2792965006&4294967295,b=M+(A<<17&4294967295|A>>>15),A=C+(I^b&(M^I))+P[15]+1236535329&4294967295,C=b+(A<<22&4294967295|A>>>10),A=I+(b^M&(C^b))+P[1]+4129170786&4294967295,I=C+(A<<5&4294967295|A>>>27),A=M+(C^b&(I^C))+P[6]+3225465664&4294967295,M=I+(A<<9&4294967295|A>>>23),A=b+(I^C&(M^I))+P[11]+643717713&4294967295,b=M+(A<<14&4294967295|A>>>18),A=C+(M^I&(b^M))+P[0]+3921069994&4294967295,C=b+(A<<20&4294967295|A>>>12),A=I+(b^M&(C^b))+P[5]+3593408605&4294967295,I=C+(A<<5&4294967295|A>>>27),A=M+(C^b&(I^C))+P[10]+38016083&4294967295,M=I+(A<<9&4294967295|A>>>23),A=b+(I^C&(M^I))+P[15]+3634488961&4294967295,b=M+(A<<14&4294967295|A>>>18),A=C+(M^I&(b^M))+P[4]+3889429448&4294967295,C=b+(A<<20&4294967295|A>>>12),A=I+(b^M&(C^b))+P[9]+568446438&4294967295,I=C+(A<<5&4294967295|A>>>27),A=M+(C^b&(I^C))+P[14]+3275163606&4294967295,M=I+(A<<9&4294967295|A>>>23),A=b+(I^C&(M^I))+P[3]+4107603335&4294967295,b=M+(A<<14&4294967295|A>>>18),A=C+(M^I&(b^M))+P[8]+1163531501&4294967295,C=b+(A<<20&4294967295|A>>>12),A=I+(b^M&(C^b))+P[13]+2850285829&4294967295,I=C+(A<<5&4294967295|A>>>27),A=M+(C^b&(I^C))+P[2]+4243563512&4294967295,M=I+(A<<9&4294967295|A>>>23),A=b+(I^C&(M^I))+P[7]+1735328473&4294967295,b=M+(A<<14&4294967295|A>>>18),A=C+(M^I&(b^M))+P[12]+2368359562&4294967295,C=b+(A<<20&4294967295|A>>>12),A=I+(C^b^M)+P[5]+4294588738&4294967295,I=C+(A<<4&4294967295|A>>>28),A=M+(I^C^b)+P[8]+2272392833&4294967295,M=I+(A<<11&4294967295|A>>>21),A=b+(M^I^C)+P[11]+1839030562&4294967295,b=M+(A<<16&4294967295|A>>>16),A=C+(b^M^I)+P[14]+4259657740&4294967295,C=b+(A<<23&4294967295|A>>>9),A=I+(C^b^M)+P[1]+2763975236&4294967295,I=C+(A<<4&4294967295|A>>>28),A=M+(I^C^b)+P[4]+1272893353&4294967295,M=I+(A<<11&4294967295|A>>>21),A=b+(M^I^C)+P[7]+4139469664&4294967295,b=M+(A<<16&4294967295|A>>>16),A=C+(b^M^I)+P[10]+3200236656&4294967295,C=b+(A<<23&4294967295|A>>>9),A=I+(C^b^M)+P[13]+681279174&4294967295,I=C+(A<<4&4294967295|A>>>28),A=M+(I^C^b)+P[0]+3936430074&4294967295,M=I+(A<<11&4294967295|A>>>21),A=b+(M^I^C)+P[3]+3572445317&4294967295,b=M+(A<<16&4294967295|A>>>16),A=C+(b^M^I)+P[6]+76029189&4294967295,C=b+(A<<23&4294967295|A>>>9),A=I+(C^b^M)+P[9]+3654602809&4294967295,I=C+(A<<4&4294967295|A>>>28),A=M+(I^C^b)+P[12]+3873151461&4294967295,M=I+(A<<11&4294967295|A>>>21),A=b+(M^I^C)+P[15]+530742520&4294967295,b=M+(A<<16&4294967295|A>>>16),A=C+(b^M^I)+P[2]+3299628645&4294967295,C=b+(A<<23&4294967295|A>>>9),A=I+(b^(C|~M))+P[0]+4096336452&4294967295,I=C+(A<<6&4294967295|A>>>26),A=M+(C^(I|~b))+P[7]+1126891415&4294967295,M=I+(A<<10&4294967295|A>>>22),A=b+(I^(M|~C))+P[14]+2878612391&4294967295,b=M+(A<<15&4294967295|A>>>17),A=C+(M^(b|~I))+P[5]+4237533241&4294967295,C=b+(A<<21&4294967295|A>>>11),A=I+(b^(C|~M))+P[12]+1700485571&4294967295,I=C+(A<<6&4294967295|A>>>26),A=M+(C^(I|~b))+P[3]+2399980690&4294967295,M=I+(A<<10&4294967295|A>>>22),A=b+(I^(M|~C))+P[10]+4293915773&4294967295,b=M+(A<<15&4294967295|A>>>17),A=C+(M^(b|~I))+P[1]+2240044497&4294967295,C=b+(A<<21&4294967295|A>>>11),A=I+(b^(C|~M))+P[8]+1873313359&4294967295,I=C+(A<<6&4294967295|A>>>26),A=M+(C^(I|~b))+P[15]+4264355552&4294967295,M=I+(A<<10&4294967295|A>>>22),A=b+(I^(M|~C))+P[6]+2734768916&4294967295,b=M+(A<<15&4294967295|A>>>17),A=C+(M^(b|~I))+P[13]+1309151649&4294967295,C=b+(A<<21&4294967295|A>>>11),A=I+(b^(C|~M))+P[4]+4149444226&4294967295,I=C+(A<<6&4294967295|A>>>26),A=M+(C^(I|~b))+P[11]+3174756917&4294967295,M=I+(A<<10&4294967295|A>>>22),A=b+(I^(M|~C))+P[2]+718787259&4294967295,b=M+(A<<15&4294967295|A>>>17),A=C+(M^(b|~I))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+M&4294967295}s.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var C=I-this.blockSize,P=this.B,b=this.h,M=0;M<I;){if(b==0)for(;M<=C;)o(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<I;)if(P[b++]=N.charCodeAt(M++),b==this.blockSize){o(this,P),b=0;break}}else for(;M<I;)if(P[b++]=N[M++],b==this.blockSize){o(this,P),b=0;break}}this.h=b,this.o+=I},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var C=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=C&255,C/=256;for(this.u(N),N=Array(16),I=C=0;4>I;++I)for(var P=0;32>P;P+=8)N[C++]=this.g[I]>>>P&255;return N};function l(N,I){var C=d;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=I(N)}function h(N,I){this.h=I;for(var C=[],P=!0,b=N.length-1;0<=b;b--){var M=N[b]|0;P&&M==I||(C[b]=M,P=!1)}this.g=C}var d={};function p(N){return-128<=N&&128>N?l(N,function(I){return new h([I|0],0>I?-1:0)}):new h([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return T;if(0>N)return L(y(-N));for(var I=[],C=1,P=0;N>=C;P++)I[P]=N/C|0,C*=4294967296;return new h(I,0)}function w(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return L(w(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=y(Math.pow(I,8)),P=T,b=0;b<N.length;b+=8){var M=Math.min(8,N.length-b),A=parseInt(N.substring(b,b+M),I);8>M?(M=y(Math.pow(I,M)),P=P.j(M).add(y(A))):(P=P.j(C),P=P.add(y(A)))}return P}var T=p(0),S=p(1),O=p(16777216);r=h.prototype,r.m=function(){if($(this))return-L(this).m();for(var N=0,I=1,C=0;C<this.g.length;C++){var P=this.i(C);N+=(0<=P?P:4294967296+P)*I,I*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(U(this))return"0";if($(this))return"-"+L(this).toString(N);for(var I=y(Math.pow(N,6)),C=this,P="";;){var b=ce(C,I).g;C=q(C,b.j(I));var M=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=b,U(C))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function U(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function $(N){return N.h==-1}r.l=function(N){return N=q(this,N),$(N)?-1:U(N)?0:1};function L(N){for(var I=N.g.length,C=[],P=0;P<I;P++)C[P]=~N.g[P];return new h(C,~N.h).add(S)}r.abs=function(){return $(this)?L(this):this},r.add=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],P=0,b=0;b<=I;b++){var M=P+(this.i(b)&65535)+(N.i(b)&65535),A=(M>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);P=A>>>16,M&=65535,A&=65535,C[b]=A<<16|M}return new h(C,C[C.length-1]&-2147483648?-1:0)};function q(N,I){return N.add(L(I))}r.j=function(N){if(U(this)||U(N))return T;if($(this))return $(N)?L(this).j(L(N)):L(L(this).j(N));if($(N))return L(this.j(L(N)));if(0>this.l(O)&&0>N.l(O))return y(this.m()*N.m());for(var I=this.g.length+N.g.length,C=[],P=0;P<2*I;P++)C[P]=0;for(P=0;P<this.g.length;P++)for(var b=0;b<N.g.length;b++){var M=this.i(P)>>>16,A=this.i(P)&65535,nt=N.i(b)>>>16,xt=N.i(b)&65535;C[2*P+2*b]+=A*xt,K(C,2*P+2*b),C[2*P+2*b+1]+=M*xt,K(C,2*P+2*b+1),C[2*P+2*b+1]+=A*nt,K(C,2*P+2*b+1),C[2*P+2*b+2]+=M*nt,K(C,2*P+2*b+2)}for(P=0;P<I;P++)C[P]=C[2*P+1]<<16|C[2*P];for(P=I;P<2*I;P++)C[P]=0;return new h(C,0)};function K(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function ne(N,I){this.g=N,this.h=I}function ce(N,I){if(U(I))throw Error("division by zero");if(U(N))return new ne(T,T);if($(N))return I=ce(L(N),I),new ne(L(I.g),L(I.h));if($(I))return I=ce(N,L(I)),new ne(L(I.g),I.h);if(30<N.g.length){if($(N)||$(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,P=I;0>=P.l(N);)C=Se(C),P=Se(P);var b=Te(C,1),M=Te(P,1);for(P=Te(P,2),C=Te(C,2);!U(P);){var A=M.add(P);0>=A.l(N)&&(b=b.add(C),M=A),P=Te(P,1),C=Te(C,1)}return I=q(N,b.j(I)),new ne(b,I)}for(b=T;0<=N.l(I);){for(C=Math.max(1,Math.floor(N.m()/I.m())),P=Math.ceil(Math.log(C)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=y(C),A=M.j(I);$(A)||0<A.l(N);)C-=P,M=y(C),A=M.j(I);U(M)&&(M=S),b=b.add(M),N=q(N,A)}return new ne(b,N)}r.A=function(N){return ce(this,N).h},r.and=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)&N.i(P);return new h(C,this.h&N.h)},r.or=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)|N.i(P);return new h(C,this.h|N.h)},r.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),C=[],P=0;P<I;P++)C[P]=this.i(P)^N.i(P);return new h(C,this.h^N.h)};function Se(N){for(var I=N.g.length+1,C=[],P=0;P<I;P++)C[P]=N.i(P)<<1|N.i(P-1)>>>31;return new h(C,N.h)}function Te(N,I){var C=I>>5;I%=32;for(var P=N.g.length-C,b=[],M=0;M<P;M++)b[M]=0<I?N.i(M+C)>>>I|N.i(M+C+1)<<32-I:N.i(M+C);return new h(b,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Y_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=w,os=h}).apply(typeof Yg<"u"?Yg:typeof self<"u"?self:typeof window<"u"?window:{});var Pu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X_,ba,J_,zu,jd,Z_,ev,tv;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,m,_){return u==Array.prototype||u==Object.prototype||(u[m]=_.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pu=="object"&&Pu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var E=0;E<u.length-1;E++){var F=u[E];if(!(F in _))break e;_=_[F]}u=u[u.length-1],E=_[u],m=m(E),m!=E&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}function l(u,m){u instanceof String&&(u+="");var _=0,E=!1,F={next:function(){if(!E&&_<u.length){var W=_++;return{value:m(W,u[W]),done:!1}}return E=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(u){return u||function(){return l(this,function(m,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},d=this||self;function p(u){var m=typeof u;return m=m!="object"?m:u?Array.isArray(u)?"array":m:"null",m=="array"||m=="object"&&typeof u.length=="number"}function y(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function w(u,m,_){return u.call.apply(u.bind,arguments)}function T(u,m,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,E),u.apply(m,F)}}return function(){return u.apply(m,arguments)}}function S(u,m,_){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:T,S.apply(null,arguments)}function O(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function U(u,m){function _(){}_.prototype=m.prototype,u.aa=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,F,W){for(var te=Array(arguments.length-2),je=2;je<arguments.length;je++)te[je-2]=arguments[je];return m.prototype[F].apply(E,te)}}function $(u){const m=u.length;if(0<m){const _=Array(m);for(let E=0;E<m;E++)_[E]=u[E];return _}return[]}function L(u,m){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(p(E)){const F=u.length||0,W=E.length||0;u.length=F+W;for(let te=0;te<W;te++)u[F+te]=E[te]}else u.push(E)}}class q{constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function K(u){return/^[\s\xa0]*$/.test(u)}function ne(){var u=d.navigator;return u&&(u=u.userAgent)?u:""}function ce(u){return ce[" "](u),u}ce[" "]=function(){};var Se=ne().indexOf("Gecko")!=-1&&!(ne().toLowerCase().indexOf("webkit")!=-1&&ne().indexOf("Edge")==-1)&&!(ne().indexOf("Trident")!=-1||ne().indexOf("MSIE")!=-1)&&ne().indexOf("Edge")==-1;function Te(u,m,_){for(const E in u)m.call(_,u[E],E,u)}function N(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function I(u){const m={};for(const _ in u)m[_]=u[_];return m}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(u,m){let _,E;for(let F=1;F<arguments.length;F++){E=arguments[F];for(_ in E)u[_]=E[_];for(let W=0;W<C.length;W++)_=C[W],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function b(u){var m=1;u=u.split(":");const _=[];for(;0<m&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function M(u){d.setTimeout(()=>{throw u},0)}function A(){var u=pe;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class nt{constructor(){this.h=this.g=null}add(m,_){const E=xt.get();E.set(m,_),this.h?this.h.next=E:this.g=E,this.h=E}}var xt=new q(()=>new Nt,u=>u.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ze,re=!1,pe=new nt,se=()=>{const u=d.Promise.resolve(void 0);ze=()=>{u.then(V)}};var V=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){M(_)}var m=xt;m.j(u),100>m.h&&(m.h++,u.next=m.g,m.g=u)}re=!1};function Q(){this.s=this.s,this.C=this.C}Q.prototype.s=!1,Q.prototype.ma=function(){this.s||(this.s=!0,this.N())},Q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};d.addEventListener("test",_,m),d.removeEventListener("test",_,m)}catch{}return u}();function Ce(u,m){if(de.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget){if(Se){e:{try{ce(m.nodeName);var F=!0;break e}catch{}F=!1}F||(m=null)}}else _=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement);this.relatedTarget=m,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:De[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&Ce.aa.h.call(this)}}U(Ce,de);var De={2:"touch",3:"pen",4:"mouse"};Ce.prototype.h=function(){Ce.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function $e(u,m,_,E,F){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!E,this.ha=F,this.key=++Fe,this.da=this.fa=!1}function yt(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function or(u){this.src=u,this.g={},this.h=0}or.prototype.add=function(u,m,_,E,F){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var te=Vr(u,m,E,F);return-1<te?(m=u[te],_||(m.fa=!1)):(m=new $e(m,this.src,W,!!E,F),m.fa=_,u.push(m)),m};function ps(u,m){var _=m.type;if(_ in u.g){var E=u.g[_],F=Array.prototype.indexOf.call(E,m,void 0),W;(W=0<=F)&&Array.prototype.splice.call(E,F,1),W&&(yt(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Vr(u,m,_,E){for(var F=0;F<u.length;++F){var W=u[F];if(!W.da&&W.listener==m&&W.capture==!!_&&W.ha==E)return F}return-1}var ki="closure_lm_"+(1e6*Math.random()|0),ms={};function bo(u,m,_,E,F){if(Array.isArray(m)){for(var W=0;W<m.length;W++)bo(u,m[W],_,E,F);return null}return _=Vo(_),u&&u[Me]?u.K(m,_,y(E)?!!E.capture:!1,F):Oo(u,m,_,!1,E,F)}function Oo(u,m,_,E,F,W){if(!m)throw Error("Invalid event type");var te=y(F)?!!F.capture:!!F,je=ys(u);if(je||(u[ki]=je=new or(u)),_=je.add(m,_,E,te,W),_.proxy)return _;if(E=hl(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Re||(F=te),F===void 0&&(F=!1),u.addEventListener(m.toString(),E,F);else if(u.attachEvent)u.attachEvent(lr(m.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function hl(){function u(_){return m.call(u.src,u.listener,_)}const m=Lo;return u}function gs(u,m,_,E,F){if(Array.isArray(m))for(var W=0;W<m.length;W++)gs(u,m[W],_,E,F);else E=y(E)?!!E.capture:!!E,_=Vo(_),u&&u[Me]?(u=u.i,m=String(m).toString(),m in u.g&&(W=u.g[m],_=Vr(W,_,E,F),-1<_&&(yt(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[m],u.h--)))):u&&(u=ys(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Vr(m,_,E,F)),(_=-1<u?m[u]:null)&&ar(_))}function ar(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[Me])ps(m.i,u);else{var _=u.type,E=u.proxy;m.removeEventListener?m.removeEventListener(_,E,u.capture):m.detachEvent?m.detachEvent(lr(_),E):m.addListener&&m.removeListener&&m.removeListener(E),(_=ys(m))?(ps(_,u),_.h==0&&(_.src=null,m[ki]=null)):yt(u)}}}function lr(u){return u in ms?ms[u]:ms[u]="on"+u}function Lo(u,m){if(u.da)u=!0;else{m=new Ce(m,this);var _=u.listener,E=u.ha||u.src;u.fa&&ar(u),u=_.call(E,m)}return u}function ys(u){return u=u[ki],u instanceof or?u:null}var _s="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vo(u){return typeof u=="function"?u:(u[_s]||(u[_s]=function(m){return u.handleEvent(m)}),u[_s])}function ut(){Q.call(this),this.i=new or(this),this.M=this,this.F=null}U(ut,Q),ut.prototype[Me]=!0,ut.prototype.removeEventListener=function(u,m,_,E){gs(this,u,m,_,E)};function ct(u,m){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=m.type||m,typeof m=="string")m=new de(m,u);else if(m instanceof de)m.target=m.target||u;else{var F=m;m=new de(E,u),P(m,F)}if(F=!0,_)for(var W=_.length-1;0<=W;W--){var te=m.g=_[W];F=ur(te,E,!0,m)&&F}if(te=m.g=u,F=ur(te,E,!0,m)&&F,F=ur(te,E,!1,m)&&F,_)for(W=0;W<_.length;W++)te=m.g=_[W],F=ur(te,E,!1,m)&&F}ut.prototype.N=function(){if(ut.aa.N.call(this),this.i){var u=this.i,m;for(m in u.g){for(var _=u.g[m],E=0;E<_.length;E++)yt(_[E]);delete u.g[m],u.h--}}this.F=null},ut.prototype.K=function(u,m,_,E){return this.i.add(String(u),m,!1,_,E)},ut.prototype.L=function(u,m,_,E){return this.i.add(String(u),m,!0,_,E)};function ur(u,m,_,E){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();for(var F=!0,W=0;W<m.length;++W){var te=m[W];if(te&&!te.da&&te.capture==_){var je=te.listener,ht=te.ha||te.src;te.fa&&ps(u.i,te),F=je.call(ht,E)!==!1&&F}}return F&&!E.defaultPrevented}function Mo(u,m,_){if(typeof u=="function")_&&(u=S(u,_));else if(u&&typeof u.handleEvent=="function")u=S(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:d.setTimeout(u,m||0)}function Mr(u){u.g=Mo(()=>{u.g=null,u.i&&(u.i=!1,Mr(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Pi extends Q{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:Mr(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xi(u){Q.call(this),this.h=u,this.g={}}U(xi,Q);var Fo=[];function Uo(u){Te(u.g,function(m,_){this.g.hasOwnProperty(_)&&ar(m)},u),u.g={}}xi.prototype.N=function(){xi.aa.N.call(this),Uo(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var jo=d.JSON.stringify,zo=d.JSON.parse,Bo=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ni(){}Ni.prototype.h=null;function vs(u){return u.h||(u.h=u.i())}function ws(){}var cn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bn(){de.call(this,"d")}U(Bn,de);function Es(){de.call(this,"c")}U(Es,de);var $n={},$o=null;function Di(){return $o=$o||new ut}$n.La="serverreachability";function Ho(u){de.call(this,$n.La,u)}U(Ho,de);function cr(u){const m=Di();ct(m,new Ho(m))}$n.STAT_EVENT="statevent";function Wo(u,m){de.call(this,$n.STAT_EVENT,u),this.stat=m}U(Wo,de);function rt(u){const m=Di();ct(m,new Wo(m,u))}$n.Ma="timingevent";function Ts(u,m){de.call(this,$n.Ma,u),this.size=m}U(Ts,de);function Tn(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},m)}function bi(){this.g=!0}bi.prototype.xa=function(){this.g=!1};function Oi(u,m,_,E,F,W){u.info(function(){if(u.g)if(W)for(var te="",je=W.split("&"),ht=0;ht<je.length;ht++){var be=je[ht].split("=");if(1<be.length){var _t=be[0];be=be[1];var ot=_t.split("_");te=2<=ot.length&&ot[1]=="type"?te+(_t+"="+be+"&"):te+(_t+"=redacted&")}}else te=null;else te=W;return"XMLHTTP REQ ("+E+") [attempt "+F+"]: "+m+`
`+_+`
`+te})}function Is(u,m,_,E,F,W,te){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+F+"]: "+m+`
`+_+`
`+W+" "+te})}function In(u,m,_,E){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Fc(u,_)+(E?" "+E:"")})}function qo(u,m){u.info(function(){return"TIMEOUT: "+m})}bi.prototype.info=function(){};function Fc(u,m){if(!u.g)return m;if(!m)return null;try{var _=JSON.parse(m);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var F=E[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var te=1;te<F.length;te++)F[te]=""}}}}return jo(_)}catch{return m}}var Ss={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function Li(){}U(Li,Ni),Li.prototype.g=function(){return new XMLHttpRequest},Li.prototype.i=function(){return{}},Sn=new Li;function Rn(u,m,_,E){this.j=u,this.i=m,this.l=_,this.R=E||1,this.U=new xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}var Ko={},Rs={};function Cs(u,m,_){u.L=1,u.v=Br(nn(m)),u.m=_,u.P=!0,Go(u,null)}function Go(u,m){u.F=Date.now(),He(u),u.A=nn(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),Hr(_.i,"t",E),u.C=0,_=u.j.J,u.h=new fl,u.g=Nl(u.j,_?m:null,!u.m),0<u.O&&(u.M=new Pi(S(u.Y,u,u.g),u.O)),m=u.U,_=u.g,E=u.ca;var F="readystatechange";Array.isArray(F)||(F&&(Fo[0]=F.toString()),F=Fo);for(var W=0;W<F.length;W++){var te=bo(_,F[W],E||m.handleEvent,!1,m.h||m);if(!te)break;m.g[te.key]=te}m=u.H?I(u.H):{},u.m?(u.u||(u.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,m)):(u.u="GET",u.g.ea(u.A,u.u,null,m)),cr(),Oi(u.i,u.u,u.A,u.l,u.R,u.m)}Rn.prototype.ca=function(u){u=u.target;const m=this.M;m&&qt(u)==3?m.j():this.Y(u)},Rn.prototype.Y=function(u){try{if(u==this.g)e:{const ot=qt(this.g);var m=this.g.Ba();const fn=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||ea(this.g)))){this.J||ot!=4||m==7||(m==8||0>=fn?cr(3):cr(2)),Vi(this);var _=this.g.Z();this.X=_;t:if(pl(this)){var E=ea(this.g);u="";var F=E.length,W=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hn(this),Fr(this);var te="";break t}this.h.i=new d.TextDecoder}for(m=0;m<F;m++)this.h.h=!0,u+=this.h.i.decode(E[m],{stream:!(W&&m==F-1)});E.length=0,this.h.g+=u,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=_==200,Is(this.i,this.u,this.A,this.l,this.R,ot,_),this.o){if(this.T&&!this.K){t:{if(this.g){var je,ht=this.g;if((je=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(je)){var be=je;break t}}be=null}if(_=be)In(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qo(this,_);else{this.o=!1,this.s=3,rt(12),hn(this),Fr(this);break e}}if(this.P){_=!0;let sn;for(;!this.J&&this.C<te.length;)if(sn=Uc(this,te),sn==Rs){ot==4&&(this.s=4,rt(14),_=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Ko){this.s=4,rt(15),In(this.i,this.l,te,"[Invalid Chunk]"),_=!1;break}else In(this.i,this.l,sn,null),Qo(this,sn);if(pl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||te.length!=0||this.h.h||(this.s=1,rt(16),_=!1),this.o=this.o&&_,!_)In(this.i,this.l,te,"[Invalid Chunked Response]"),hn(this),Fr(this);else if(0<te.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),na(_t),_t.M=!0,rt(11))}}else In(this.i,this.l,te,null),Qo(this,te);ot==4&&hn(this),this.o&&!this.J&&(ot==4?Ms(this.j,this):(this.o=!1,He(this)))}else Ds(this.g),_==400&&0<te.indexOf("Unknown SID")?(this.s=3,rt(12)):(this.s=0,rt(13)),hn(this),Fr(this)}}}catch{}finally{}};function pl(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Uc(u,m){var _=u.C,E=m.indexOf(`
`,_);return E==-1?Rs:(_=Number(m.substring(_,E)),isNaN(_)?Ko:(E+=1,E+_>m.length?Rs:(m=m.slice(E,E+_),u.C=E+_,m)))}Rn.prototype.cancel=function(){this.J=!0,hn(this)};function He(u){u.S=Date.now()+u.I,ml(u,u.I)}function ml(u,m){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Tn(S(u.ba,u),m)}function Vi(u){u.B&&(d.clearTimeout(u.B),u.B=null)}Rn.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(qo(this.i,this.A),this.L!=2&&(cr(),rt(17)),hn(this),this.s=2,Fr(this)):ml(this,this.S-u)};function Fr(u){u.j.G==0||u.J||Ms(u.j,u)}function hn(u){Vi(u);var m=u.M;m&&typeof m.ma=="function"&&m.ma(),u.M=null,Uo(u.U),u.g&&(m=u.g,u.g=null,m.abort(),m.ma())}function Qo(u,m){try{var _=u.j;if(_.G!=0&&(_.g==u||zt(_.h,u))){if(!u.K&&zt(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(m)}catch{E=null}if(Array.isArray(E)&&E.length==3){var F=E;if(F[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)Vs(_),xn(_);else break e;Ls(_),rt(18)}}else _.za=F[1],0<_.za-_.T&&37500>F[2]&&_.F&&_.v==0&&!_.C&&(_.C=Tn(S(_.Za,_),6e3));if(1>=yl(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else mr(_,11)}else if((u.K||_.g==u)&&Vs(_),!K(m))for(F=_.Da.g.parse(m),m=0;m<F.length;m++){let be=F[m];if(_.T=be[0],be=be[1],_.G==2)if(be[0]=="c"){_.K=be[1],_.ia=be[2];const _t=be[3];_t!=null&&(_.la=_t,_.j.info("VER="+_.la));const ot=be[4];ot!=null&&(_.Aa=ot,_.j.info("SVER="+_.Aa));const fn=be[5];fn!=null&&typeof fn=="number"&&0<fn&&(E=1.5*fn,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const sn=u.g;if(sn){const $i=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($i){var W=E.h;W.g||$i.indexOf("spdy")==-1&&$i.indexOf("quic")==-1&&$i.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Yo(W,W.h),W.h=null))}if(E.D){const Us=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Us&&(E.ya=Us,Be(E.I,E.D,Us))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var te=u;if(E.qa=xl(E,E.J?E.ia:null,E.W),te.K){_l(E.h,te);var je=te,ht=E.L;ht&&(je.I=ht),je.B&&(Vi(je),He(je)),E.g=te}else Bi(E);0<_.i.length&&Kn(_)}else be[0]!="stop"&&be[0]!="close"||mr(_,7);else _.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?mr(_,7):St(_):be[0]!="noop"&&_.l&&_.l.ta(be),_.v=0)}}cr(4)}catch{}}var gl=class{constructor(u,m){this.g=u,this.map=m}};function Mi(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function tn(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function yl(u){return u.h?1:u.g?u.g.size:0}function zt(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function Yo(u,m){u.g?u.g.add(m):u.h=m}function _l(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}Mi.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function vl(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.D);return m}return $(u.i)}function As(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(p(u)){for(var m=[],_=u.length,E=0;E<_;E++)m.push(u[E]);return m}m=[],_=0;for(E in u)m[_++]=u[E];return m}function ks(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(p(u)||typeof u=="string"){var m=[];u=u.length;for(var _=0;_<u;_++)m.push(_);return m}m=[],_=0;for(const E in u)m[_++]=E;return m}}}function Ur(u,m){if(u.forEach&&typeof u.forEach=="function")u.forEach(m,void 0);else if(p(u)||typeof u=="string")Array.prototype.forEach.call(u,m,void 0);else for(var _=ks(u),E=As(u),F=E.length,W=0;W<F;W++)m.call(void 0,E[W],_&&_[W],u)}var Fi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jc(u,m){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),F=null;if(0<=E){var W=u[_].substring(0,E);F=u[_].substring(E+1)}else W=u[_];m(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function hr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof hr){this.h=u.h,Ui(this,u.j),this.o=u.o,this.g=u.g,jr(this,u.s),this.l=u.l;var m=u.i,_=new Hn;_.i=m.i,m.g&&(_.g=new Map(m.g),_.h=m.h),zr(this,_),this.m=u.m}else u&&(m=String(u).match(Fi))?(this.h=!1,Ui(this,m[1]||"",!0),this.o=xe(m[2]||""),this.g=xe(m[3]||"",!0),jr(this,m[4]),this.l=xe(m[5]||"",!0),zr(this,m[6]||"",!0),this.m=xe(m[7]||"")):(this.h=!1,this.i=new Hn(null,this.h))}hr.prototype.toString=function(){var u=[],m=this.j;m&&u.push($r(m,Ps,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push($r(m,Ps,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push($r(_,_.charAt(0)=="/"?Tl:El,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",$r(_,Xo)),u.join("")};function nn(u){return new hr(u)}function Ui(u,m,_){u.j=_?xe(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function jr(u,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);u.s=m}else u.s=null}function zr(u,m,_){m instanceof Hn?(u.i=m,Wn(u.i,u.h)):(_||(m=$r(m,Il)),u.i=new Hn(m,u.h))}function Be(u,m,_){u.i.set(m,_)}function Br(u){return Be(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function xe(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function $r(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,wl),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function wl(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ps=/[#\/\?@]/g,El=/[#\?:]/g,Tl=/[#\?]/g,Il=/[#\?@]/g,Xo=/#/g;function Hn(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function It(u){u.g||(u.g=new Map,u.h=0,u.i&&jc(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=Hn.prototype,r.add=function(u,m){It(this),this.i=null,u=dn(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function Cn(u,m){It(u),m=dn(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function An(u,m){return It(u),m=dn(u,m),u.g.has(m)}r.forEach=function(u,m){It(this),this.g.forEach(function(_,E){_.forEach(function(F){u.call(m,F,E,this)},this)},this)},r.na=function(){It(this);const u=Array.from(this.g.values()),m=Array.from(this.g.keys()),_=[];for(let E=0;E<m.length;E++){const F=u[E];for(let W=0;W<F.length;W++)_.push(m[E])}return _},r.V=function(u){It(this);let m=[];if(typeof u=="string")An(this,u)&&(m=m.concat(this.g.get(dn(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)m=m.concat(u[_])}return m},r.set=function(u,m){return It(this),this.i=null,u=dn(this,u),An(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=this.V(u),0<u.length?String(u[0]):m):m};function Hr(u,m,_){Cn(u,m),0<_.length&&(u.i=null,u.g.set(dn(u,m),$(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(var _=0;_<m.length;_++){var E=m[_];const W=encodeURIComponent(String(E)),te=this.V(E);for(E=0;E<te.length;E++){var F=W;te[E]!==""&&(F+="="+encodeURIComponent(String(te[E]))),u.push(F)}}return this.i=u.join("&")};function dn(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Wn(u,m){m&&!u.j&&(It(u),u.i=null,u.g.forEach(function(_,E){var F=E.toLowerCase();E!=F&&(Cn(this,E),Hr(this,F,_))},u)),u.j=m}function zc(u,m){const _=new bi;if(d.Image){const E=new Image;E.onload=O(Wt,_,"TestLoadImage: loaded",!0,m,E),E.onerror=O(Wt,_,"TestLoadImage: error",!1,m,E),E.onabort=O(Wt,_,"TestLoadImage: abort",!1,m,E),E.ontimeout=O(Wt,_,"TestLoadImage: timeout",!1,m,E),d.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else m(!1)}function Sl(u,m){const _=new bi,E=new AbortController,F=setTimeout(()=>{E.abort(),Wt(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:E.signal}).then(W=>{clearTimeout(F),W.ok?Wt(_,"TestPingServer: ok",!0,m):Wt(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(F),Wt(_,"TestPingServer: error",!1,m)})}function Wt(u,m,_,E,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),E(_)}catch{}}function Bc(){this.g=new Bo}function Rl(u,m,_){const E=_||"";try{Ur(u,function(F,W){let te=F;y(F)&&(te=jo(F)),m.push(E+W+"="+encodeURIComponent(te))})}catch(F){throw m.push(E+"type="+encodeURIComponent("_badmap")),F}}function dr(u){this.l=u.Ub||null,this.j=u.eb||!1}U(dr,Ni),dr.prototype.g=function(){return new ji(this.l,this.j)},dr.prototype.i=function(u){return function(){return u}}({});function ji(u,m){ut.call(this),this.D=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(ji,ut),r=ji.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=m,this.readyState=1,Pn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(m.body=u),(this.D||d).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kn(this)),this.readyState=0},r.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Pn(this)),this.g&&(this.readyState=3,Pn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Cl(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Cl(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}r.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?kn(this):Pn(this),this.readyState==3&&Cl(this)}},r.Ra=function(u){this.g&&(this.response=this.responseText=u,kn(this))},r.Qa=function(u){this.g&&(this.response=u,kn(this))},r.ga=function(){this.g&&kn(this)};function kn(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Pn(u)}r.setRequestHeader=function(u,m){this.u.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Pn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(ji.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function fr(u){let m="";return Te(u,function(_,E){m+=E,m+=":",m+=_,m+=`\r
`}),m}function Wr(u,m,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=fr(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):Be(u,m,_))}function Ge(u){ut.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(Ge,ut);var $c=/^https?$/i,Jo=["POST","PUT"];r=Ge.prototype,r.Ha=function(u){this.J=u},r.ea=function(u,m,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?vs(this.o):vs(Sn),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(W){zi(this,W);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var F in E)_.set(F,E[F]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const W of E.keys())_.set(W,E.get(W));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=d.FormData&&u instanceof d.FormData,!(0<=Array.prototype.indexOf.call(Jo,m,void 0))||E||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,te]of _)this.g.setRequestHeader(W,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ns(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){zi(this,W)}};function zi(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.m=5,xs(u),rn(u)}function xs(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ct(this,"complete"),ct(this,"abort"),rn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rn(this,!0)),Ge.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Zo(this):this.bb())},r.bb=function(){Zo(this)};function Zo(u){if(u.h&&typeof h<"u"&&(!u.v[1]||qt(u)!=4||u.Z()!=2)){if(u.u&&qt(u)==4)Mo(u.Ea,0,u);else if(ct(u,"readystatechange"),qt(u)==4){u.h=!1;try{const te=u.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var E;if(E=te===0){var F=String(u.D).match(Fi)[1]||null;!F&&d.self&&d.self.location&&(F=d.self.location.protocol.slice(0,-1)),E=!$c.test(F?F.toLowerCase():"")}_=E}if(_)ct(u,"complete"),ct(u,"success");else{u.m=6;try{var W=2<qt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",xs(u)}}finally{rn(u)}}}}function rn(u,m){if(u.g){Ns(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,m||ct(u,"ready");try{_.onreadystatechange=E}catch{}}}function Ns(u){u.I&&(d.clearTimeout(u.I),u.I=null)}r.isActive=function(){return!!this.g};function qt(u){return u.g?u.g.readyState:0}r.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),zo(m)}};function ea(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Ds(u){const m={};u=(u.g&&2<=qt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(K(u[E]))continue;var _=b(u[E]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=m[F]||[];m[F]=W,W.push(_)}N(m,function(E){return E.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function ta(u){this.Aa=0,this.i=[],this.j=new bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qn("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qn("baseRetryDelayMs",5e3,u),this.cb=qn("retryDelaySeedMs",1e4,u),this.Wa=qn("forwardChannelMaxRetries",2,u),this.wa=qn("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Mi(u&&u.concurrentRequestLimit),this.Da=new Bc,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=ta.prototype,r.la=8,r.G=1,r.connect=function(u,m,_,E){rt(0),this.W=u,this.H=m||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=xl(this,null,this.W),Kn(this)};function St(u){if(bs(u),u.G==3){var m=u.U++,_=nn(u.I);if(Be(_,"SID",u.K),Be(_,"RID",m),Be(_,"TYPE","terminate"),pr(u,_),m=new Rn(u,u.j,m),m.L=2,m.v=Br(nn(_)),_=!1,d.navigator&&d.navigator.sendBeacon)try{_=d.navigator.sendBeacon(m.v.toString(),"")}catch{}!_&&d.Image&&(new Image().src=m.v,_=!0),_||(m.g=Nl(m.j,null),m.g.ea(m.v)),m.F=Date.now(),He(m)}Pl(u)}function xn(u){u.g&&(na(u),u.g.cancel(),u.g=null)}function bs(u){xn(u),u.u&&(d.clearTimeout(u.u),u.u=null),Vs(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&d.clearTimeout(u.s),u.s=null)}function Kn(u){if(!tn(u.h)&&!u.s){u.s=!0;var m=u.Ga;ze||se(),re||(ze(),re=!0),pe.add(m,u),u.B=0}}function Hc(u,m){return yl(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=m.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Tn(S(u.Ga,u,m),kl(u,u.B)),u.B++,!0)}r.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const F=new Rn(this,this.j,u);let W=this.o;if(this.S&&(W?(W=I(W),P(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(m+=E,4096<m){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=qr(this,F,m),_=nn(this.I),Be(_,"RID",u),Be(_,"CVER",22),this.D&&Be(_,"X-HTTP-Session-Id",this.D),pr(this,_),W&&(this.O?m="headers="+encodeURIComponent(String(fr(W)))+"&"+m:this.m&&Wr(_,this.m,W)),Yo(this.h,F),this.Ua&&Be(_,"TYPE","init"),this.P?(Be(_,"$req",m),Be(_,"SID","null"),F.T=!0,Cs(F,_,null)):Cs(F,_,m),this.G=2}}else this.G==3&&(u?Os(this,u):this.i.length==0||tn(this.h)||Os(this))};function Os(u,m){var _;m?_=m.l:_=u.U++;const E=nn(u.I);Be(E,"SID",u.K),Be(E,"RID",_),Be(E,"AID",u.T),pr(u,E),u.m&&u.o&&Wr(E,u.m,u.o),_=new Rn(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),m&&(u.i=m.D.concat(u.i)),m=qr(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Yo(u.h,_),Cs(_,E,m)}function pr(u,m){u.H&&Te(u.H,function(_,E){Be(m,E,_)}),u.l&&Ur({},function(_,E){Be(m,E,_)})}function qr(u,m,_){_=Math.min(u.i.length,_);var E=u.l?S(u.l.Na,u.l,u):null;e:{var F=u.i;let W=-1;for(;;){const te=["count="+_];W==-1?0<_?(W=F[0].g,te.push("ofs="+W)):W=0:te.push("ofs="+W);let je=!0;for(let ht=0;ht<_;ht++){let be=F[ht].g;const _t=F[ht].map;if(be-=W,0>be)W=Math.max(0,F[ht].g-100),je=!1;else try{Rl(_t,te,"req"+be+"_")}catch{E&&E(_t)}}if(je){E=te.join("&");break e}}}return u=u.i.splice(0,_),m.D=u,E}function Bi(u){if(!u.g&&!u.u){u.Y=1;var m=u.Fa;ze||se(),re||(ze(),re=!0),pe.add(m,u),u.v=0}}function Ls(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Tn(S(u.Fa,u),kl(u,u.v)),u.v++,!0)}r.Fa=function(){if(this.u=null,Al(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Tn(S(this.ab,this),u)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,rt(10),xn(this),Al(this))};function na(u){u.A!=null&&(d.clearTimeout(u.A),u.A=null)}function Al(u){u.g=new Rn(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var m=nn(u.qa);Be(m,"RID","rpc"),Be(m,"SID",u.K),Be(m,"AID",u.T),Be(m,"CI",u.F?"0":"1"),!u.F&&u.ja&&Be(m,"TO",u.ja),Be(m,"TYPE","xmlhttp"),pr(u,m),u.m&&u.o&&Wr(m,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=Br(nn(m)),_.m=null,_.P=!0,Go(_,u)}r.Za=function(){this.C!=null&&(this.C=null,xn(this),Ls(this),rt(19))};function Vs(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Ms(u,m){var _=null;if(u.g==m){Vs(u),na(u),u.g=null;var E=2}else if(zt(u.h,m))_=m.D,_l(u.h,m),E=1;else return;if(u.G!=0){if(m.o)if(E==1){_=m.m?m.m.length:0,m=Date.now()-m.F;var F=u.B;E=Di(),ct(E,new Ts(E,_)),Kn(u)}else Bi(u);else if(F=m.s,F==3||F==0&&0<m.X||!(E==1&&Hc(u,m)||E==2&&Ls(u)))switch(_&&0<_.length&&(m=u.h,m.i=m.i.concat(_)),F){case 1:mr(u,5);break;case 4:mr(u,10);break;case 3:mr(u,6);break;default:mr(u,2)}}}function kl(u,m){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*m}function mr(u,m){if(u.j.info("Error code "+m),m==2){var _=S(u.fb,u),E=u.Xa;const F=!E;E=new hr(E||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ui(E,"https"),Br(E),F?zc(E.toString(),_):Sl(E.toString(),_)}else rt(2);u.G=0,u.l&&u.l.sa(m),Pl(u),bs(u)}r.fb=function(u){u?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Pl(u){if(u.G=0,u.ka=[],u.l){const m=vl(u.h);(m.length!=0||u.i.length!=0)&&(L(u.ka,m),L(u.ka,u.i),u.h.i.length=0,$(u.i),u.i.length=0),u.l.ra()}}function xl(u,m,_){var E=_ instanceof hr?nn(_):new hr(_);if(E.g!="")m&&(E.g=m+"."+E.g),jr(E,E.s);else{var F=d.location;E=F.protocol,m=m?m+"."+F.hostname:F.hostname,F=+F.port;var W=new hr(null);E&&Ui(W,E),m&&(W.g=m),F&&jr(W,F),_&&(W.l=_),E=W}return _=u.D,m=u.ya,_&&m&&Be(E,_,m),Be(E,"VER",u.la),pr(u,E),E}function Nl(u,m,_){if(m&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Ca&&!u.pa?new Ge(new dr({eb:_})):new Ge(u.pa),m.Ha(u.J),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ra(){}r=ra.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function Fs(){}Fs.prototype.g=function(u,m){return new Bt(u,m)};function Bt(u,m){ut.call(this),this.g=new ta(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(u?u["X-WebChannel-Client-Profile"]=m.va:u={"X-WebChannel-Client-Profile":m.va}),this.g.S=u,(u=m&&m.Sb)&&!K(u)&&(this.g.m=u),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!K(m)&&(this.g.D=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Gn(this)}U(Bt,ut),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){St(this.g)},Bt.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=jo(u),u=_);m.i.push(new gl(m.Ya++,u)),m.G==3&&Kn(m)},Bt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,Bt.aa.N.call(this)};function Dl(u){Bn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}U(Dl,Bn);function bl(){Es.call(this),this.status=1}U(bl,Es);function Gn(u){this.g=u}U(Gn,ra),Gn.prototype.ua=function(){ct(this.g,"a")},Gn.prototype.ta=function(u){ct(this.g,new Dl(u))},Gn.prototype.sa=function(u){ct(this.g,new bl)},Gn.prototype.ra=function(){ct(this.g,"b")},Fs.prototype.createWebChannel=Fs.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,tv=function(){return new Fs},ev=function(){return Di()},Z_=$n,jd={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ss.NO_ERROR=0,Ss.TIMEOUT=8,Ss.HTTP_ERROR=6,zu=Ss,dl.COMPLETE="complete",J_=dl,ws.EventType=cn,cn.OPEN="a",cn.CLOSE="b",cn.ERROR="c",cn.MESSAGE="d",ut.prototype.listen=ut.prototype.K,ba=ws,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,X_=Ge}).apply(typeof Pu<"u"?Pu:typeof self<"u"?self:typeof window<"u"?window:{});const Xg="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Po="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new hf("@firebase/firestore");function oo(){return cs.logLevel}function oe(r,...e){if(cs.logLevel<=ke.DEBUG){const t=e.map(Rf);cs.debug(`Firestore (${Po}): ${r}`,...t)}}function Dr(r,...e){if(cs.logLevel<=ke.ERROR){const t=e.map(Rf);cs.error(`Firestore (${Po}): ${r}`,...t)}}function go(r,...e){if(cs.logLevel<=ke.WARN){const t=e.map(Rf);cs.warn(`Firestore (${Po}): ${r}`,...t)}}function Rf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(r="Unexpected state"){const e=`FIRESTORE (${Po}) INTERNAL ASSERTION FAILED: `+r;throw Dr(e),new Error(e)}function Ue(r,e){r||we()}function Ie(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mt.UNAUTHENTICATED))}shutdown(){}}class Z1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class eR{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ue(this.o===void 0);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new mi,e.enqueueRetryable(()=>o(this.currentUser))};const h=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await o(this.currentUser)})},d=p=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit(p=>d(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?d(p):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new mi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(s=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ue(typeof s.accessToken=="string"),new nv(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Mt(e)}}class tR{constructor(e,t,s){this.l=e,this.h=t,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class nR{constructor(e,t,s){this.l=e,this.h=t,this.P=s}getToken(){return Promise.resolve(new tR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Ue(this.o===void 0);const s=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.R;return this.R=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>s(l))};const o=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>o(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?o(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ue(typeof t.token=="string"),this.R=t.token,new rR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const o=sR(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%e.length))}return s}}function Ne(r,e){return r<e?-1:r>e?1:0}function yo(r,e,t){return r.length===e.length&&r.every((s,o)=>t(s,e[o]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*t));return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new fe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new mt(0,0))}static max(){return new Ee(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t,s){t===void 0?t=0:t>e.length&&we(),s===void 0?s=e.length-t:s>e.length-t&&we(),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Wa.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Wa?e.forEach(s=>{t.push(s)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Ye extends Wa{construct(e,t,s){return new Ye(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter(o=>o.length>0))}return new Ye(t)}static emptyPath(){return new Ye([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends Wa{construct(e,t,s){return new kt(e,t,s)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new fe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new fe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new fe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(l(),o++)}if(l(),h)throw new fe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(t)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Ye.fromString(e))}static fromName(e){return new ye(Ye.fromString(e).popFirst(5))}static empty(){return new ye(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ye.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Ye(e.slice()))}}function aR(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ee.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new _i(o,ye.empty(),e)}function lR(r){return new _i(r.readTime,r.key,-1)}class _i{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new _i(Ee.min(),ye.empty(),-1)}static max(){return new _i(Ee.max(),ye.empty(),-1)}}function uR(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(r.documentKey,e.documentKey),t!==0?t:Ne(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==cR)throw r;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&we(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,s)=>{t(e)})}static reject(e){return new G((t,s)=>{s(e)})}static waitFor(e){return new G((t,s)=>{let o=0,l=0,h=!1;e.forEach(d=>{++o,d.next(()=>{++l,h&&l===o&&t()},p=>s(p))}),h=!0,l===o&&t()})}static or(e){let t=G.resolve(!1);for(const s of e)t=t.next(o=>o?G.resolve(o):s());return t}static forEach(e,t){const s=[];return e.forEach((o,l)=>{s.push(t.call(this,o,l))}),this.waitFor(s)}static mapArray(e,t){return new G((s,o)=>{const l=e.length,h=new Array(l);let d=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next(w=>{h[y]=w,++d,d===l&&s(h)},w=>o(w))}})}static doWhile(e,t){return new G((s,o)=>{const l=()=>{e()===!0?t().next(()=>{l()},o):s()};l()})}}function dR(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function No(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ie(s),this.se=s=>t.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}wc.oe=-1;function Ec(r){return r==null}function nc(r){return r===0&&1/r==-1/0}function fR(r){return typeof r=="number"&&Number.isInteger(r)&&!nc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=Jg(e)),e=mR(r.get(t),e);return Jg(e)}function mR(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case"":t+="";break;default:t+=l}}return t}function Jg(r){return r+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ci(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function iv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||At.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,s)=>(e(t,s),!1))}toString(){const e=[];return this.inorderTraversal((t,s)=>(e.push(`${t}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new xu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new xu(this.root,e,this.comparator,!1)}getReverseIterator(){return new xu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new xu(this.root,e,this.comparator,!0)}}class xu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??At.RED,this.left=o??At.EMPTY,this.right=l??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new At(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return At.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw we();const e=this.left.check();if(e!==this.right.check())throw we();return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw we()}get value(){throw we()}get color(){throw we()}get left(){throw we()}get right(){throw we()}copy(e,t,s,o,l){return this}insert(e,t,s){return new At(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,s)=>(e(t),!1))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ey(this.data.getIterator())}getIteratorFrom(e){return new ey(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(s=>{t=t.add(s)}),t}isEqual(e){if(!(e instanceof gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new gt(this.comparator);return t.data=e,t}}class ey{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new un([])}unionWith(e){let t=new gt(kt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new un(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(t,s)=>t.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new sv("Invalid base64 string: "+l):l}}(e);return new Pt(t)}static fromUint8Array(e){const t=function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l}(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const gR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vi(r){if(Ue(!!r),typeof r=="string"){let e=0;const t=gR.exec(r);if(Ue(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:st(r.seconds),nanos:st(r.nanos)}}function st(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function wi(r){return typeof r=="string"?Pt.fromBase64String(r):Pt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Tc(r){const e=r.mapValue.fields.__previous_value__;return Cf(e)?Tc(e):e}function qa(r){const e=vi(r.mapValue.fields.__local_write_time__.timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,t,s,o,l,h,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=p,this.useFetchStreams=y}}class Ka{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nu={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ei(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Cf(r)?4:vR(r)?9007199254740991:_R(r)?10:11:we()}function nr(r,e){if(r===e)return!0;const t=Ei(r);if(t!==Ei(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return qa(r).isEqual(qa(e));case 3:return function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=vi(o.timestampValue),d=vi(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(o,l){return wi(o.bytesValue).isEqual(wi(l.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(o,l){return st(o.geoPointValue.latitude)===st(l.geoPointValue.latitude)&&st(o.geoPointValue.longitude)===st(l.geoPointValue.longitude)}(r,e);case 2:return function(o,l){if("integerValue"in o&&"integerValue"in l)return st(o.integerValue)===st(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=st(o.doubleValue),d=st(l.doubleValue);return h===d?nc(h)===nc(d):isNaN(h)&&isNaN(d)}return!1}(r,e);case 9:return yo(r.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(Zg(h)!==Zg(d))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(d[p]===void 0||!nr(h[p],d[p])))return!1;return!0}(r,e);default:return we()}}function Ga(r,e){return(r.values||[]).find(t=>nr(t,e))!==void 0}function _o(r,e){if(r===e)return 0;const t=Ei(r),s=Ei(e);if(t!==s)return Ne(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ne(r.booleanValue,e.booleanValue);case 2:return function(l,h){const d=st(l.integerValue||l.doubleValue),p=st(h.integerValue||h.doubleValue);return d<p?-1:d>p?1:d===p?0:isNaN(d)?isNaN(p)?0:-1:1}(r,e);case 3:return ty(r.timestampValue,e.timestampValue);case 4:return ty(qa(r),qa(e));case 5:return Ne(r.stringValue,e.stringValue);case 6:return function(l,h){const d=wi(l),p=wi(h);return d.compareTo(p)}(r.bytesValue,e.bytesValue);case 7:return function(l,h){const d=l.split("/"),p=h.split("/");for(let y=0;y<d.length&&y<p.length;y++){const w=Ne(d[y],p[y]);if(w!==0)return w}return Ne(d.length,p.length)}(r.referenceValue,e.referenceValue);case 8:return function(l,h){const d=Ne(st(l.latitude),st(h.latitude));return d!==0?d:Ne(st(l.longitude),st(h.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ny(r.arrayValue,e.arrayValue);case 10:return function(l,h){var d,p,y,w;const T=l.fields||{},S=h.fields||{},O=(d=T.value)===null||d===void 0?void 0:d.arrayValue,U=(p=S.value)===null||p===void 0?void 0:p.arrayValue,$=Ne(((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0,((w=U==null?void 0:U.values)===null||w===void 0?void 0:w.length)||0);return $!==0?$:ny(O,U)}(r.mapValue,e.mapValue);case 11:return function(l,h){if(l===Nu.mapValue&&h===Nu.mapValue)return 0;if(l===Nu.mapValue)return 1;if(h===Nu.mapValue)return-1;const d=l.fields||{},p=Object.keys(d),y=h.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let T=0;T<p.length&&T<w.length;++T){const S=Ne(p[T],w[T]);if(S!==0)return S;const O=_o(d[p[T]],y[w[T]]);if(O!==0)return O}return Ne(p.length,w.length)}(r.mapValue,e.mapValue);default:throw we()}}function ty(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ne(r,e);const t=vi(r),s=vi(e),o=Ne(t.seconds,s.seconds);return o!==0?o:Ne(t.nanos,s.nanos)}function ny(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=_o(t[o],s[o]);if(l)return l}return Ne(t.length,s.length)}function vo(r){return zd(r)}function zd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const s=vi(t);return`time(${s.seconds},${s.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return wi(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ye.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=zd(l);return s+"]"}(r.arrayValue):"mapValue"in r?function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${zd(t.fields[h])}`;return o+"}"}(r.mapValue):we()}function Bu(r){switch(Ei(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tc(r);return e?16+Bu(e):16;case 5:return 2*r.stringValue.length;case 6:return wi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((o,l)=>o+Bu(l),0)}(r.arrayValue);case 10:case 11:return function(s){let o=0;return Ci(s.fields,(l,h)=>{o+=l.length+Bu(h)}),o}(r.mapValue);default:throw we()}}function Bd(r){return!!r&&"integerValue"in r}function Af(r){return!!r&&"arrayValue"in r}function ry(r){return!!r&&"nullValue"in r}function iy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function $u(r){return!!r&&"mapValue"in r}function _R(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Ma(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ci(r.mapValue.fields,(t,s)=>e.mapValue.fields[t]=Ma(s)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ma(r.arrayValue.values[t]);return e}return Object.assign({},r)}function vR(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!$u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ma(t)}setAll(e){let t=kt.emptyPath(),s={},o=[];e.forEach((h,d)=>{if(!t.isImmediateParentOf(d)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=Ma(h):o.push(d.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());$u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];$u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ci(t,(o,l)=>e[o]=l);for(const o of s)delete e[o]}clone(){return new en(Ma(this.value))}}function ov(r){const e=[];return Ci(r.fields,(t,s)=>{const o=new kt([t]);if($u(s)){const l=ov(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,l,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ft(e,0,Ee.min(),Ee.min(),Ee.min(),en.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,Ee.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ee.min(),Ee.min(),en.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ee.min(),Ee.min(),en.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,t){this.position=e,this.inclusive=t}}function sy(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=ye.comparator(ye.fromName(h.referenceValue),t.key):s=_o(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function oy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!nr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function wR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{}class pt extends av{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new TR(e,t,s):t==="array-contains"?new RR(e,s):t==="in"?new CR(e,s):t==="not-in"?new AR(e,s):t==="array-contains-any"?new kR(e,s):new pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new IR(e,s):new SR(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(_o(t,this.value)):t!==null&&Ei(this.value)===Ei(t)&&this.matchesComparison(_o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends av{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new rr(e,t)}matches(e){return lv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function lv(r){return r.op==="and"}function uv(r){return ER(r)&&lv(r)}function ER(r){for(const e of r.filters)if(e instanceof rr)return!1;return!0}function $d(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+vo(r.value);if(uv(r))return r.filters.map(e=>$d(e)).join(",");{const e=r.filters.map(t=>$d(t)).join(",");return`${r.op}(${e})`}}function cv(r,e){return r instanceof pt?function(s,o){return o instanceof pt&&s.op===o.op&&s.field.isEqual(o.field)&&nr(s.value,o.value)}(r,e):r instanceof rr?function(s,o){return o instanceof rr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce((l,h,d)=>l&&cv(h,o.filters[d]),!0):!1}(r,e):void we()}function hv(r){return r instanceof pt?function(t){return`${t.field.canonicalString()} ${t.op} ${vo(t.value)}`}(r):r instanceof rr?function(t){return t.op.toString()+" {"+t.getFilters().map(hv).join(" ,")+"}"}(r):"Filter"}class TR extends pt{constructor(e,t,s){super(e,t,s),this.key=ye.fromName(s.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class IR extends pt{constructor(e,t){super(e,"in",t),this.keys=dv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SR extends pt{constructor(e,t){super(e,"not-in",t),this.keys=dv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function dv(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(s=>ye.fromName(s.referenceValue))}class RR extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Af(t)&&Ga(t.arrayValue,this.value)}}class CR extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ga(this.value.arrayValue,t)}}class AR extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ga(this.value.arrayValue,t)}}class kR extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(s=>Ga(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,t=null,s=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.ue=null}}function ay(r,e=null,t=[],s=[],o=null,l=null,h=null){return new PR(r,e,t,s,o,l,h)}function kf(r){const e=Ie(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(s=>$d(s)).join(","),t+="|ob:",t+=e.orderBy.map(s=>function(l){return l.field.canonicalString()+l.dir}(s)).join(","),Ec(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(s=>vo(s)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(s=>vo(s)).join(",")),e.ue=t}return e.ue}function Pf(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!wR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!cv(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!oy(r.startAt,e.startAt)&&oy(r.endAt,e.endAt)}function Hd(r){return ye.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t=null,s=[],o=[],l=null,h="F",d=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xR(r,e,t,s,o,l,h,d){return new Ic(r,e,t,s,o,l,h,d)}function fv(r){return new Ic(r)}function ly(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function NR(r){return r.collectionGroup!==null}function Fa(r){const e=Ie(r);if(e.ce===null){e.ce=[];const t=new Set;for(const l of e.explicitOrderBy)e.ce.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new gt(kt.comparator);return h.filters.forEach(p=>{p.getFlattenedFilters().forEach(y=>{y.isInequality()&&(d=d.add(y.field))})}),d})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.ce.push(new ic(l,s))}),t.has(kt.keyField().canonicalString())||e.ce.push(new ic(kt.keyField(),s))}return e.ce}function er(r){const e=Ie(r);return e.le||(e.le=DR(e,Fa(r))),e.le}function DR(r,e){if(r.limitType==="F")return ay(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(o=>{const l=o.dir==="desc"?"asc":"desc";return new ic(o.field,l)});const t=r.endAt?new rc(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new rc(r.startAt.position,r.startAt.inclusive):null;return ay(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function Wd(r,e,t){return new Ic(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Sc(r,e){return Pf(er(r),er(e))&&r.limitType===e.limitType}function pv(r){return`${kf(er(r))}|lt:${r.limitType}`}function ao(r){return`Query(target=${function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map(o=>hv(o)).join(", ")}]`),Ec(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map(o=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(o)).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map(o=>vo(o)).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map(o=>vo(o)).join(",")),`Target(${s})`}(er(r))}; limitType=${r.limitType})`}function Rc(r,e){return e.isFoundDocument()&&function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ye.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)}(r,e)&&function(s,o){for(const l of Fa(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0}(r,e)&&function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0}(r,e)&&function(s,o){return!(s.startAt&&!function(h,d,p){const y=sy(h,d,p);return h.inclusive?y<=0:y<0}(s.startAt,Fa(s),o)||s.endAt&&!function(h,d,p){const y=sy(h,d,p);return h.inclusive?y>=0:y>0}(s.endAt,Fa(s),o))}(r,e)}function bR(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function mv(r){return(e,t)=>{let s=!1;for(const o of Fa(r)){const l=OR(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function OR(r,e,t){const s=r.field.isKeyField()?ye.comparator(e.key,t.key):function(l,h,d){const p=h.data.field(l),y=d.data.field(l);return p!==null&&y!==null?_o(p,y):we()}(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return we()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ci(this.inner,(t,s)=>{for(const[o,l]of s)e(o,l)})}isEmpty(){return iv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new et(ye.comparator);function br(){return LR}const gv=new et(ye.comparator);function Oa(...r){let e=gv;for(const t of r)e=e.insert(t.key,t);return e}function yv(r){let e=gv;return r.forEach((t,s)=>e=e.insert(t,s.overlayedDocument)),e}function is(){return Ua()}function _v(){return Ua()}function Ua(){return new ds(r=>r.toString(),(r,e)=>r.isEqual(e))}const VR=new et(ye.comparator),MR=new gt(ye.comparator);function Pe(...r){let e=MR;for(const t of r)e=e.add(t);return e}const FR=new gt(Ne);function UR(){return FR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nc(e)?"-0":e}}function vv(r){return{integerValue:""+r}}function jR(r,e){return fR(e)?vv(e):xf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function zR(r,e,t){return r instanceof sc?function(o,l){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Cf(l)&&(l=Tc(l)),l&&(h.fields.__previous_value__=l),{mapValue:h}}(t,e):r instanceof Qa?Ev(r,e):r instanceof Ya?Tv(r,e):function(o,l){const h=wv(o,l),d=uy(h)+uy(o.Pe);return Bd(h)&&Bd(o.Pe)?vv(d):xf(o.serializer,d)}(r,e)}function BR(r,e,t){return r instanceof Qa?Ev(r,e):r instanceof Ya?Tv(r,e):t}function wv(r,e){return r instanceof oc?function(s){return Bd(s)||function(l){return!!l&&"doubleValue"in l}(s)}(e)?e:{integerValue:0}:null}class sc extends Cc{}class Qa extends Cc{constructor(e){super(),this.elements=e}}function Ev(r,e){const t=Iv(e);for(const s of r.elements)t.some(o=>nr(o,s))||t.push(s);return{arrayValue:{values:t}}}class Ya extends Cc{constructor(e){super(),this.elements=e}}function Tv(r,e){let t=Iv(e);for(const s of r.elements)t=t.filter(o=>!nr(o,s));return{arrayValue:{values:t}}}class oc extends Cc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function uy(r){return st(r.integerValue||r.doubleValue)}function Iv(r){return Af(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function $R(r,e){return r.field.isEqual(e.field)&&function(s,o){return s instanceof Qa&&o instanceof Qa||s instanceof Ya&&o instanceof Ya?yo(s.elements,o.elements,nr):s instanceof oc&&o instanceof oc?nr(s.Pe,o.Pe):s instanceof sc&&o instanceof sc}(r.transform,e.transform)}class HR{constructor(e,t){this.version=e,this.transformResults=t}}class Un{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Un}static exists(e){return new Un(void 0,e)}static updateTime(e){return new Un(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Ac{}function Sv(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Nf(r.key,Un.none()):new ol(r.key,r.data,Un.none());{const t=r.data,s=en.empty();let o=new gt(kt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ai(r.key,s,new un(o.toArray()),Un.none())}}function WR(r,e,t){r instanceof ol?function(o,l,h){const d=o.value.clone(),p=hy(o.fieldTransforms,l,h.transformResults);d.setAll(p),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()}(r,e,t):r instanceof Ai?function(o,l,h){if(!Hu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=hy(o.fieldTransforms,l,h.transformResults),p=l.data;p.setAll(Rv(o)),p.setAll(d),l.convertToFoundDocument(h.version,p).setHasCommittedMutations()}(r,e,t):function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,t)}function ja(r,e,t,s){return r instanceof ol?function(l,h,d,p){if(!Hu(l.precondition,h))return d;const y=l.value.clone(),w=dy(l.fieldTransforms,p,h);return y.setAll(w),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null}(r,e,t,s):r instanceof Ai?function(l,h,d,p){if(!Hu(l.precondition,h))return d;const y=dy(l.fieldTransforms,p,h),w=h.data;return w.setAll(Rv(l)),w.setAll(y),h.convertToFoundDocument(h.version,w).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(T=>T.field))}(r,e,t,s):function(l,h,d){return Hu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d}(r,e,t)}function qR(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=wv(s.transform,o||null);l!=null&&(t===null&&(t=en.empty()),t.set(s.field,l))}return t||null}function cy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&yo(s,o,(l,h)=>$R(l,h))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class ol extends Ac{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ai extends Ac{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Rv(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}}),e}function hy(r,e,t){const s=new Map;Ue(r.length===t.length);for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);s.set(l.field,BR(h,d,t[o]))}return s}function dy(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,zR(l,h,e))}return s}class Nf extends Ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KR extends Ac{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&WR(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=ja(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=ja(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=_v();return this.mutations.forEach(o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const p=Sv(h,d);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Pe())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(t,s)=>cy(t,s))&&yo(this.baseMutations,e.baseMutations,(t,s)=>cy(t,s))}}class Df{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ue(e.mutations.length===s.length);let o=function(){return VR}();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Df(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Oe;function XR(r){switch(r){default:return we();case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0}}function Cv(r){if(r===void 0)return Dr("GRPC error has no .code"),J.UNKNOWN;switch(r){case lt.OK:return J.OK;case lt.CANCELLED:return J.CANCELLED;case lt.UNKNOWN:return J.UNKNOWN;case lt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case lt.INTERNAL:return J.INTERNAL;case lt.UNAVAILABLE:return J.UNAVAILABLE;case lt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case lt.NOT_FOUND:return J.NOT_FOUND;case lt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case lt.ABORTED:return J.ABORTED;case lt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case lt.DATA_LOSS:return J.DATA_LOSS;default:return we()}}(Oe=lt||(lt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR=new os([4294967295,4294967295],0);function fy(r){const e=JR().encode(r),t=new Y_;return t.update(e),new Uint8Array(t.digest())}function py(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new os([t,s],0),new os([o,l],0)]}class bf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new La(`Invalid padding: ${t}`);if(s<0)throw new La(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new La(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new La(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=os.fromNumber(this.Te)}Ee(e,t,s){let o=e.add(t.multiply(os.fromNumber(s)));return o.compare(ZR)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=fy(e),[s,o]=py(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);if(!this.de(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new bf(l,o,t);return s.forEach(d=>h.insert(d)),h}insert(e){if(this.Te===0)return;const t=fy(e),[s,o]=py(t);for(let l=0;l<this.hashCount;l++){const h=this.Ee(s,o,l);this.Ae(h)}}Ae(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class La extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,al.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new kc(Ee.min(),o,new et(Ne),br(),Pe())}}class al{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new al(s,t,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,t,s,o){this.Re=e,this.removedTargetIds=t,this.key=s,this.Ve=o}}class Av{constructor(e,t){this.targetId=e,this.me=t}}class kv{constructor(e,t,s=Pt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class my{constructor(){this.fe=0,this.ge=gy(),this.pe=Pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),t=Pe(),s=Pe();return this.ge.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:we()}}),new al(this.pe,this.ye,e,t,s)}Ce(){this.we=!1,this.ge=gy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class eC{constructor(e){this.Le=e,this.Be=new Map,this.ke=br(),this.qe=Du(),this.Qe=Du(),this.Ke=new et(Ne)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const s=this.ze(t);switch(e.state){case 0:this.je(t)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(t);break;case 3:this.je(t)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),s.De(e.resumeToken));break;default:we()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((s,o)=>{this.je(o)&&t(o)})}Je(e){const t=e.targetId,s=e.me.count,o=this.Ye(t);if(o){const l=o.target;if(Hd(l))if(s===0){const h=new ye(l.path);this.We(t,h,Ft.newNoDocument(h,Ee.min()))}else Ue(s===1);else{const h=this.Ze(t);if(h!==s){const d=this.Xe(e),p=d?this.et(d,e,h):1;if(p!==0){this.He(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,y)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=wi(s).toUint8Array()}catch(p){if(p instanceof sv)return go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{d=new bf(h,o,l)}catch(p){return go(p instanceof La?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return d.Te===0?null:d}et(e,t,s){return t.me.count===s-this.rt(e,t.targetId)?0:2}rt(e,t){const s=this.Le.getRemoteKeysForTarget(t);let o=0;return s.forEach(l=>{const h=this.Le.nt(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.We(t,l,null),o++)}),o}it(e){const t=new Map;this.Be.forEach((l,h)=>{const d=this.Ye(h);if(d){if(l.current&&Hd(d.target)){const p=new ye(d.target.path);this.st(p).has(h)||this.ot(h,p)||this.We(h,p,Ft.newNoDocument(p,e))}l.be&&(t.set(h,l.ve()),l.Ce())}});let s=Pe();this.Qe.forEach((l,h)=>{let d=!0;h.forEachWhile(p=>{const y=this.Ye(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)}),d&&(s=s.add(l))}),this.ke.forEach((l,h)=>h.setReadTime(e));const o=new kc(e,t,this.Ke,this.ke,s);return this.ke=br(),this.qe=Du(),this.Qe=Du(),this.Ke=new et(Ne),o}Ue(e,t){if(!this.je(e))return;const s=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,s),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,s){if(!this.je(e))return;const o=this.ze(e);this.ot(e,t)?o.Fe(t,1):o.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),s&&(this.ke=this.ke.insert(t,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new my,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new gt(Ne),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new gt(Ne),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new my),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Du(){return new et(ye.comparator)}function gy(){return new et(ye.comparator)}const tC={asc:"ASCENDING",desc:"DESCENDING"},nC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rC={and:"AND",or:"OR"};class iC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qd(r,e){return r.useProto3Json||Ec(e)?e:{value:e}}function ac(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pv(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function sC(r,e){return ac(r,e.toTimestamp())}function tr(r){return Ue(!!r),Ee.fromTimestamp(function(t){const s=vi(t);return new mt(s.seconds,s.nanos)}(r))}function Of(r,e){return Kd(r,e).canonicalString()}function Kd(r,e){const t=function(o){return new Ye(["projects",o.projectId,"databases",o.database])}(r).child("documents");return e===void 0?t:t.child(e)}function xv(r){const e=Ye.fromString(r);return Ue(Lv(e)),e}function Gd(r,e){return Of(r.databaseId,e.path)}function Sd(r,e){const t=xv(e);if(t.get(1)!==r.databaseId.projectId)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new fe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ye(Dv(t))}function Nv(r,e){return Of(r.databaseId,e)}function oC(r){const e=xv(r);return e.length===4?Ye.emptyPath():Dv(e)}function Qd(r){return new Ye(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Dv(r){return Ue(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function yy(r,e,t){return{name:Gd(r,e),fields:t.value.mapValue.fields}}function aC(r,e){let t;if("targetChange"in e){e.targetChange;const s=function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:we()}(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=function(y,w){return y.useProto3Json?(Ue(w===void 0||typeof w=="string"),Pt.fromBase64String(w||"")):(Ue(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Pt.fromUint8Array(w||new Uint8Array))}(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&function(y){const w=y.code===void 0?J.UNKNOWN:Cv(y.code);return new fe(w,y.message||"")}(h);t=new kv(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Sd(r,s.document.name),l=tr(s.document.updateTime),h=s.document.createTime?tr(s.document.createTime):Ee.min(),d=new en({mapValue:{fields:s.document.fields}}),p=Ft.newFoundDocument(o,l,h,d),y=s.targetIds||[],w=s.removedTargetIds||[];t=new Wu(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Sd(r,s.document),l=s.readTime?tr(s.readTime):Ee.min(),h=Ft.newNoDocument(o,l),d=s.removedTargetIds||[];t=new Wu([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Sd(r,s.document),l=s.removedTargetIds||[];t=new Wu([],l,o,null)}else{if(!("filter"in e))return we();{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new YR(o,l),d=s.targetId;t=new Av(d,h)}}return t}function lC(r,e){let t;if(e instanceof ol)t={update:yy(r,e.key,e.value)};else if(e instanceof Nf)t={delete:Gd(r,e.key)};else if(e instanceof Ai)t={update:yy(r,e.key,e.data),updateMask:yC(e.fieldMask)};else{if(!(e instanceof KR))return we();t={verify:Gd(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(s=>function(l,h){const d=h.transform;if(d instanceof sc)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Qa)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ya)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof oc)return{fieldPath:h.field.canonicalString(),increment:d.Pe};throw we()}(0,s))),e.precondition.isNone||(t.currentDocument=function(o,l){return l.updateTime!==void 0?{updateTime:sC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:we()}(r,e.precondition)),t}function uC(r,e){return r&&r.length>0?(Ue(e!==void 0),r.map(t=>function(o,l){let h=o.updateTime?tr(o.updateTime):tr(l);return h.isEqual(Ee.min())&&(h=tr(l)),new HR(h,o.transformResults||[])}(t,e))):[]}function cC(r,e){return{documents:[Nv(r,e.path)]}}function hC(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Nv(r,o);const l=function(y){if(y.length!==0)return Ov(rr.create(y,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const h=function(y){if(y.length!==0)return y.map(w=>function(S){return{field:lo(S.field),direction:pC(S.dir)}}(w))}(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=qd(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=function(y){return{before:y.inclusive,values:y.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(y){return{before:!y.inclusive,values:y.position}}(e.endAt)),{ct:t,parent:o}}function dC(r){let e=oC(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ue(s===1);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=function(T){const S=bv(T);return S instanceof rr&&uv(S)?S.getFilters():[S]}(t.where));let h=[];t.orderBy&&(h=function(T){return T.map(S=>function(U){return new ic(uo(U.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(S))}(t.orderBy));let d=null;t.limit&&(d=function(T){let S;return S=typeof T=="object"?T.value:T,Ec(S)?null:S}(t.limit));let p=null;t.startAt&&(p=function(T){const S=!!T.before,O=T.values||[];return new rc(O,S)}(t.startAt));let y=null;return t.endAt&&(y=function(T){const S=!T.before,O=T.values||[];return new rc(O,S)}(t.endAt)),xR(e,o,h,l,d,"F",p,y)}function fC(r,e){const t=function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function bv(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=uo(t.unaryFilter.field);return pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=uo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=uo(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=uo(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});default:return we()}}(r):r.fieldFilter!==void 0?function(t){return pt.create(uo(t.fieldFilter.field),function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return we()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return rr.create(t.compositeFilter.filters.map(s=>bv(s)),function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we()}}(t.compositeFilter.op))}(r):we()}function pC(r){return tC[r]}function mC(r){return nC[r]}function gC(r){return rC[r]}function lo(r){return{fieldPath:r.canonicalString()}}function uo(r){return kt.fromServerFormat(r.fieldPath)}function Ov(r){return r instanceof pt?function(t){if(t.op==="=="){if(iy(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NAN"}};if(ry(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(iy(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NAN"}};if(ry(t.value))return{unaryFilter:{field:lo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lo(t.field),op:mC(t.op),value:t.value}}}(r):r instanceof rr?function(t){const s=t.getFilters().map(o=>Ov(o));return s.length===1?s[0]:{compositeFilter:{op:gC(t.op),filters:s}}}(r):we()}function yC(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Lv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e,t,s,o,l=Ee.min(),h=Ee.min(),d=Pt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=p}withSequenceNumber(e){return new hi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.ht=e}}function vC(r){const e=dC({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Wd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.ln=new EC}addToCollectionParentIndex(e,t){return this.ln.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(_i.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(_i.min())}updateCollectionGroup(e,t,s){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class EC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new gt(Ye.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new gt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Zt{static withCacheSize(e){return new Zt(e,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zt.DEFAULT_COLLECTION_PERCENTILE=10,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Zt.DEFAULT=new Zt(41943040,Zt.DEFAULT_COLLECTION_PERCENTILE,Zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Zt.DISABLED=new Zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new wo(0)}static Qn(){return new wo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vy([r,e],[t,s]){const o=Ne(r,t);return o===0?Ne(e,s):o}class TC{constructor(e){this.Gn=e,this.buffer=new gt(vy),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();vy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class IC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){oe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){No(t)?oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await xo(t)}await this.Yn(3e5)})}}class SC{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(s=>Math.floor(t/100*s))}nthSequenceNumber(e,t){if(t===0)return G.resolve(wc.oe);const s=new TC(t);return this.Zn.forEachTarget(e,o=>s.Hn(o.sequenceNumber)).next(()=>this.Zn.er(e,o=>s.Hn(o))).next(()=>s.maxValue)}removeTargets(e,t,s){return this.Zn.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(_y)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_y):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let s,o,l,h,d,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o))).next(T=>(s=T,d=Date.now(),this.removeTargets(e,s,t))).next(T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s))).next(T=>(y=Date.now(),oo()<=ke.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-w}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(p-d)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T})))}}function RC(r,e){return new SC(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(){this.changes=new ds(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?G.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(s=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(s!==null&&ja(s.mutation,o,un.empty(),mt.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.getLocalViewOfDocuments(e,s,Pe()).next(()=>s))}getLocalViewOfDocuments(e,t,s=Pe()){const o=is();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,s).next(l=>{let h=Oa();return l.forEach((d,p)=>{h=h.insert(d,p.overlayedDocument)}),h}))}getOverlayedDocuments(e,t){const s=is();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,Pe()))}populateOverlays(e,t,s){const o=[];return s.forEach(l=>{t.has(l)||o.push(l)}),this.documentOverlayCache.getOverlays(e,o).next(l=>{l.forEach((h,d)=>{t.set(h,d)})})}computeViews(e,t,s,o){let l=br();const h=Ua(),d=function(){return Ua()}();return t.forEach((p,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof Ai)?l=l.insert(y.key,y):w!==void 0?(h.set(y.key,w.mutation.getFieldMask()),ja(w.mutation,y,w.mutation.getFieldMask(),mt.now())):h.set(y.key,un.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((y,w)=>h.set(y,w)),t.forEach((y,w)=>{var T;return d.set(y,new AC(w,(T=h.get(y))!==null&&T!==void 0?T:null))}),d))}recalculateAndSaveOverlays(e,t){const s=Ua();let o=new et((h,d)=>h-d),l=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(h=>{for(const d of h)d.keys().forEach(p=>{const y=t.get(p);if(y===null)return;let w=s.get(p)||un.empty();w=d.applyToLocalView(y,w),s.set(p,w);const T=(o.get(d.batchId)||Pe()).add(p);o=o.insert(d.batchId,T)})}).next(()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const p=d.getNext(),y=p.key,w=p.value,T=_v();w.forEach(S=>{if(!l.has(S)){const O=Sv(t.get(S),s.get(S));O!==null&&T.set(S,O),l=l.add(S)}}),h.push(this.documentOverlayCache.saveOverlays(e,y,T))}return G.waitFor(h)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,t,s,o){return function(h){return ye.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next(l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):G.resolve(is());let d=-1,p=l;return h.next(y=>G.forEach(y,(w,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(w)?G.resolve():this.remoteDocumentCache.getEntry(e,w).next(S=>{p=p.insert(w,S)}))).next(()=>this.populateOverlays(e,y,l)).next(()=>this.computeViews(e,p,y,Pe())).next(w=>({batchId:d,changes:yv(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(s=>{let o=Oa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=Oa();return this.indexManager.getCollectionParents(e,l).next(d=>G.forEach(d,p=>{const y=function(T,S){return new Ic(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next(w=>{w.forEach((T,S)=>{h=h.insert(T,S)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next(h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o))).next(h=>{l.forEach((p,y)=>{const w=y.getKey();h.get(w)===null&&(h=h.insert(w,Ft.newInvalidDocument(w)))});let d=Oa();return h.forEach((p,y)=>{const w=l.get(p);w!==void 0&&ja(w.mutation,y,un.empty(),mt.now()),Rc(t,y)&&(d=d.insert(p,y))}),d})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return G.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(o){return{id:o.id,version:o.version,createTime:tr(o.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(o){return{name:o.name,query:vC(o.bundledQuery),readTime:tr(o.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(){this.overlays=new et(ye.comparator),this.Er=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const s=is();return G.forEach(t,o=>this.getOverlay(e,o).next(l=>{l!==null&&s.set(o,l)})).next(()=>s)}saveOverlays(e,t,s){return s.forEach((o,l)=>{this.Tt(e,t,l)}),G.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Er.get(s);return o!==void 0&&(o.forEach(l=>this.overlays=this.overlays.remove(l)),this.Er.delete(s)),G.resolve()}getOverlaysForCollection(e,t,s){const o=is(),l=t.length+1,h=new ye(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const p=d.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return G.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new et((y,w)=>y-w);const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=is(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=is(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=o)););return G.resolve(d)}Tt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Er.get(o.largestBatchId).delete(s.key);this.Er.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new QR(t,s));let l=this.Er.get(t);l===void 0&&(l=Pe(),this.Er.set(t,l)),this.Er.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.dr=new gt(Tt.Ar),this.Rr=new gt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const s=new Tt(e,t);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,t){e.forEach(s=>this.addReference(s,t))}removeReference(e,t){this.gr(new Tt(e,t))}pr(e,t){e.forEach(s=>this.removeReference(s,t))}yr(e){const t=new ye(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1),l=[];return this.Rr.forEachInRange([s,o],h=>{this.gr(h),l.push(h.key)}),l}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ye(new Ye([])),s=new Tt(t,e),o=new Tt(t,e+1);let l=Pe();return this.Rr.forEachInRange([s,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Tt(e,0),s=this.dr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ye.comparator(e.key,t.key)||Ne(e.br,t.br)}static Vr(e,t){return Ne(e.br,t.br)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new gt(Tt.Ar)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new GR(l,t,s,o);this.mutationQueue.push(h);for(const d of o)this.vr=this.vr.add(new Tt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return G.resolve(h)}lookupMutationBatch(e,t){return G.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Fr(s),l=o<0?0:o;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Tt(t,0),o=new Tt(t,Number.POSITIVE_INFINITY),l=[];return this.vr.forEachInRange([s,o],h=>{const d=this.Cr(h.br);l.push(d)}),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new gt(Ne);return t.forEach(o=>{const l=new Tt(o,0),h=new Tt(o,Number.POSITIVE_INFINITY);this.vr.forEachInRange([l,h],d=>{s=s.add(d.br)})}),G.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ye.isDocumentKey(l)||(l=l.child(""));const h=new Tt(new ye(l),0);let d=new gt(Ne);return this.vr.forEachWhile(p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(d=d.add(p.br)),!0)},h),G.resolve(this.Mr(d))}Mr(e){const t=[];return e.forEach(s=>{const o=this.Cr(s);o!==null&&t.push(o)}),t}removeMutationBatch(e,t){Ue(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return G.forEach(t.mutations,o=>{const l=new Tt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,t){const s=new Tt(t,0),o=this.vr.firstAfterOrEqual(s);return G.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.Nr=e,this.docs=function(){return new et(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.Nr(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return G.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=br();return t.forEach(o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))}),G.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=br();const h=t.path,d=new ye(h.child("")),p=this.docs.getIteratorFrom(d);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||uR(lR(w),s)<=0||(o.has(w.key)||Rc(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,s,o){we()}Lr(e,t){return G.forEach(this.docs,s=>t(s))}newChangeBuffer(e){return new OC(this)}getSize(e){return G.resolve(this.size)}}class OC extends CC{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((s,o)=>{o.isValidDocument()?t.push(this.hr.addEntry(e,o)):this.hr.removeEntry(s)}),G.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e){this.persistence=e,this.Br=new ds(t=>kf(t),Pf),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.kr=0,this.qr=new Lf,this.targetCount=0,this.Qr=wo.qn()}forEachTarget(e,t){return this.Br.forEach((s,o)=>t(o)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.kr&&(this.kr=t),G.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new wo(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.Un(t),G.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.Br.forEach((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.Br.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)}),G.waitFor(l).next(()=>o)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const s=this.Br.get(t)||null;return G.resolve(s)}addMatchingKeys(e,t,s){return this.qr.mr(t,s),G.resolve()}removeMatchingKeys(e,t,s){this.qr.pr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const s=this.qr.Sr(t);return G.resolve(s)}containsKey(e,t){return G.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,t){this.Kr={},this.overlays={},this.$r=new wc(0),this.Ur=!1,this.Ur=!0,this.Wr=new NC,this.referenceDelegate=e(this),this.Gr=new LC(this),this.indexManager=new wC,this.remoteDocumentCache=function(o){return new bC(o)}(s=>this.referenceDelegate.zr(s)),this.serializer=new _C(t),this.jr=new PC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.Kr[e.toKey()];return s||(s=new DC(t,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,s){oe("MemoryPersistence","Starting transaction:",e);const o=new VC(this.$r.next());return this.referenceDelegate.Hr(),s(o).next(l=>this.referenceDelegate.Jr(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Yr(e,t){return G.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,t)))}}class VC extends hR{constructor(e){super(),this.currentSequenceNumber=e}}class Vf{constructor(e){this.persistence=e,this.Zr=new Lf,this.Xr=null}static ei(e){return new Vf(e)}get ti(){if(this.Xr)return this.Xr;throw we()}addReference(e,t,s){return this.Zr.addReference(s,t),this.ti.delete(s.toString()),G.resolve()}removeReference(e,t,s){return this.Zr.removeReference(s,t),this.ti.add(s.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),G.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(o=>this.ti.add(o.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.ti.add(l.toString()))}).next(()=>s.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.ti,s=>{const o=ye.fromPath(s);return this.ni(e,o).next(l=>{l||t.removeEntry(o,Ee.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(s=>{s?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return G.or([()=>G.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class lc{constructor(e,t){this.persistence=e,this.ri=new ds(s=>pR(s.path),(s,o)=>s.isEqual(o)),this.garbageCollector=RC(this,t)}static ei(e,t){return new lc(e,t)}Hr(){}Jr(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>t.next(o=>s+o))}nr(e){let t=0;return this.er(e,s=>{t++}).next(()=>t)}er(e,t){return G.forEach(this.ri,(s,o)=>this.ir(e,s,o).next(l=>l?G.resolve():t(o)))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.Lr(e,h=>this.ir(e,h,t).next(d=>{d||(s++,l.removeEntry(h,Ee.min()))})).next(()=>l.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),G.resolve()}removeReference(e,t,s){return this.ri.set(s,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),G.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Bu(e.data.value)),t}ir(e,t,s){return G.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.ri.get(t);return G.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Wi=s,this.Gi=o}static zi(e,t){let s=Pe(),o=Pe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return wT()?8:dR(Ut())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.Xi(e,t).next(h=>{l.result=h}).next(()=>{if(!l.result)return this.es(e,t,o,s).next(h=>{l.result=h})}).next(()=>{if(l.result)return;const h=new MC;return this.ts(e,t,h).next(d=>{if(l.result=d,this.Hi)return this.ns(e,t,h,d.size)})}).next(()=>l.result)}ns(e,t,s,o){return s.documentReadCount<this.Ji?(oo()<=ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ao(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),G.resolve()):(oo()<=ke.DEBUG&&oe("QueryEngine","Query:",ao(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.Yi*o?(oo()<=ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ao(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,er(t))):G.resolve())}Xi(e,t){if(ly(t))return G.resolve(null);let s=er(t);return this.indexManager.getIndexType(e,s).next(o=>o===0?null:(t.limit!==null&&o===1&&(t=Wd(t,null,"F"),s=er(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next(l=>{const h=Pe(...l);return this.Zi.getDocuments(e,h).next(d=>this.indexManager.getMinOffset(e,s).next(p=>{const y=this.rs(t,d);return this.ss(t,y,h,p.readTime)?this.Xi(e,Wd(t,null,"F")):this.os(e,y,t,p)}))})))}es(e,t,s,o){return ly(t)||o.isEqual(Ee.min())?G.resolve(null):this.Zi.getDocuments(e,s).next(l=>{const h=this.rs(t,l);return this.ss(t,h,s,o)?G.resolve(null):(oo()<=ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ao(t)),this.os(e,h,t,aR(o,-1)).next(d=>d))})}rs(e,t){let s=new gt(mv(e));return t.forEach((o,l)=>{Rc(e,l)&&(s=s.add(l))}),s}ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ts(e,t,s){return oo()<=ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ao(t)),this.Zi.getDocumentsMatchingQuery(e,t,_i.min(),s)}os(e,t,s,o){return this.Zi.getDocumentsMatchingQuery(e,s,o).next(l=>(t.forEach(h=>{l=l.insert(h.key,h)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e,t,s,o){this.persistence=e,this._s=t,this.serializer=o,this.us=new et(Ne),this.cs=new ds(l=>kf(l),Pf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kC(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function jC(r,e,t,s){return new UC(r,e,t,s)}async function Mv(r,e){const t=Ie(r);return await t.persistence.runTransaction("Handle user change","readonly",s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next(l=>(o=l,t.Ps(e),t.mutationQueue.getAllMutationBatches(s))).next(l=>{const h=[],d=[];let p=Pe();for(const y of o){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){d.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(s,p).next(y=>({Ts:y,removedBatchIds:h,addedBatchIds:d}))})})}function zC(r,e){const t=Ie(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const o=e.batch.keys(),l=t.hs.newChangeBuffer({trackRemovals:!0});return function(d,p,y,w){const T=y.batch,S=T.keys();let O=G.resolve();return S.forEach(U=>{O=O.next(()=>w.getEntry(p,U)).next($=>{const L=y.docVersions.get(U);Ue(L!==null),$.version.compareTo(L)<0&&(T.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),w.addEntry($)))})}),O.next(()=>d.mutationQueue.removeMutationBatch(p,T))}(t,s,e,l).next(()=>l.apply(s)).next(()=>t.mutationQueue.performConsistencyCheck(s)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(d){let p=Pe();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(p=p.add(d.batch.mutations[y].key));return p}(e))).next(()=>t.localDocuments.getDocuments(s,o))})}function Fv(r){const e=Ie(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function BC(r,e){const t=Ie(r),s=e.snapshotVersion;let o=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.hs.newChangeBuffer({trackRemovals:!0});o=t.us;const d=[];e.targetChanges.forEach((w,T)=>{const S=o.get(T);if(!S)return;d.push(t.Gr.removeMatchingKeys(l,w.removedDocuments,T).next(()=>t.Gr.addMatchingKeys(l,w.addedDocuments,T)));let O=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?O=O.withResumeToken(Pt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,s)),o=o.insert(T,O),function($,L,q){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0}(S,O,w)&&d.push(t.Gr.updateTargetData(l,O))});let p=br(),y=Pe();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))}),d.push($C(l,h,e.documentUpdates).next(w=>{p=w.Is,y=w.Es})),!s.isEqual(Ee.min())){const w=t.Gr.getLastRemoteSnapshotVersion(l).next(T=>t.Gr.setTargetsMetadata(l,l.currentSequenceNumber,s));d.push(w)}return G.waitFor(d).next(()=>h.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,y)).next(()=>p)}).then(l=>(t.us=o,l))}function $C(r,e,t){let s=Pe(),o=Pe();return t.forEach(l=>s=s.add(l)),e.getEntries(r,s).next(l=>{let h=br();return t.forEach((d,p)=>{const y=l.get(d);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),p.isNoDocument()&&p.version.isEqual(Ee.min())?(e.removeEntry(d,p.readTime),h=h.insert(d,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(d,p)):oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",p.version)}),{Is:h,Es:o}})}function HC(r,e){const t=Ie(r);return t.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function WC(r,e){const t=Ie(r);return t.persistence.runTransaction("Allocate target","readwrite",s=>{let o;return t.Gr.getTargetData(s,e).next(l=>l?(o=l,G.resolve(o)):t.Gr.allocateTargetId(s).next(h=>(o=new hi(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Gr.addTargetData(s,o).next(()=>o))))}).then(s=>{const o=t.us.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.us=t.us.insert(s.targetId,s),t.cs.set(e,s.targetId)),s})}async function Yd(r,e,t){const s=Ie(r),o=s.us.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,h=>s.persistence.referenceDelegate.removeTarget(h,o))}catch(h){if(!No(h))throw h;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}s.us=s.us.remove(e),s.cs.delete(o.target)}function wy(r,e,t){const s=Ie(r);let o=Ee.min(),l=Pe();return s.persistence.runTransaction("Execute query","readwrite",h=>function(p,y,w){const T=Ie(p),S=T.cs.get(w);return S!==void 0?G.resolve(T.us.get(S)):T.Gr.getTargetData(y,w)}(s,h,er(e)).next(d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(h,d.targetId).next(p=>{l=p})}).next(()=>s._s.getDocumentsMatchingQuery(h,e,t?o:Ee.min(),t?l:Pe())).next(d=>(qC(s,bR(e),d),{documents:d,ds:l})))}function qC(r,e,t){let s=r.ls.get(e)||Ee.min();t.forEach((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)}),r.ls.set(e,s)}class Ey{constructor(){this.activeTargetIds=UR()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KC{constructor(){this._o=new Ey,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,s){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Ey,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bu=null;function Rd(){return bu===null?bu=function(){return 268435456+Math.round(2147483648*Math.random())}():bu++,"0x"+bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt="WebChannelConnection";class XC extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const s=t.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+t.host,this.Mo=`projects/${o}/databases/${l}`,this.xo=this.databaseId.database==="(default)"?`project_id=${o}`:`project_id=${o}&database_id=${l}`}Oo(t,s,o,l,h){const d=Rd(),p=this.No(t,s.toUriEncodedString());oe("RestConnection",`Sending RPC '${t}' ${d}:`,p,o);const y={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(y,l,h),this.Bo(t,p,y,o).then(w=>(oe("RestConnection",`Received RPC '${t}' ${d}: `,w),w),w=>{throw go("RestConnection",`RPC '${t}' ${d} failed with error: `,w,"url: ",p,"request:",o),w})}ko(t,s,o,l,h,d){return this.Oo(t,s,o,l,h)}Lo(t,s,o){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Po}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((l,h)=>t[h]=l),o&&o.headers.forEach((l,h)=>t[h]=l)}No(t,s){const o=QC[t];return`${this.Fo}/v1/${s}:${o}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,s,o){const l=Rd();return new Promise((h,d)=>{const p=new X_;p.setWithCredentials(!0),p.listenOnce(J_.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case zu.NO_ERROR:const w=p.getResponseJson();oe(Vt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case zu.TIMEOUT:oe(Vt,`RPC '${e}' ${l} timed out`),d(new fe(J.DEADLINE_EXCEEDED,"Request time out"));break;case zu.HTTP_ERROR:const T=p.getStatus();if(oe(Vt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const O=S==null?void 0:S.error;if(O&&O.status&&O.message){const U=function(L){const q=L.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(q)>=0?q:J.UNKNOWN}(O.status);d(new fe(U,O.message))}else d(new fe(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new fe(J.UNAVAILABLE,"Connection failed."));break;default:we()}}finally{oe(Vt,`RPC '${e}' ${l} completed.`)}});const y=JSON.stringify(o);oe(Vt,`RPC '${e}' ${l} sending request:`,o),p.send(t,"POST",y,s,15)})}qo(e,t,s){const o=Rd(),l=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=tv(),d=ev(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Lo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const w=l.join("");oe(Vt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const T=h.createWebChannel(w,p);let S=!1,O=!1;const U=new YC({Eo:L=>{O?oe(Vt,`Not sending because RPC '${e}' stream ${o} is closed:`,L):(S||(oe(Vt,`Opening RPC '${e}' stream ${o} transport.`),T.open(),S=!0),oe(Vt,`RPC '${e}' stream ${o} sending:`,L),T.send(L))},Ao:()=>T.close()}),$=(L,q,K)=>{L.listen(q,ne=>{try{K(ne)}catch(ce){setTimeout(()=>{throw ce},0)}})};return $(T,ba.EventType.OPEN,()=>{O||(oe(Vt,`RPC '${e}' stream ${o} transport opened.`),U.So())}),$(T,ba.EventType.CLOSE,()=>{O||(O=!0,oe(Vt,`RPC '${e}' stream ${o} transport closed`),U.Do())}),$(T,ba.EventType.ERROR,L=>{O||(O=!0,go(Vt,`RPC '${e}' stream ${o} transport errored:`,L),U.Do(new fe(J.UNAVAILABLE,"The operation could not be completed")))}),$(T,ba.EventType.MESSAGE,L=>{var q;if(!O){const K=L.data[0];Ue(!!K);const ne=K,ce=(ne==null?void 0:ne.error)||((q=ne[0])===null||q===void 0?void 0:q.error);if(ce){oe(Vt,`RPC '${e}' stream ${o} received error:`,ce);const Se=ce.status;let Te=function(C){const P=lt[C];if(P!==void 0)return Cv(P)}(Se),N=ce.message;Te===void 0&&(Te=J.INTERNAL,N="Unknown error status: "+Se+" with message "+ce.message),O=!0,U.Do(new fe(Te,N)),T.close()}else oe(Vt,`RPC '${e}' stream ${o} received:`,K),U.vo(K)}}),$(d,Z_.STAT_EVENT,L=>{L.stat===jd.PROXY?oe(Vt,`RPC '${e}' stream ${o} detected buffering proxy`):L.stat===jd.NOPROXY&&oe(Vt,`RPC '${e}' stream ${o} detected no buffering proxy`)}),setTimeout(()=>{U.bo()},0),U}}function Cd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pc(r){return new iC(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,t,s=1e3,o=1.5,l=6e4){this.li=e,this.timerId=t,this.Qo=s,this.Ko=o,this.$o=l,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),o=Math.max(0,t-s);o>0&&oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,o,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e,t,s,o,l,h,d,p){this.li=e,this.Yo=s,this.Zo=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Uv(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(Dr(t.toString()),Dr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,o])=>{this.Xo===t&&this.I_(s,o)},s=>{e(()=>{const o=new fe(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(o)})})}I_(e,t){const s=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(o=>{s(()=>this.E_(o))}),this.stream.onMessage(o=>{s(()=>++this.n_==1?this.A_(o):this.onNext(o))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JC extends jv{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=aC(this.serializer,e),s=function(l){if(!("targetChange"in l))return Ee.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ee.min():h.readTime?tr(h.readTime):Ee.min()}(e);return this.listener.R_(t,s)}V_(e){const t={};t.database=Qd(this.serializer),t.addTarget=function(l,h){let d;const p=h.target;if(d=Hd(p)?{documents:cC(l,p)}:{query:hC(l,p).ct},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=Pv(l,h.resumeToken);const y=qd(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ee.min())>0){d.readTime=ac(l,h.snapshotVersion.toTimestamp());const y=qd(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d}(this.serializer,e);const s=fC(this.serializer,e);s&&(t.labels=s),this.c_(t)}m_(e){const t={};t.database=Qd(this.serializer),t.removeTarget=e,this.c_(t)}}class ZC extends jv{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=uC(e.writeResults,e.commitTime),s=tr(e.commitTime);return this.listener.y_(s,t)}w_(){const e={};e.database=Qd(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(s=>lC(this.serializer,s))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA extends class{}{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.S_=!1}b_(){if(this.S_)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,s,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Oo(e,Kd(t,s),o,l,h)).catch(l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new fe(J.UNKNOWN,l.toString())})}ko(e,t,s,o,l){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,d])=>this.connection.ko(e,Kd(t,s),o,h,d,l)).catch(h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new fe(J.UNKNOWN,h.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class tA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Dr(t),this.C_=!1):oe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=l,this.Q_.uo(h=>{s.enqueueAndForget(async()=>{fs(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(p){const y=Ie(p);y.k_.add(4),await ll(y),y.K_.set("Unknown"),y.k_.delete(4),await xc(y)}(this))})}),this.K_=new tA(s,o)}}async function xc(r){if(fs(r))for(const e of r.q_)await e(!0)}async function ll(r){for(const e of r.q_)await e(!1)}function zv(r,e){const t=Ie(r);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),zf(t)?jf(t):Do(t).s_()&&Uf(t,e))}function Ff(r,e){const t=Ie(r),s=Do(t);t.B_.delete(e),s.s_()&&Bv(t,e),t.B_.size===0&&(s.s_()?s.a_():fs(t)&&t.K_.set("Unknown"))}function Uf(r,e){if(r.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Do(r).V_(e)}function Bv(r,e){r.U_.xe(e),Do(r).m_(e)}function jf(r){r.U_=new eC({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>r.B_.get(e)||null,nt:()=>r.datastore.serializer.databaseId}),Do(r).start(),r.K_.F_()}function zf(r){return fs(r)&&!Do(r).i_()&&r.B_.size>0}function fs(r){return Ie(r).k_.size===0}function $v(r){r.U_=void 0}async function rA(r){r.K_.set("Online")}async function iA(r){r.B_.forEach((e,t)=>{Uf(r,e)})}async function sA(r,e){$v(r),zf(r)?(r.K_.O_(e),jf(r)):r.K_.set("Unknown")}async function oA(r,e,t){if(r.K_.set("Online"),e instanceof kv&&e.state===2&&e.cause)try{await async function(o,l){const h=l.cause;for(const d of l.targetIds)o.B_.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.B_.delete(d),o.U_.removeTarget(d))}(r,e)}catch(s){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await uc(r,s)}else if(e instanceof Wu?r.U_.$e(e):e instanceof Av?r.U_.Je(e):r.U_.Ge(e),!t.isEqual(Ee.min()))try{const s=await Fv(r.localStore);t.compareTo(s)>=0&&await function(l,h){const d=l.U_.it(h);return d.targetChanges.forEach((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.B_.get(y);w&&l.B_.set(y,w.withResumeToken(p.resumeToken,h))}}),d.targetMismatches.forEach((p,y)=>{const w=l.B_.get(p);if(!w)return;l.B_.set(p,w.withResumeToken(Pt.EMPTY_BYTE_STRING,w.snapshotVersion)),Bv(l,p);const T=new hi(w.target,p,y,w.sequenceNumber);Uf(l,T)}),l.remoteSyncer.applyRemoteEvent(d)}(r,t)}catch(s){oe("RemoteStore","Failed to raise snapshot:",s),await uc(r,s)}}async function uc(r,e,t){if(!No(e))throw e;r.k_.add(1),await ll(r),r.K_.set("Offline"),t||(t=()=>Fv(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await t(),r.k_.delete(1),await xc(r)})}function Hv(r,e){return e().catch(t=>uc(r,t,e))}async function Nc(r){const e=Ie(r),t=Ti(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;aA(e);)try{const o=await HC(e.localStore,s);if(o===null){e.L_.length===0&&t.a_();break}s=o.batchId,lA(e,o)}catch(o){await uc(e,o)}Wv(e)&&qv(e)}function aA(r){return fs(r)&&r.L_.length<10}function lA(r,e){r.L_.push(e);const t=Ti(r);t.s_()&&t.f_&&t.g_(e.mutations)}function Wv(r){return fs(r)&&!Ti(r).i_()&&r.L_.length>0}function qv(r){Ti(r).start()}async function uA(r){Ti(r).w_()}async function cA(r){const e=Ti(r);for(const t of r.L_)e.g_(t.mutations)}async function hA(r,e,t){const s=r.L_.shift(),o=Df.from(s,e,t);await Hv(r,()=>r.remoteSyncer.applySuccessfulWrite(o)),await Nc(r)}async function dA(r,e){e&&Ti(r).f_&&await async function(s,o){if(function(h){return XR(h)&&h!==J.ABORTED}(o.code)){const l=s.L_.shift();Ti(s).__(),await Hv(s,()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o)),await Nc(s)}}(r,e),Wv(r)&&qv(r)}async function Iy(r,e){const t=Ie(r);t.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const s=fs(t);t.k_.add(3),await ll(t),s&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await xc(t)}async function fA(r,e){const t=Ie(r);e?(t.k_.delete(2),await xc(t)):e||(t.k_.add(2),await ll(t),t.K_.set("Unknown"))}function Do(r){return r.W_||(r.W_=function(t,s,o){const l=Ie(t);return l.b_(),new JC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:rA.bind(null,r),mo:iA.bind(null,r),po:sA.bind(null,r),R_:oA.bind(null,r)}),r.q_.push(async e=>{e?(r.W_.__(),zf(r)?jf(r):r.K_.set("Unknown")):(await r.W_.stop(),$v(r))})),r.W_}function Ti(r){return r.G_||(r.G_=function(t,s,o){const l=Ie(t);return l.b_(),new ZC(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)}(r.datastore,r.asyncQueue,{Ro:()=>Promise.resolve(),mo:uA.bind(null,r),po:dA.bind(null,r),p_:cA.bind(null,r),y_:hA.bind(null,r)}),r.q_.push(async e=>{e?(r.G_.__(),await Nc(r)):(await r.G_.stop(),r.L_.length>0&&(oe("RemoteStore",`Stopping write stream with ${r.L_.length} pending writes`),r.L_=[]))})),r.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,d=new Bf(e,t,h,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $f(r,e){if(Dr("AsyncQueue",`${e}: ${r}`),No(r))return new fe(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static emptySet(e){return new po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ye.comparator(t.key,s.key):(t,s)=>ye.comparator(t.key,s.key),this.keyedMap=Oa(),this.sortedSet=new et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,s)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(){this.z_=new et(ye.comparator)}track(e){const t=e.doc.key,s=this.z_.get(t);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(t,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(t):e.type===1&&s.type===2?this.z_=this.z_.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):we():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,s)=>{e.push(s)}),e}}class Eo{constructor(e,t,s,o,l,h,d,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach(d=>{h.push({type:0,doc:d})}),new Eo(e,t,po.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class mA{constructor(){this.queries=Ry(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,s){const o=Ie(t),l=o.queries;o.queries=Ry(),l.forEach((h,d)=>{for(const p of d.J_)p.onError(s)})})(this,new fe(J.ABORTED,"Firestore shutting down"))}}function Ry(){return new ds(r=>pv(r),Sc)}async function gA(r,e){const t=Ie(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Y_()&&e.Z_()&&(s=2):(l=new pA,s=e.Z_()?0:1);try{switch(s){case 0:l.H_=await t.onListen(o,!0);break;case 1:l.H_=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=$f(h,`Initialization of query '${ao(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.J_.push(e),e.ea(t.onlineState),l.H_&&e.ta(l.H_)&&Hf(t)}async function yA(r,e){const t=Ie(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.J_.indexOf(e);h>=0&&(l.J_.splice(h,1),l.J_.length===0?o=e.Z_()?0:1:!l.Y_()&&e.Z_()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function _A(r,e){const t=Ie(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.J_)d.ta(o)&&(s=!0);h.H_=o}}s&&Hf(t)}function vA(r,e,t){const s=Ie(r),o=s.queries.get(e);if(o)for(const l of o.J_)l.onError(t);s.queries.delete(e)}function Hf(r){r.X_.forEach(e=>{e.next()})}var Xd,Cy;(Cy=Xd||(Xd={})).na="default",Cy.Cache="cache";class wA{constructor(e,t,s){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Eo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const s=t!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Xd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(e){this.key=e}}class Gv{constructor(e){this.key=e}}class EA{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Pe(),this.mutatedKeys=Pe(),this.Va=mv(e),this.ma=new po(this.Va)}get fa(){return this.da}ga(e,t){const s=t?t.pa:new Sy,o=t?t.ma:this.ma;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((w,T)=>{const S=o.get(w),O=Rc(this.query,T)?T:null,U=!!S&&this.mutatedKeys.has(S.key),$=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let L=!1;S&&O?S.data.isEqual(O.data)?U!==$&&(s.track({type:3,doc:O}),L=!0):this.ya(S,O)||(s.track({type:2,doc:O}),L=!0,(p&&this.Va(O,p)>0||y&&this.Va(O,y)<0)&&(d=!0)):!S&&O?(s.track({type:0,doc:O}),L=!0):S&&!O&&(s.track({type:1,doc:S}),L=!0,(p||y)&&(d=!0)),L&&(O?(h=h.add(O),l=$?l.add(w):l.delete(w)):(h=h.delete(w),l=l.delete(w)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const w=this.query.limitType==="F"?h.last():h.first();h=h.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{ma:h,pa:s,ss:d,mutatedKeys:l}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const h=e.pa.j_();h.sort((w,T)=>function(O,U){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we()}};return $(O)-$(U)}(w.type,T.type)||this.Va(w.doc,T.doc)),this.wa(s),o=o!=null&&o;const d=t&&!o?this.Sa():[],p=this.Ra.size===0&&this.current&&!o?1:0,y=p!==this.Aa;return this.Aa=p,h.length!==0||y?{snapshot:new Eo(this.query,e.ma,l,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:d}:{ba:d}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new Sy,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Pe(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const t=[];return e.forEach(s=>{this.Ra.has(s)||t.push(new Gv(s))}),this.Ra.forEach(s=>{e.has(s)||t.push(new Kv(s))}),t}va(e){this.da=e.ds,this.Ra=Pe();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return Eo.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class TA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class IA{constructor(e){this.key=e,this.Fa=!1}}class SA{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Ma={},this.xa=new ds(d=>pv(d),Sc),this.Oa=new Map,this.Na=new Set,this.La=new et(ye.comparator),this.Ba=new Map,this.ka=new Lf,this.qa={},this.Qa=new Map,this.Ka=wo.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function RA(r,e,t=!0){const s=ew(r);let o;const l=s.xa.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.Ca()):o=await Qv(s,e,t,!0),o}async function CA(r,e){const t=ew(r);await Qv(t,e,!0,!1)}async function Qv(r,e,t,s){const o=await WC(r.localStore,er(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await AA(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&zv(r.remoteStore,o),d}async function AA(r,e,t,s,o){r.Ua=(T,S,O)=>async function($,L,q,K){let ne=L.view.ga(q);ne.ss&&(ne=await wy($.localStore,L.query,!1).then(({documents:N})=>L.view.ga(N,ne)));const ce=K&&K.targetChanges.get(L.targetId),Se=K&&K.targetMismatches.get(L.targetId)!=null,Te=L.view.applyChanges(ne,$.isPrimaryClient,ce,Se);return ky($,L.targetId,Te.ba),Te.snapshot}(r,T,S,O);const l=await wy(r.localStore,e,!0),h=new EA(e,l.ds),d=h.ga(l.documents),p=al.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,p);ky(r,t,y.ba);const w=new TA(e,t,h);return r.xa.set(e,w),r.Oa.has(t)?r.Oa.get(t).push(e):r.Oa.set(t,[e]),y.snapshot}async function kA(r,e,t){const s=Ie(r),o=s.xa.get(e),l=s.Oa.get(o.targetId);if(l.length>1)return s.Oa.set(o.targetId,l.filter(h=>!Sc(h,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Yd(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Ff(s.remoteStore,o.targetId),Jd(s,o.targetId)}).catch(xo)):(Jd(s,o.targetId),await Yd(s.localStore,o.targetId,!0))}async function PA(r,e){const t=Ie(r),s=t.xa.get(e),o=t.Oa.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Ff(t.remoteStore,s.targetId))}async function xA(r,e,t){const s=MA(r);try{const o=await function(h,d){const p=Ie(h),y=mt.now(),w=d.reduce((O,U)=>O.add(U.key),Pe());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",O=>{let U=br(),$=Pe();return p.hs.getEntries(O,w).next(L=>{U=L,U.forEach((q,K)=>{K.isValidDocument()||($=$.add(q))})}).next(()=>p.localDocuments.getOverlayedDocuments(O,U)).next(L=>{T=L;const q=[];for(const K of d){const ne=qR(K,T.get(K.key).overlayedDocument);ne!=null&&q.push(new Ai(K.key,ne,ov(ne.value.mapValue),Un.exists(!0)))}return p.mutationQueue.addMutationBatch(O,y,q,d)}).next(L=>{S=L;const q=L.applyToLocalDocumentSet(T,$);return p.documentOverlayCache.saveOverlays(O,L.batchId,q)})}).then(()=>({batchId:S.batchId,changes:yv(T)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),function(h,d,p){let y=h.qa[h.currentUser.toKey()];y||(y=new et(Ne)),y=y.insert(d,p),h.qa[h.currentUser.toKey()]=y}(s,o.batchId,t),await ul(s,o.changes),await Nc(s.remoteStore)}catch(o){const l=$f(o,"Failed to persist write");t.reject(l)}}async function Yv(r,e){const t=Ie(r);try{const s=await BC(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Ba.get(l);h&&(Ue(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.Fa=!0:o.modifiedDocuments.size>0?Ue(h.Fa):o.removedDocuments.size>0&&(Ue(h.Fa),h.Fa=!1))}),await ul(t,s,e)}catch(s){await xo(s)}}function Ay(r,e,t){const s=Ie(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.xa.forEach((l,h)=>{const d=h.view.ea(e);d.snapshot&&o.push(d.snapshot)}),function(h,d){const p=Ie(h);p.onlineState=d;let y=!1;p.queries.forEach((w,T)=>{for(const S of T.J_)S.ea(d)&&(y=!0)}),y&&Hf(p)}(s.eventManager,e),o.length&&s.Ma.R_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function NA(r,e,t){const s=Ie(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Ba.get(e),l=o&&o.key;if(l){let h=new et(ye.comparator);h=h.insert(l,Ft.newNoDocument(l,Ee.min()));const d=Pe().add(l),p=new kc(Ee.min(),new Map,new et(Ne),h,d);await Yv(s,p),s.La=s.La.remove(l),s.Ba.delete(e),Wf(s)}else await Yd(s.localStore,e,!1).then(()=>Jd(s,e,t)).catch(xo)}async function DA(r,e){const t=Ie(r),s=e.batch.batchId;try{const o=await zC(t.localStore,e);Jv(t,s,null),Xv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await ul(t,o)}catch(o){await xo(o)}}async function bA(r,e,t){const s=Ie(r);try{const o=await function(h,d){const p=Ie(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",y=>{let w;return p.mutationQueue.lookupMutationBatch(y,d).next(T=>(Ue(T!==null),w=T.keys(),p.mutationQueue.removeMutationBatch(y,T))).next(()=>p.mutationQueue.performConsistencyCheck(y)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,d)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w)).next(()=>p.localDocuments.getDocuments(y,w))})}(s.localStore,e);Jv(s,e,t),Xv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await ul(s,o)}catch(o){await xo(o)}}function Xv(r,e){(r.Qa.get(e)||[]).forEach(t=>{t.resolve()}),r.Qa.delete(e)}function Jv(r,e,t){const s=Ie(r);let o=s.qa[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.qa[s.currentUser.toKey()]=o}}function Jd(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Oa.get(e))r.xa.delete(s),t&&r.Ma.Wa(s,t);r.Oa.delete(e),r.isPrimaryClient&&r.ka.yr(e).forEach(s=>{r.ka.containsKey(s)||Zv(r,s)})}function Zv(r,e){r.Na.delete(e.path.canonicalString());const t=r.La.get(e);t!==null&&(Ff(r.remoteStore,t),r.La=r.La.remove(e),r.Ba.delete(t),Wf(r))}function ky(r,e,t){for(const s of t)s instanceof Kv?(r.ka.addReference(s.key,e),OA(r,s)):s instanceof Gv?(oe("SyncEngine","Document no longer in limbo: "+s.key),r.ka.removeReference(s.key,e),r.ka.containsKey(s.key)||Zv(r,s.key)):we()}function OA(r,e){const t=e.key,s=t.path.canonicalString();r.La.get(t)||r.Na.has(s)||(oe("SyncEngine","New document in limbo: "+t),r.Na.add(s),Wf(r))}function Wf(r){for(;r.Na.size>0&&r.La.size<r.maxConcurrentLimboResolutions;){const e=r.Na.values().next().value;r.Na.delete(e);const t=new ye(Ye.fromString(e)),s=r.Ka.next();r.Ba.set(s,new IA(t)),r.La=r.La.insert(t,s),zv(r.remoteStore,new hi(er(fv(t.path)),s,"TargetPurposeLimboResolution",wc.oe))}}async function ul(r,e,t){const s=Ie(r),o=[],l=[],h=[];s.xa.isEmpty()||(s.xa.forEach((d,p)=>{h.push(s.Ua(p,e,t).then(y=>{var w;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(w=t==null?void 0:t.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Mf.zi(p.targetId,y);l.push(T)}}))}),await Promise.all(h),s.Ma.R_(o),await async function(p,y){const w=Ie(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>G.forEach(y,S=>G.forEach(S.Wi,O=>w.persistence.referenceDelegate.addReference(T,S.targetId,O)).next(()=>G.forEach(S.Gi,O=>w.persistence.referenceDelegate.removeReference(T,S.targetId,O)))))}catch(T){if(!No(T))throw T;oe("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const S=T.targetId;if(!T.fromCache){const O=w.us.get(S),U=O.snapshotVersion,$=O.withLastLimboFreeSnapshotVersion(U);w.us=w.us.insert(S,$)}}}(s.localStore,l))}async function LA(r,e){const t=Ie(r);if(!t.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const s=await Mv(t.localStore,e);t.currentUser=e,function(l,h){l.Qa.forEach(d=>{d.forEach(p=>{p.reject(new fe(J.CANCELLED,h))})}),l.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ul(t,s.Ts)}}function VA(r,e){const t=Ie(r),s=t.Ba.get(e);if(s&&s.Fa)return Pe().add(s.key);{let o=Pe();const l=t.Oa.get(e);if(!l)return o;for(const h of l){const d=t.xa.get(h);o=o.unionWith(d.view.fa)}return o}}function ew(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Yv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=NA.bind(null,e),e.Ma.R_=_A.bind(null,e.eventManager),e.Ma.Wa=vA.bind(null,e.eventManager),e}function MA(r){const e=Ie(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=DA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bA.bind(null,e),e}class cc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Pc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return jC(this.persistence,new FC,e.initialUser,this.serializer)}ja(e){return new Vv(Vf.ei,this.serializer)}za(e){return new KC}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cc.provider={build:()=>new cc};class FA extends cc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Ue(this.persistence.referenceDelegate instanceof lc);const s=this.persistence.referenceDelegate.garbageCollector;return new IC(s,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Zt.withCacheSize(this.cacheSizeBytes):Zt.DEFAULT;return new Vv(s=>lc.ei(s,t),this.serializer)}}class Zd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Ay(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=LA.bind(null,this.syncEngine),await fA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new mA}()}createDatastore(e){const t=Pc(e.databaseInfo.databaseId),s=function(l){return new XC(l)}(e.databaseInfo);return function(l,h,d,p){return new eA(l,h,d,p)}(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return function(s,o,l,h,d){return new nA(s,o,l,h,d)}(this.localStore,this.datastore,e.asyncQueue,t=>Ay(this.syncEngine,t,0),function(){return Ty.p()?new Ty:new GC}())}createSyncEngine(e,t){return function(o,l,h,d,p,y,w){const T=new SA(o,l,h,d,p,y);return w&&(T.$a=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(o){const l=Ie(o);oe("RemoteStore","RemoteStore shutting down."),l.k_.add(5),await ll(l),l.Q_.shutdown(),l.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Zd.provider={build:()=>new Zd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Dr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Mt.UNAUTHENTICATED,this.clientId=rv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,async h=>{oe("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(s,h=>(oe("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=$f(t,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function Ad(r,e){r.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener(async o=>{s.isEqual(o)||(await Mv(e.localStore,o),s=o)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function Py(r,e){r.asyncQueue.verifyOperationInProgress();const t=await zA(r);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(s=>Iy(e.remoteStore,s)),r.setAppCheckTokenChangeListener((s,o)=>Iy(e.remoteStore,o)),r._onlineComponents=e}async function zA(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ad(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}(t))throw t;go("Error using user provided cache. Falling back to memory cache: "+t),await Ad(r,new cc)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Ad(r,new FA(void 0));return r._offlineComponents}async function tw(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await Py(r,r._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await Py(r,new Zd))),r._onlineComponents}function BA(r){return tw(r).then(e=>e.syncEngine)}async function $A(r){const e=await tw(r),t=e.eventManager;return t.onListen=RA.bind(null,e.syncEngine),t.onUnlisten=kA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=CA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PA.bind(null,e.syncEngine),t}function HA(r,e,t={}){const s=new mi;return r.asyncQueue.enqueueAndForget(async()=>function(l,h,d,p,y){const w=new UA({next:S=>{w.eu(),h.enqueueAndForget(()=>yA(l,T)),S.fromCache&&p.source==="server"?y.reject(new fe(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),T=new wA(d,w,{includeMetadataChanges:!0,ua:!0});return gA(l,T)}(await $A(r),r.asyncQueue,e,t,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rw(r,e,t){if(!t)throw new fe(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function WA(r,e,t,s){if(e===!0&&s===!0)throw new fe(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Ny(r){if(!ye.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Dy(r){if(ye.isDocumentKey(r))throw new fe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function qf(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":we()}function hs(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qf(r);throw new fe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){var t,s;if(e.host===void 0){if(e.ssl!==void 0)throw new fe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new fe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=nw((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new fe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,o){return s.timeoutSeconds===o.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Dc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new by({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new by(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new J1;switch(s.type){case"firstParty":return new nR(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const s=xy.get(t);s&&(oe("ComponentProvider","Removing Datastore"),xy.delete(t),s.terminate())}(this),Promise.resolve()}}function qA(r,e,t,s={}){var o;const l=(r=hs(r,Dc))._getSettings(),h=`${e}:${t}`;if(l.host!=="firestore.googleapis.com"&&l.host!==h&&go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},l),{host:h,ssl:!1})),s.mockUserToken){let d,p;if(typeof s.mockUserToken=="string")d=s.mockUserToken,p=Mt.MOCK_USER;else{d=fT(s.mockUserToken,(o=r._app)===null||o===void 0?void 0:o.options.projectId);const y=s.mockUserToken.sub||s.mockUserToken.user_id;if(!y)throw new fe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Mt(y)}r._authCredentials=new Z1(new nv(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new bc(this.firestore,e,this._query)}}class wn{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class gi extends bc{constructor(e,t,s){super(e,t,fv(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ye(e))}withConverter(e){return new gi(this.firestore,e,this._path)}}function KA(r,e,...t){if(r=jt(r),rw("collection","path",e),r instanceof Dc){const s=Ye.fromString(e,...t);return Dy(s),new gi(r,null,s)}{if(!(r instanceof wn||r instanceof gi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return Dy(s),new gi(r.firestore,null,s)}}function ef(r,e,...t){if(r=jt(r),arguments.length===1&&(e=rv.newId()),rw("doc","path",e),r instanceof Dc){const s=Ye.fromString(e,...t);return Ny(s),new wn(r,null,new ye(s))}{if(!(r instanceof wn||r instanceof gi))throw new fe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Ye.fromString(e,...t));return Ny(s),new wn(r.firestore,r instanceof gi?r.converter:null,new ye(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Uv(this,"async_queue_retry"),this.fu=()=>{const s=Cd();s&&oe("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const t=Cd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Cd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new mi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!No(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const o=function(h){let d=h.message||"";return h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),d}(s);throw Dr("INTERNAL UNHANDLED ERROR: ",o),s}).then(s=>(this.Ru=!1,s))));return this.gu=t,t}enqueueAfterDelay(e,t,s){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const o=Bf.createAndSchedule(this,e,t,s,l=>this.Su(l));return this.du.push(o),o}pu(){this.Au&&we()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,s)=>t.targetTimeMs-s.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class cl extends Dc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new Oy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Oy(e),this._firestoreClient=void 0,await e}}}function GA(r,e){const t=typeof r=="object"?r:d_(),s=typeof r=="string"?r:"(default)",o=ff(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=hT("firestore");l&&qA(o,...l)}return o}function iw(r){if(r._terminated)throw new fe(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||QA(r),r._firestoreClient}function QA(r){var e,t,s;const o=r._freezeSettings(),l=function(d,p,y,w){return new yR(d,p,y,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,nw(w.experimentalLongPollingOptions),w.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,o);r._componentsProvider||!((t=o.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((s=o.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(r._componentsProvider={_offline:o.localCache._offlineComponentProvider,_online:o.localCache._onlineComponentProvider}),r._firestoreClient=new jA(r._authCredentials,r._appCheckCredentials,r._queue,l,r._componentsProvider&&function(d){const p=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(p),_online:p}}(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this._byteString=e}static fromBase64String(e){try{return new To(Pt.fromBase64String(e))}catch(t){throw new fe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new To(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new fe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new fe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new fe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YA=/^__.*__$/;class XA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms):new ol(e,this.data,t,this.fieldTransforms)}}class sw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ai(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ow(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we()}}class Yf{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Fu(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Yf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Lu(e),o}Bu(e){var t;const s=(t=this.path)===null||t===void 0?void 0:t.child(e),o=this.xu({path:s,Nu:!1});return o.Fu(),o}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return hc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(ow(this.Mu)&&YA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class JA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Pc(e)}$u(e,t,s,o=!1){return new Yf({Mu:e,methodName:t,Ku:s,path:kt.emptyPath(),Nu:!1,Qu:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function aw(r){const e=r._freezeSettings(),t=Pc(r._databaseId);return new JA(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ZA(r,e,t,s,o,l={}){const h=r.$u(l.merge||l.mergeFields?2:0,e,t,o);Xf("Data must be an object, but it was:",h,s);const d=lw(s,h);let p,y;if(l.merge)p=new un(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const w=[];for(const T of l.mergeFields){const S=tf(e,T,t);if(!h.contains(S))throw new fe(J.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);cw(w,S)||w.push(S)}p=new un(w),y=h.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,y=h.fieldTransforms;return new XA(new en(d),p,y)}class Lc extends Kf{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lc}}function ek(r,e,t,s){const o=r.$u(1,e,t);Xf("Data must be an object, but it was:",o,s);const l=[],h=en.empty();Ci(s,(p,y)=>{const w=Jf(e,p,t);y=jt(y);const T=o.Bu(w);if(y instanceof Lc)l.push(w);else{const S=Vc(y,T);S!=null&&(l.push(w),h.set(w,S))}});const d=new un(l);return new sw(h,d,o.fieldTransforms)}function tk(r,e,t,s,o,l){const h=r.$u(1,e,t),d=[tf(e,s,t)],p=[o];if(l.length%2!=0)throw new fe(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)d.push(tf(e,l[S])),p.push(l[S+1]);const y=[],w=en.empty();for(let S=d.length-1;S>=0;--S)if(!cw(y,d[S])){const O=d[S];let U=p[S];U=jt(U);const $=h.Bu(O);if(U instanceof Lc)y.push(O);else{const L=Vc(U,$);L!=null&&(y.push(O),w.set(O,L))}}const T=new un(y);return new sw(w,T,h.fieldTransforms)}function Vc(r,e){if(uw(r=jt(r)))return Xf("Unsupported field value:",e,r),lw(r,e);if(r instanceof Kf)return function(s,o){if(!ow(o.Mu))throw o.qu(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.qu(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,o){const l=[];let h=0;for(const d of s){let p=Vc(d,o.ku(h));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),h++}return{arrayValue:{values:l}}}(r,e)}return function(s,o){if((s=jt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return jR(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:ac(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:ac(o.serializer,l)}}if(s instanceof Gf)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof To)return{bytesValue:Pv(o.serializer,s._byteString)};if(s instanceof wn){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.qu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Of(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Qf)return function(h,d){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:h.toArray().map(p=>{if(typeof p!="number")throw d.qu("VectorValues must only contain numeric values.");return xf(d.serializer,p)})}}}}}}(s,o);throw o.qu(`Unsupported field value: ${qf(s)}`)}(r,e)}function lw(r,e){const t={};return iv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ci(r,(s,o)=>{const l=Vc(o,e.Ou(s));l!=null&&(t[s]=l)}),{mapValue:{fields:t}}}function uw(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof mt||r instanceof Gf||r instanceof To||r instanceof wn||r instanceof Kf||r instanceof Qf)}function Xf(r,e,t){if(!uw(t)||!function(o){return typeof o=="object"&&o!==null&&(Object.getPrototypeOf(o)===Object.prototype||Object.getPrototypeOf(o)===null)}(t)){const s=qf(t);throw s==="an object"?e.qu(r+" a custom object"):e.qu(r+" "+s)}}function tf(r,e,t){if((e=jt(e))instanceof Oc)return e._internalPath;if(typeof e=="string")return Jf(r,e);throw hc("Field path arguments must be of type string or ",r,!1,void 0,t)}const nk=new RegExp("[~\\*/\\[\\]]");function Jf(r,e,t){if(e.search(nk)>=0)throw hc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new Oc(...e.split("."))._internalPath}catch{throw hc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function hc(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(l||h)&&(p+=" (found",l&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new fe(J.INVALID_ARGUMENT,d+r+p)}function cw(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(dw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rk extends hw{data(){return super.data()}}function dw(r,e){return typeof e=="string"?Jf(r,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ik(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sk{convertValue(e,t="none"){switch(Ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw we()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ci(e,(o,l)=>{s[o]=this.convertValue(l,t)}),s}convertVectorValue(e){var t,s,o;const l=(o=(s=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||s===void 0?void 0:s.values)===null||o===void 0?void 0:o.map(h=>st(h.doubleValue));return new Qf(l)}convertGeoPoint(e){return new Gf(st(e.latitude),st(e.longitude))}convertArray(e,t){return(e.values||[]).map(s=>this.convertValue(s,t))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Tc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(qa(e));default:return null}}convertTimestamp(e){const t=vi(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ye.fromString(e);Ue(Lv(s));const o=new Ka(s.get(1),s.get(3)),l=new ye(s.popFirst(5));return o.isEqual(t)||Dr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(r,e,t){let s;return s=r?r.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ak extends hw{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new qu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(dw("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}}class qu extends ak{data(e={}){return super.data(e)}}class lk{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ou(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(s=>{e.call(t,new qu(this._firestore,this._userDataWriter,s.key,s,new Ou(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new fe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map(d=>{const p=new qu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ou(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}})}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(d=>l||d.type!==3).map(d=>{const p=new qu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new Ou(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),w=h.indexOf(d.doc.key)),{type:uk(d.type),doc:p,oldIndex:y,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function uk(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we()}}class ck extends sk{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,t)}}function hk(r){r=hs(r,bc);const e=hs(r.firestore,cl),t=iw(e),s=new ck(e);return ik(r._query),HA(t,r._query).then(o=>new lk(e,s,r,o))}function dk(r,e,t,...s){r=hs(r,wn);const o=hs(r.firestore,cl),l=aw(o);let h;return h=typeof(e=jt(e))=="string"||e instanceof Oc?tk(l,"updateDoc",r._key,e,t,s):ek(l,"updateDoc",r._key,e),Zf(o,[h.toMutation(r._key,Un.exists(!0))])}function fk(r){return Zf(hs(r.firestore,cl),[new Nf(r._key,Un.none())])}function pk(r,e){const t=hs(r.firestore,cl),s=ef(r),o=ok(r.converter,e);return Zf(t,[ZA(aw(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Un.exists(!1))]).then(()=>s)}function Zf(r,e){return function(s,o){const l=new mi;return s.asyncQueue.enqueueAndForget(async()=>xA(await BA(s),o,l)),l.promise}(iw(r),e)}(function(e,t=!0){(function(o){Po=o})(Ao),mo(new as("firestore",(s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),d=new cl(new eR(s.getProvider("auth-internal")),new iR(s.getProvider("app-check-internal")),function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new fe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ka(y.options.projectId,w)}(h,o),h);return l=Object.assign({useFetchStreams:t},l),d._setSettings(l),d},"PUBLIC").setMultipleInstances(!0)),pi(Xg,"4.7.5",e),pi(Xg,"4.7.5","esm2017")})();const mk={apiKey:"AIzaSyC3DZIHW49UVq2uYJt5M8SXbgo3nVfXnjU",authDomain:"fretnot-attendance-b3026.firebaseapp.com",projectId:"fretnot-attendance-b3026",storageBucket:"fretnot-attendance-b3026.firebasestorage.app",messagingSenderId:"1068497148466",appId:"1:1068497148466:web:538e53b89fc500b9ce3a2b"},fw=h_(mk),Io=G1(fw),pw=new Sr,kd=GA(fw);var mw={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ly=ss.createContext&&ss.createContext(mw),gk=["attr","size","title"];function yk(r,e){if(r==null)return{};var t=_k(r,e),s,o;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(r);for(o=0;o<l.length;o++)s=l[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function _k(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function dc(){return dc=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},dc.apply(this,arguments)}function Vy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,s)}return t}function fc(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vy(Object(t),!0).forEach(function(s){vk(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Vy(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function vk(r,e,t){return e=wk(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function wk(r){var e=Ek(r,"string");return typeof e=="symbol"?e:e+""}function Ek(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function gw(r){return r&&r.map((e,t)=>ss.createElement(e.tag,fc({key:t},e.attr),gw(e.child)))}function Mc(r){return e=>ss.createElement(Tk,dc({attr:fc({},r.attr)},e),gw(r.child))}function Tk(r){var e=t=>{var{attr:s,size:o,title:l}=r,h=yk(r,gk),d=o||t.size||"1em",p;return t.className&&(p=t.className),r.className&&(p=(p?p+" ":"")+r.className),ss.createElement("svg",dc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,h,{className:p,style:fc(fc({color:r.color||t.color},t.style),r.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&ss.createElement("title",null,l),r.children)};return Ly!==void 0?ss.createElement(Ly.Consumer,null,t=>e(t)):e(mw)}function yw(r){return Mc({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(r)}/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_w=(...r)=>r.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=H.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:h,...d},p)=>H.createElement("svg",{ref:p,...Sk,width:e,height:e,stroke:r,strokeWidth:s?Number(t)*24/Number(e):t,className:_w("lucide",o),...d},[...h.map(([y,w])=>H.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=(r,e)=>{const t=H.forwardRef(({className:s,...o},l)=>H.createElement(Rk,{ref:l,iconNode:e,className:_w(`lucide-${Ik(r)}`,s),...o}));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ck=sr("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=sr("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ww=sr("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ew=sr("Loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=sr("Music2",[["circle",{cx:"8",cy:"18",r:"4",key:"1fc0mg"}],["path",{d:"M12 18V2l7 4",key:"g04rme"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=sr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=sr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=sr("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=sr("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.469.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pk=sr("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Tw="/assets/bg-BJQISwya.jpeg",xk=({setShowSignUp:r})=>{const[e,t]=H.useState({email:"",password:""}),[s,o]=H.useState({}),[l,h]=H.useState(""),[d,p]=H.useState(!1),[y,w]=H.useState(!1);H.useEffect(()=>{l&&h("")},[e]);const T=()=>{const L={},q=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email?q.test(e.email)||(L.email="Please enter a valid email"):L.email="Email is required",e.password?e.password.length<6&&(L.password="Password must be at least 6 characters"):L.password="Password is required",o(L),Object.keys(L).length===0},S=L=>{const{name:q,value:K}=L.target;t(ne=>({...ne,[q]:K})),s[q]&&o(ne=>({...ne,[q]:""}))},O=async L=>{if(L.preventDefault(),!!T()){p(!0);try{await OS(Io,e.email,e.password),t({email:"",password:""})}catch(q){const K=$(q.code);h(K)}finally{p(!1)}}},U=async()=>{p(!0);try{await G_(Io,pw)}catch(L){const q=$(L.code);h(q)}finally{p(!1)}},$=L=>{switch(L){case"auth/email-already-in-use":return"This email is already registered.";case"auth/weak-password":return"Password must be at least 6 characters.";default:return"An error occurred. Please try again."}};return x.jsx("div",{className:"flex items-center justify-center h-screen text-center p-5",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${Tw})`,backgroundSize:"cover"},children:x.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white  p-8 rounded-xl shadow-2xl",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Sign Up"}),x.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please sign up to continue"})]}),l&&x.jsx("p",{className:"text-red-600 mb-4",children:l}),x.jsxs("form",{onSubmit:O,className:"mt-8 space-y-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("input",{id:"email",type:"email",name:"email",autoComplete:"email",required:!0,value:e.email,onChange:S,placeholder:"Email address",className:`appearance-none relative block w-full px-3 py-2 border ${s.email?"border-red-500":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}),s.email&&x.jsx("p",{className:"text-red-500 text-sm",children:s.email})]}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:y?"text":"password",name:"password",value:e.password,onChange:S,placeholder:"Password",className:`appearance-none relative block w-full px-3 py-2 border ${s.password?"border-red-500":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`}),x.jsx("button",{type:"button",onClick:()=>w(L=>!L),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700","aria-label":y?"Hide password":"Show password",children:y?x.jsx(vw,{size:16}):x.jsx(ww,{size:16})}),s.password&&x.jsx("p",{className:"mt-1 text-sm text-red-600",id:"password-error",children:s.password})]}),x.jsx("button",{type:"submit",disabled:d,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?x.jsx(Ew,{className:"animate-spin mx-auto"}):"Sign Up"})]}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-gray-300"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),x.jsxs("button",{onClick:U,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(yw,{className:"h-5 w-5 mr-2"}),"Sign Up with Google"]}),x.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Already have an account?"," ",x.jsx("button",{onClick:()=>r(!1),className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline transition ease-in-out duration-150",children:"Log in"})]})]})})},Nk=({setShowSignUp:r})=>{const[e,t]=H.useState({email:"",password:""}),[s,o]=H.useState(!1),[l,h]=H.useState(!1),[d,p]=H.useState(""),[y,w]=H.useState({}),T=Ja();H.useEffect(()=>{d&&p("")},[e]);const S=()=>{const q={},K=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.email?K.test(e.email)||(q.email="Please enter a valid email"):q.email="Email is required",e.password?e.password.length<6&&(q.password="Password must be at least 6 characters"):q.password="Password is required",w(q),Object.keys(q).length===0},O=q=>{const{name:K,value:ne}=q.target;t(ce=>({...ce,[K]:ne})),y[K]&&w(ce=>({...ce,[K]:""}))},U=async q=>{if(q.preventDefault(),!!S()){h(!0);try{await LS(Io,e.email,e.password),T("/home")}catch(K){const ne=L(K.code);p(ne)}finally{h(!1)}}},$=async()=>{h(!0);try{await G_(Io,pw),T("/home")}catch(q){const K=L(q.code);p(K)}finally{h(!1)}},L=q=>{switch(q){case"auth/user-not-found":return"No account found with this email";case"auth/wrong-password":return"Incorrect password";case"auth/too-many-requests":return"Too many attempts. Please try again later";default:return"An error occurred. Please try again"}};return x.jsx("div",{className:"flex items-center justify-center h-screen text-center p-5",style:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${Tw})`,backgroundSize:"cover"},children:x.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-2xl",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Welcome Back"}),x.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Please sign in to continue"})]}),x.jsxs("form",{onSubmit:U,className:"mt-8 space-y-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),x.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e.email,onChange:O,className:`appearance-none relative block w-full px-3 py-2 border ${y.email?"border-red-500":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Email address","aria-invalid":y.email?"true":"false","aria-describedby":y.email?"email-error":void 0}),y.email&&x.jsx("p",{className:"mt-1 text-sm text-red-600",id:"email-error",children:y.email})]}),x.jsxs("div",{className:"relative",children:[x.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),x.jsx("input",{id:"password",name:"password",type:s?"text":"password",autoComplete:"current-password",required:!0,value:e.password,onChange:O,className:`appearance-none relative block w-full px-3 py-2 border ${y.password?"border-red-500":"border-gray-300"} placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm`,placeholder:"Password","aria-invalid":y.password?"true":"false","aria-describedby":y.password?"password-error":void 0}),x.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700","aria-label":s?"Hide password":"Show password",children:s?x.jsx(vw,{size:16}):x.jsx(ww,{size:16})}),y.password&&x.jsx("p",{className:"mt-1 text-sm text-red-600",id:"password-error",children:y.password})]})]}),d&&x.jsx("div",{className:"rounded-md bg-red-50 p-4",children:x.jsx("h3",{className:"text-sm font-medium text-red-800",children:d})}),x.jsx("div",{children:x.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?x.jsx(Ew,{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white"}):"Sign in"})})]}),x.jsxs("div",{className:"relative",children:[x.jsx("div",{className:"absolute inset-0 flex items-center",children:x.jsx("div",{className:"w-full border-t border-gray-300"})}),x.jsx("div",{className:"relative flex justify-center text-sm",children:x.jsx("span",{className:"px-2 bg-white text-gray-500",children:"Or continue with"})})]}),x.jsxs("button",{onClick:$,disabled:l,className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(yw,{className:"h-5 w-5 mr-2"}),"Sign in with Google"]}),x.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Don't have an account?"," ",x.jsx("button",{onClick:()=>r(!0),className:"font-medium text-blue-600 hover:text-blue-500 focus:outline-none focus:underline transition ease-in-out duration-150",children:"Sign up"})]})]})})},Dk=({title:r,description:e,onClick:t,bgColor:s="bg-white"})=>x.jsx("button",{onClick:t,className:`${s} rounded-lg p-6 shadow-lg hover:shadow-xl transition-all duration-200 w-full text-left hover:scale-105`,children:x.jsxs("div",{className:"flex flex-col space-y-2",children:[x.jsx("h3",{className:"text-xl font-bold",children:r}),x.jsx("p",{className:"text-gray-600 text-sm",children:e})]})}),bk=()=>x.jsxs("div",{className:"bg-zen-gradient rounded-lg shadow-lg p-8 text-white relative overflow-hidden",children:[x.jsx("div",{className:"relative z-10",children:x.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to the Dashboard"})}),x.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/10 transform rotate-45 -translate-y-8 translate-x-8"})]}),Ok=()=>{const r=Ja(),e=[{title:"Students",description:"Edit or view all students or add new ones",onClick:()=>r("/students"),bgColor:"bg-blue-50 hover:bg-blue-100"},{title:"Attendance",description:"Mark and view student attendance",onClick:()=>r("/attendance"),bgColor:"bg-purple-50 hover:bg-purple-100"},{title:"Teaching Schedule",description:"View or edit your teaching schedule",onClick:()=>r("/schedule"),bgColor:"bg-green-50 hover:bg-green-100"}];return x.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[x.jsx(bk,{}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((t,s)=>x.jsx(Dk,{title:t.title,description:t.description,onClick:t.onClick,bgColor:t.bgColor},s))})]})},Lk=()=>{const[r,e]=H.useState([]),t=KA(kd,"students");H.useEffect(()=>{(async()=>{try{const y=(await hk(t)).docs.map(w=>({id:w.id,...w.data(),isEditable:!1}));e(y)}catch(p){console.error("Error fetching students: ",p)}})()},[]);const s=()=>{e([{name:"",instrument:"",day:"",isEditable:!0},...r])},o=(d,p,y)=>{const{value:w}=d.target,T=r.map((S,O)=>O===p?{...S,[y]:w}:S);e(T)},l=async d=>{const p=r[d],y=r.map((w,T)=>T===d?{...w,isEditable:!w.isEditable}:w);if(p.isEditable)try{if(p.id)await dk(ef(kd,"students",p.id),{name:p.name,instrument:p.instrument,day:p.day});else{const w=await pk(t,{name:p.name,instrument:p.instrument,day:p.day});y[d].id=w.id}}catch(w){console.error("Error saving document: ",w);return}e(y)},h=async d=>{try{const p=r[d];p.id&&await fk(ef(kd,"students",p.id));const y=r.filter((w,T)=>T!==d);e(y)}catch(p){console.error("Error deleting document: ",p)}};return x.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:x.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[x.jsx("div",{className:"px-4 md:px-6 py-4 border-b border-gray-200",children:x.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[x.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Students"}),x.jsxs("button",{onClick:s,className:"w-full md:w-auto inline-flex items-center justify-center px-4 py-2 bg-blue text-white rounded-md transition-colors duration-200",children:[x.jsx(kk,{className:"w-4 h-4 mr-2"}),"Add Student"]})]})}),x.jsx("div",{className:"hidden md:block overflow-x-auto",children:x.jsxs("table",{className:"w-full",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"bg-gray-50",children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Instrument"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Day"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((d,p)=>x.jsxs("tr",{className:"hover:bg-gray-50",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.isEditable?x.jsx("input",{type:"text",value:d.name,onChange:y=>o(y,p,"name"),placeholder:"Enter Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):x.jsx("div",{className:"flex items-center",children:x.jsx("span",{className:"text-sm text-gray-900",children:d.name||"Not specified"})})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.isEditable?x.jsx("div",{className:"flex items-center",children:x.jsx("input",{type:"text",value:d.instrument,onChange:y=>o(y,p,"instrument"),placeholder:"Enter Instrument",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})}):x.jsx("div",{className:"flex items-center",children:x.jsx("span",{className:"text-sm text-gray-900",children:d.instrument||"Not specified"})})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.isEditable?x.jsxs("select",{value:d.day,onChange:y=>o(y,p,"day"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[x.jsx("option",{value:"",children:"Select Day"}),x.jsx("option",{value:"Monday",children:"Monday"}),x.jsx("option",{value:"Tuesday",children:"Tuesday"}),x.jsx("option",{value:"Wednesday",children:"Wednesday"}),x.jsx("option",{value:"Thursday",children:"Thursday"}),x.jsx("option",{value:"Friday",children:"Friday"})]}):x.jsx("span",{className:"inline-flex px-2 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded-full",children:d.day||"Not selected"})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:()=>l(p),className:`inline-flex items-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${d.isEditable?"bg-green hover:bg-green-700 text-white":"bg-blue hover:bg-blue-700 text-white"}`,children:d.isEditable?x.jsxs(x.Fragment,{children:[x.jsx(Fy,{className:"w-4 h-4 mr-1"}),"Save"]}):x.jsxs(x.Fragment,{children:[x.jsx(My,{className:"w-4 h-4 mr-1"}),"Edit"]})}),x.jsxs("button",{onClick:()=>h(p),className:"inline-flex items-center px-3 py-2 bg-red text-white rounded-md transition-colors duration-200",children:[x.jsx(Uy,{className:"w-4 h-4 mr-1"}),"Remove"]})]})})]},d.id||p))})]})}),x.jsx("div",{className:"md:hidden",children:x.jsx("div",{className:"grid grid-cols-1 gap-4 p-4",children:r.map((d,p)=>x.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-4",children:[d.isEditable?x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),x.jsx("input",{type:"text",value:d.name,onChange:y=>o(y,p,"name"),placeholder:"Enter Name",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instrument"}),x.jsx("div",{className:"flex items-center",children:x.jsx("input",{type:"text",value:d.instrument,onChange:y=>o(y,p,"instrument"),placeholder:"Enter Instrument",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),x.jsxs("select",{value:d.day,onChange:y=>o(y,p,"day"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[x.jsx("option",{value:"",children:"Select Day"}),x.jsx("option",{value:"Monday",children:"Monday"}),x.jsx("option",{value:"Tuesday",children:"Tuesday"}),x.jsx("option",{value:"Wednesday",children:"Wednesday"}),x.jsx("option",{value:"Thursday",children:"Thursday"}),x.jsx("option",{value:"Friday",children:"Friday"})]})]})]}):x.jsxs("div",{className:"p-2 flex justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(Pk,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{className:"text-sm font-medium  text-gray-900",children:d.name||"Not specified"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(Ak,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{className:"text-sm text-gray-600",children:d.instrument||"Not specified"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(Ck,{className:"w-4 h-4 mr-2 text-gray-400"}),x.jsx("span",{className:"inline-flex px-2 py-1 text-sm font-medium bg-gray-100 text-gray-800 rounded-full",children:d.day||"Not selected"})]})]}),x.jsxs("div",{className:"mt-4 flex   ",children:[x.jsx("button",{onClick:()=>l(p),className:`w-2/3 mr-2 inline-flex items-center justify-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200 ${d.isEditable?"bg-green  text-white":"bg-blue  text-white"}`,children:d.isEditable?x.jsxs(x.Fragment,{children:[x.jsx(Fy,{className:"w-4 h-4 mr-1"}),"Save"]}):x.jsxs(x.Fragment,{children:[x.jsx(My,{className:"w-4 h-4 mr-1"}),"Edit"]})}),x.jsxs("button",{onClick:()=>h(p),className:"w-2/3 bg-red  text-white mr-2 inline-flex items-center justify-center px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:[x.jsx(Uy,{className:"w-4 h-4 mr-1"}),"Remove"]})]})]},d.id||p))})})]})})};function Vk(r){return Mc({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(r)}function Mk(r){return Mc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M336 256c-20.56 0-40.44-9.18-56-25.84-15.13-16.25-24.37-37.92-26-61-1.74-24.62 5.77-47.26 21.14-63.76S312 80 336 80c23.83 0 45.38 9.06 60.7 25.52 15.47 16.62 23 39.22 21.26 63.63-1.67 23.11-10.9 44.77-26 61C376.44 246.82 356.57 256 336 256zm66-88zm65.83 264H204.18a27.71 27.71 0 0 1-22-10.67 30.22 30.22 0 0 1-5.26-25.79c8.42-33.81 29.28-61.85 60.32-81.08C264.79 297.4 299.86 288 336 288c36.85 0 71 9 98.71 26.05 31.11 19.13 52 47.33 60.38 81.55a30.27 30.27 0 0 1-5.32 25.78A27.68 27.68 0 0 1 467.83 432zM147 260c-35.19 0-66.13-32.72-69-72.93-1.42-20.6 5-39.65 18-53.62 12.86-13.83 31-21.45 51-21.45s38 7.66 50.93 21.57c13.1 14.08 19.5 33.09 18 53.52-2.87 40.2-33.8 72.91-68.93 72.91zm65.66 31.45c-17.59-8.6-40.42-12.9-65.65-12.9-29.46 0-58.07 7.68-80.57 21.62-25.51 15.83-42.67 38.88-49.6 66.71a27.39 27.39 0 0 0 4.79 23.36A25.32 25.32 0 0 0 41.72 400h111a8 8 0 0 0 7.87-6.57c.11-.63.25-1.26.41-1.88 8.48-34.06 28.35-62.84 57.71-83.82a8 8 0 0 0-.63-13.39c-1.57-.92-3.37-1.89-5.42-2.89z"},child:[]}]})(r)}function Fk(r){return Mc({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"},child:[]},{tag:"polyline",attr:{points:"16 17 21 12 16 7"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"},child:[]}]})(r)}const jy=()=>{const[r,e]=H.useState(!1),t=Or(),s=Ja();H.useEffect(()=>{e(!1)},[t]),H.useEffect(()=>{const d=p=>{p.key==="Escape"&&e(!1)};return window.addEventListener("keydown",d),()=>window.removeEventListener("keydown",d)},[]);const o=()=>{e(!r)},l=async()=>{try{await FS(Io),alert("You have been successfully signed out!"),s("/")}catch(d){console.error("Logout Failed:",d.message)}},h=[{path:"/home",icon:x.jsx(Vk,{className:"h-6 w-6"}),label:"Home"},{path:"/students",icon:x.jsx(Mk,{className:"h-6 w-6"}),label:"Students"},{path:"#",icon:x.jsx(Fk,{className:"h-6 w-6"}),label:"Logout",action:l}];return x.jsxs("div",{className:"relative",children:[x.jsxs("nav",{className:`fixed top-0 left-0 h-full bg-darkGreen text-white hidden md:flex flex-col ${r?"md:w-64":"md:w-16"} transition-all duration-300 ease-in-out z-40 shadow-lg`,"aria-expanded":r,role:"navigation",children:[x.jsxs("div",{className:"relative h-16 flex items-center border-b border-white/10",children:[x.jsx("button",{onClick:o,className:`p-2 text-white hover:bg-white/10 focus:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 rounded-md transition-all duration-300 ${r?"ml-52":"ml-3"}`,"aria-label":r?"Close navigation":"Open navigation",children:r?x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}):x.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16m-7 6h7"})})}),r&&x.jsx("h1",{className:"text-xl font-semibold absolute left-4",children:"Presentio"})]}),x.jsx("div",{className:"flex flex-col space-y-2 mt-6 px-3",children:h.map(d=>{const p=t.pathname===d.path;return x.jsxs("a",{href:d.path,onClick:d.action||void 0,className:`flex items-center px-3 py-3 rounded-md transition-all duration-200 ${r?"":"justify-center"} ${p?"bg-white/20 text-white":"hover:bg-white/10 text-white/80 hover:text-white"}`,"aria-current":p?"page":void 0,children:[x.jsx("span",{className:"flex items-center justify-center w-6",children:d.icon}),r&&x.jsx("span",{className:"ml-4 font-medium",children:d.label})]},d.path)})}),r&&x.jsx("div",{className:"mt-auto p-4 border-t border-white/10",children:x.jsx("div",{className:"text-sm text-white/60",children:" 2025 Fretnot Music School"})})]}),x.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-darkGreen text-white z-40 shadow-lg",children:x.jsx("div",{className:"flex justify-around items-center h-16",children:h.map(d=>{const p=t.pathname===d.path;return x.jsxs("a",{href:d.path,onClick:d.action||void 0,className:`flex flex-col items-center justify-center w-full h-full ${p?"bg-white/20 text-white":"text-white/80 hover:text-white active:bg-white/10"}`,"aria-current":p?"page":void 0,children:[x.jsx("span",{className:"flex items-center justify-center",children:d.icon}),x.jsx("span",{className:"text-xs mt-1",children:d.label})]},d.path)})})}),r&&x.jsx("div",{onClick:o,className:"fixed top-0 left-0 w-full h-full bg-black/50 backdrop-blur-sm transition-all duration-300 z-30 hidden md:block","aria-hidden":"true"})]})},zy=({children:r})=>{const[e,t]=H.useState(!0),[s,o]=H.useState(!1);return H.useEffect(()=>{const l=Io.onAuthStateChanged(h=>{o(!!h),t(!1)});return()=>l()},[]),e?x.jsxs("div",{children:[x.jsx(jy,{}),"Loading..."]}):s?x.jsxs("div",{children:[x.jsx(jy,{}),x.jsx("main",{children:r})]}):x.jsx(Xy,{to:"/login"})},Uk=()=>{const[r,e]=H.useState(!1);return x.jsx(G0,{children:x.jsxs(S0,{children:[x.jsx(xa,{path:"/",element:x.jsx(Xy,{to:"/login"})}),x.jsx(xa,{path:"/login",element:r?x.jsx(xk,{setShowSignUp:e}):x.jsx(Nk,{setShowSignUp:e})}),x.jsx(xa,{path:"/home",element:x.jsx(zy,{children:x.jsx(Ok,{})})}),x.jsx(xa,{path:"/students",element:x.jsx(zy,{children:x.jsx(Lk,{})})})]})})};OE.createRoot(document.getElementById("root")).render(x.jsx(H.StrictMode,{children:x.jsx(Uk,{})}));
